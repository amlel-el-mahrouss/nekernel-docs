\doxysection{Thread\+Local\+Storage.\+inl}
\hypertarget{_thread_local_storage_8inl_source}{}\label{_thread_local_storage_8inl_source}\index{dev/kernel/KernelKit/ThreadLocalStorage.inl@{dev/kernel/KernelKit/ThreadLocalStorage.inl}}
\mbox{\hyperlink{_thread_local_storage_8inl}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002\ \textcolor{comment}{}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ \ \ \ Copyright\ (C)\ 2024-\/2025,\ Amlal\ EL\ Mahrouss,\ all\ rights\ reserved.}}
\DoxyCodeLine{00004\ \textcolor{comment}{}}
\DoxyCodeLine{00005\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#ifndef\ INC\_PROCESS\_SCHEDULER\_H}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{_user_process_scheduler_8h}{KernelKit/UserProcessScheduler.h}}>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00015\ \textcolor{keyword}{inline}\ T*\ \mbox{\hyperlink{_thread_local_storage_8inl_a3e273becb8719d0ad0de7253b51dd2be}{tls\_new\_ptr}}(\textcolor{keywordtype}{void})\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00016\ \{}
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespace_ne_o_s}{NeOS}};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{keyword}{auto}\ ref\_process\ =\ UserProcessScheduler::The().CurrentProcess();}
\DoxyCodeLine{00020\ \ \ \ \ \mbox{\hyperlink{_kernel_panic_8h_a21aee4c355d56e3630f2f341f59b9406}{MUST\_PASS}}(ref\_process);}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{auto}\ pointer\ =\ ref\_process.Leak().New(\textcolor{keyword}{sizeof}(T));}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordflow}{if}\ (pointer.Error())}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{reinterpret\_cast<}T*\textcolor{keyword}{>}(pointer.Leak().Leak());}
\DoxyCodeLine{00028\ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00033\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespace_ne_o_s_ad5f3c5e87966b36f6741ac5897f80120}{NeOS::Bool}}\ \mbox{\hyperlink{_thread_local_storage_8inl_a06d4164a5937479180066bbfea76b831}{tls\_delete\_ptr}}(T*\ obj)\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00034\ \{}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespace_ne_o_s}{NeOS}};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordflow}{if}\ (!obj)}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a554d6ecb4ae62985018db18be458114d}{No}};}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{auto}\ ref\_process\ =\ UserProcessScheduler::The().CurrentProcess();}
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{_kernel_panic_8h_a21aee4c355d56e3630f2f341f59b9406}{MUST\_PASS}}(ref\_process);}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{class_ne_o_s_1_1_error_or}{ErrorOr<T*>}}\ obj\_wrapped\{obj\};}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordflow}{return}\ ref\_process.\mbox{\hyperlink{class_ne_o_s_1_1_error_or_af0319b3ff5fd9882da48564e154cae11}{Leak}}().Delete(obj\_wrapped,\ \textcolor{keyword}{sizeof}(T));}
\DoxyCodeLine{00046\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00051\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespace_ne_o_s_ad5f3c5e87966b36f6741ac5897f80120}{NeOS::Bool}}\ \mbox{\hyperlink{_thread_local_storage_8inl_a06d4164a5937479180066bbfea76b831}{tls\_delete\_ptr}}(\mbox{\hyperlink{class_ne_o_s_1_1_error_or}{NeOS::ErrorOr<T>}}\ obj)\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00052\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_thread_local_storage_8inl_a06d4164a5937479180066bbfea76b831}{tls\_delete\_ptr}}(obj.Leak());}
\DoxyCodeLine{00054\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00059\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespace_ne_o_s_ad5f3c5e87966b36f6741ac5897f80120}{NeOS::Bool}}\ \mbox{\hyperlink{_thread_local_storage_8inl_a06d4164a5937479180066bbfea76b831}{tls\_delete\_ptr}}(\mbox{\hyperlink{class_ne_o_s_1_1_error_or}{NeOS::ErrorOr<T*>}}\ obj)\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00060\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_thread_local_storage_8inl_a06d4164a5937479180066bbfea76b831}{tls\_delete\_ptr}}(obj-\/>Leak());}
\DoxyCodeLine{00062\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00070\ T*\ \mbox{\hyperlink{_thread_local_storage_8inl_aeb447845d0d9eee77a67d2bd3bd4d86f}{tls\_new\_class}}(Args\&\&...\ args)}
\DoxyCodeLine{00071\ \{}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespace_ne_o_s}{NeOS}};}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ T*\ obj\ =\ tls\_new\_ptr<T>();}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordflow}{if}\ (obj)}
\DoxyCodeLine{00077\ \ \ \ \ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ *obj\ =\ T(forward(args)...);}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ obj;}
\DoxyCodeLine{00080\ \ \ \ \ \}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00083\ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00089\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00090\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespace_ne_o_s_ad5f3c5e87966b36f6741ac5897f80120}{NeOS::Bool}}\ \mbox{\hyperlink{_thread_local_storage_8inl_a205bc00f5303243ab5811961f2fb2c5e}{tls\_delete\_class}}(T*\ obj)}
\DoxyCodeLine{00091\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespace_ne_o_s}{NeOS}};}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordflow}{if}\ (!obj)}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a554d6ecb4ae62985018db18be458114d}{No}};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ obj-\/>\string~T();}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_thread_local_storage_8inl_a06d4164a5937479180066bbfea76b831}{tls\_delete\_ptr}}(obj);}
\DoxyCodeLine{00099\ \}}

\end{DoxyCode}
