\doxysection{dev/kernel/\+HALKit/\+AMD64/\+Hal\+Application\+Processor.cc File Reference}
\hypertarget{_a_m_d64_2_hal_application_processor_8cc}{}\label{_a_m_d64_2_hal_application_processor_8cc}\index{dev/kernel/HALKit/AMD64/HalApplicationProcessor.cc@{dev/kernel/HALKit/AMD64/HalApplicationProcessor.cc}}
{\ttfamily \#include $<$modules/\+ACPI/\+ACPIFactory\+Interface.\+h$>$}\newline
{\ttfamily \#include $<$Kernel\+Kit/\+User\+Process\+Scheduler.\+h$>$}\newline
{\ttfamily \#include $<$HALKit/\+AMD64/\+Processor.\+h$>$}\newline
{\ttfamily \#include $<$Arch\+Kit/\+Arch\+Kit.\+h$>$}\newline
{\ttfamily \#include $<$Kernel\+Kit/\+Binary\+Mutex.\+h$>$}\newline
{\ttfamily \#include $<$Kernel\+Kit/\+Timer.\+h$>$}\newline
{\ttfamily \#include $<$modules/\+Core\+Gfx/\+Text\+Mgr.\+h$>$}\newline
{\ttfamily \#include $<$New\+Kit/\+Kernel\+Panic.\+h$>$}\newline
{\ttfamily \#include $<$Kernel\+Kit/\+Hardware\+Thread\+Scheduler.\+h$>$}\newline
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_ne_o_s_1_1_h_a_l_1_1_p_r_o_c_e_s_s___c_o_n_t_r_o_l___b_l_o_c_k}{Ne\+OS\+::\+HAL\+::\+PROCESS\+\_\+\+CONTROL\+\_\+\+BLOCK}}
\item 
struct \mbox{\hyperlink{struct_ne_o_s_1_1_h_a_l_1_1_s_d_t___o_b_j_e_c_t}{Ne\+OS\+::\+HAL\+::\+SDT\+\_\+\+OBJECT}}
\begin{DoxyCompactList}\small\item\em Multiple APIC Descriptor Table. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespace_ne_o_s}{Ne\+OS}}
\begin{DoxyCompactList}\small\item\em The {\bfseries{Kernel}} namespace. \end{DoxyCompactList}\item 
namespace \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l}{Ne\+OS\+::\+HAL}}
\begin{DoxyCompactList}\small\item\em The {\bfseries{\doxylink{namespace_ne_o_s_1_1_h_a_l}{HAL}}} namespace. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{_a_m_d64_2_hal_application_processor_8cc_a74ef3dc1b6a33e9aad3fcd0ac862ffcc}{k\+Apic\+Signature}}~"{}APIC"{}
\item 
\#define \mbox{\hyperlink{_a_m_d64_2_hal_application_processor_8cc_a9607ce8830154318b19cdd08ed1ce202}{k\+APIC\+\_\+\+ICR\+\_\+\+Low}}~0x300
\item 
\#define \mbox{\hyperlink{_a_m_d64_2_hal_application_processor_8cc_a47fbccc70ccb5540f2e531ef123d849d}{k\+APIC\+\_\+\+ICR\+\_\+\+High}}~0x310
\item 
\#define \mbox{\hyperlink{_a_m_d64_2_hal_application_processor_8cc_ac93ea84a645875568b3481bf17329f77}{k\+APIC\+\_\+\+SIPI\+\_\+\+Vector}}~0x00500
\item 
\#define \mbox{\hyperlink{_a_m_d64_2_hal_application_processor_8cc_a17f294cf029dc2dab5b9c62daaaa9bc3}{k\+APIC\+\_\+\+EIPI\+\_\+\+Vector}}~0x00400
\item 
\#define \mbox{\hyperlink{_a_m_d64_2_hal_application_processor_8cc_ae11847d525c330927dec812ebf50d260}{k\+APIC\+\_\+\+BASE\+\_\+\+MSR}}~0x1B
\item 
\#define \mbox{\hyperlink{_a_m_d64_2_hal_application_processor_8cc_aecbe7c61e55a2fc6ee204a4406848d0a}{k\+APIC\+\_\+\+BASE\+\_\+\+MSR\+\_\+\+BSP}}~0x100
\item 
\#define \mbox{\hyperlink{_a_m_d64_2_hal_application_processor_8cc_a07c24eef58f18d66cb74578b9a65bfb9}{k\+APIC\+\_\+\+BASE\+\_\+\+MSR\+\_\+\+ENABLE}}~0x800
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespace_ne_o_s_ad33956dfc567efebd063d7bc6d1ae82d}{Void}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a96dbb76cde75a10cfccd11f89e2462e5}{Ne\+OS\+::\+HAL\+::hal\+\_\+send\+\_\+start\+\_\+ipi}} (\mbox{\hyperlink{namespace_ne_o_s_a160d206409956603d46f6292a41b1f52}{UInt32}} target, \mbox{\hyperlink{namespace_ne_o_s_a160d206409956603d46f6292a41b1f52}{UInt32}} apic\+\_\+id)
\begin{DoxyCompactList}\small\item\em Send IPI command to APIC. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespace_ne_o_s_ad33956dfc567efebd063d7bc6d1ae82d}{Void}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a1cb3dbf089c572bbc98a6a3020121fc3}{Ne\+OS\+::\+HAL\+::hal\+\_\+send\+\_\+sipi}} (\mbox{\hyperlink{namespace_ne_o_s_a160d206409956603d46f6292a41b1f52}{UInt32}} target, \mbox{\hyperlink{namespace_ne_o_s_a160d206409956603d46f6292a41b1f52}{UInt32}} apic\+\_\+id, \mbox{\hyperlink{namespace_ne_o_s_a0835cc5d92716e99fd7387e297984399}{UInt8}} vector)
\begin{DoxyCompactList}\small\item\em Send end IPI for CPU. \end{DoxyCompactList}\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_abbaccfbed35b945162c27ef6d3748e77}{EXTERN\+\_\+C}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_ae90d9eb7564d3c072785e9d1b601eb89}{HAL\+::\+Stack\+Frame\+Ptr}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a6023c31223479bc3b5fb8cb8eb57e2fb}{Ne\+OS\+::\+HAL\+::mp\+\_\+get\+\_\+current\+\_\+context}} (\mbox{\hyperlink{namespace_ne_o_s_a73977fb2765283d322d7060259d9933c}{Int64}} pid)
\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_abbaccfbed35b945162c27ef6d3748e77}{EXTERN\+\_\+C}} \mbox{\hyperlink{ddk_8h_ae4cc35dcc70810fa972cc8a5185a28fa}{BOOL}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a97102e2ead1a0fd768e513ce70068fab}{Ne\+OS\+::\+HAL\+::mp\+\_\+register\+\_\+process}} (\mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_ae90d9eb7564d3c072785e9d1b601eb89}{HAL\+::\+Stack\+Frame\+Ptr}} stack\+\_\+frame, \mbox{\hyperlink{namespace_ne_o_s_af180f8fc4c88cb9674ca595d93859ef0}{Process\+ID}} pid)
\item 
\mbox{\hyperlink{namespace_ne_o_s_ad5f3c5e87966b36f6741ac5897f80120}{Bool}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_ac1f00a48ba44fdc740a4bd1905540a21}{Ne\+OS\+::\+HAL\+::mp\+\_\+is\+\_\+smp}} (\mbox{\hyperlink{namespace_ne_o_s_ad33956dfc567efebd063d7bc6d1ae82d}{Void}}) noexcept
\begin{DoxyCompactList}\small\item\em Is the current config SMP aware? \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespace_ne_o_s_ad33956dfc567efebd063d7bc6d1ae82d}{Void}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a2455d2816a1f6ec46490c7d35f959289}{Ne\+OS\+::\+HAL\+::mp\+\_\+get\+\_\+cores}} (\mbox{\hyperlink{namespace_ne_o_s_ac1c63bbbae84b587c92428c1f2025036}{Void\+Ptr}} vendor\+\_\+ptr) noexcept
\begin{DoxyCompactList}\small\item\em Fetch and enable SMP scheduler. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a10b2d890d871e1489bb02b7e70d9bdfb}{STATIC}} struct PROCESS\+\_\+\+APIC\+\_\+\+MADT \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a9c57eabf2560a7ad09e5836703107d05}{Ne\+OS\+::\+HAL\+::k\+MADTBlock}} = nullptr
\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a10b2d890d871e1489bb02b7e70d9bdfb}{STATIC}} \mbox{\hyperlink{namespace_ne_o_s_ad5f3c5e87966b36f6741ac5897f80120}{Bool}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a3078b41f7b2824359cd5027eb0f02a55}{Ne\+OS\+::\+HAL\+::k\+SMPAware}} = \mbox{\hyperlink{user_2_macros_8h_a65e9886d74aaee76545e83dd09011727}{false}}
\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a10b2d890d871e1489bb02b7e70d9bdfb}{STATIC}} \mbox{\hyperlink{namespace_ne_o_s_a73977fb2765283d322d7060259d9933c}{Int64}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_ab899280ca82a9ced40b92145150e5b4d}{Ne\+OS\+::\+HAL\+::k\+SMPCount}} = 0
\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a10b2d890d871e1489bb02b7e70d9bdfb}{STATIC}} \mbox{\hyperlink{namespace_ne_o_s_a45d30b4091e6c91b5e25bcf408ca6dbb}{UInt\+Ptr}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a33bf10ce453d29cd03523b736ad312da}{Ne\+OS\+::\+HAL\+::k\+Apic\+Base\+Address}} = 0\+UL
\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a10b2d890d871e1489bb02b7e70d9bdfb}{STATIC}} \mbox{\hyperlink{namespace_ne_o_s_a91a19724952b6c6faf9b52f9efc935f7}{Int32}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_aa09c0a2f412e408dc8bed73177e42287}{Ne\+OS\+::\+HAL\+::k\+SMPInterrupt}} = 0
\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a10b2d890d871e1489bb02b7e70d9bdfb}{STATIC}} \mbox{\hyperlink{namespace_ne_o_s_a09d79cd68f15b02280f00125b4e62cb5}{UInt64}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a8a9abb02e642bf8d5f577fb99914f6c7}{Ne\+OS\+::\+HAL\+::k\+APICLocales}} \mbox{[}\mbox{\hyperlink{_user_process_scheduler_8h_ae633e81676a77d8dc3d29554f5d283c9}{k\+Sched\+Process\+Limit\+Per\+Team}}\mbox{]} = \{0\}
\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a10b2d890d871e1489bb02b7e70d9bdfb}{STATIC}} \mbox{\hyperlink{namespace_ne_o_s_ac1c63bbbae84b587c92428c1f2025036}{Void\+Ptr}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a2e2929636b974930b38c36b6a91701a0}{Ne\+OS\+::\+HAL\+::k\+Raw\+MADT}} = nullptr
\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a10b2d890d871e1489bb02b7e70d9bdfb}{STATIC}} \mbox{\hyperlink{struct_ne_o_s_1_1_h_a_l_1_1_p_r_o_c_e_s_s___c_o_n_t_r_o_l___b_l_o_c_k}{PROCESS\+\_\+\+CONTROL\+\_\+\+BLOCK}} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a7a50a0c001e6bd525c27f8c722c1866e}{Ne\+OS\+::\+HAL\+::k\+Process\+Blocks}} \mbox{[}\mbox{\hyperlink{_user_process_scheduler_8h_ae633e81676a77d8dc3d29554f5d283c9}{k\+Sched\+Process\+Limit\+Per\+Team}}\mbox{]} = \{0\}
\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_abbaccfbed35b945162c27ef6d3748e77}{EXTERN\+\_\+C}} \mbox{\hyperlink{namespace_ne_o_s_af96b578c23518d339d562bbab4efa72f}{Char}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_a5830f85fabdd2fcf181976719875e115}{Ne\+OS\+::\+HAL\+::hal\+\_\+ap\+\_\+blob\+\_\+start}}
\begin{DoxyCompactList}\small\item\em Assembly symbol to bootstrap AP. \end{DoxyCompactList}\item 
\mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_abbaccfbed35b945162c27ef6d3748e77}{EXTERN\+\_\+C}} \mbox{\hyperlink{namespace_ne_o_s_af96b578c23518d339d562bbab4efa72f}{Char}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{namespace_ne_o_s_1_1_h_a_l_ad5cf6b6093c7767df512e0be80add867}{Ne\+OS\+::\+HAL\+::hal\+\_\+ap\+\_\+blob\+\_\+end}}
\begin{DoxyCompactList}\small\item\em Assembly symbol to bootstrap AP. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{_a_m_d64_2_hal_application_processor_8cc_ae11847d525c330927dec812ebf50d260}\label{_a_m_d64_2_hal_application_processor_8cc_ae11847d525c330927dec812ebf50d260} 
\index{HalApplicationProcessor.cc@{HalApplicationProcessor.cc}!kAPIC\_BASE\_MSR@{kAPIC\_BASE\_MSR}}
\index{kAPIC\_BASE\_MSR@{kAPIC\_BASE\_MSR}!HalApplicationProcessor.cc@{HalApplicationProcessor.cc}}
\doxysubsubsection{\texorpdfstring{kAPIC\_BASE\_MSR}{kAPIC\_BASE\_MSR}}
{\footnotesize\ttfamily \#define k\+APIC\+\_\+\+BASE\+\_\+\+MSR~0x1B}

\Hypertarget{_a_m_d64_2_hal_application_processor_8cc_aecbe7c61e55a2fc6ee204a4406848d0a}\label{_a_m_d64_2_hal_application_processor_8cc_aecbe7c61e55a2fc6ee204a4406848d0a} 
\index{HalApplicationProcessor.cc@{HalApplicationProcessor.cc}!kAPIC\_BASE\_MSR\_BSP@{kAPIC\_BASE\_MSR\_BSP}}
\index{kAPIC\_BASE\_MSR\_BSP@{kAPIC\_BASE\_MSR\_BSP}!HalApplicationProcessor.cc@{HalApplicationProcessor.cc}}
\doxysubsubsection{\texorpdfstring{kAPIC\_BASE\_MSR\_BSP}{kAPIC\_BASE\_MSR\_BSP}}
{\footnotesize\ttfamily \#define k\+APIC\+\_\+\+BASE\+\_\+\+MSR\+\_\+\+BSP~0x100}

\Hypertarget{_a_m_d64_2_hal_application_processor_8cc_a07c24eef58f18d66cb74578b9a65bfb9}\label{_a_m_d64_2_hal_application_processor_8cc_a07c24eef58f18d66cb74578b9a65bfb9} 
\index{HalApplicationProcessor.cc@{HalApplicationProcessor.cc}!kAPIC\_BASE\_MSR\_ENABLE@{kAPIC\_BASE\_MSR\_ENABLE}}
\index{kAPIC\_BASE\_MSR\_ENABLE@{kAPIC\_BASE\_MSR\_ENABLE}!HalApplicationProcessor.cc@{HalApplicationProcessor.cc}}
\doxysubsubsection{\texorpdfstring{kAPIC\_BASE\_MSR\_ENABLE}{kAPIC\_BASE\_MSR\_ENABLE}}
{\footnotesize\ttfamily \#define k\+APIC\+\_\+\+BASE\+\_\+\+MSR\+\_\+\+ENABLE~0x800}

\Hypertarget{_a_m_d64_2_hal_application_processor_8cc_a17f294cf029dc2dab5b9c62daaaa9bc3}\label{_a_m_d64_2_hal_application_processor_8cc_a17f294cf029dc2dab5b9c62daaaa9bc3} 
\index{HalApplicationProcessor.cc@{HalApplicationProcessor.cc}!kAPIC\_EIPI\_Vector@{kAPIC\_EIPI\_Vector}}
\index{kAPIC\_EIPI\_Vector@{kAPIC\_EIPI\_Vector}!HalApplicationProcessor.cc@{HalApplicationProcessor.cc}}
\doxysubsubsection{\texorpdfstring{kAPIC\_EIPI\_Vector}{kAPIC\_EIPI\_Vector}}
{\footnotesize\ttfamily \#define k\+APIC\+\_\+\+EIPI\+\_\+\+Vector~0x00400}

\Hypertarget{_a_m_d64_2_hal_application_processor_8cc_a47fbccc70ccb5540f2e531ef123d849d}\label{_a_m_d64_2_hal_application_processor_8cc_a47fbccc70ccb5540f2e531ef123d849d} 
\index{HalApplicationProcessor.cc@{HalApplicationProcessor.cc}!kAPIC\_ICR\_High@{kAPIC\_ICR\_High}}
\index{kAPIC\_ICR\_High@{kAPIC\_ICR\_High}!HalApplicationProcessor.cc@{HalApplicationProcessor.cc}}
\doxysubsubsection{\texorpdfstring{kAPIC\_ICR\_High}{kAPIC\_ICR\_High}}
{\footnotesize\ttfamily \#define k\+APIC\+\_\+\+ICR\+\_\+\+High~0x310}

\Hypertarget{_a_m_d64_2_hal_application_processor_8cc_a9607ce8830154318b19cdd08ed1ce202}\label{_a_m_d64_2_hal_application_processor_8cc_a9607ce8830154318b19cdd08ed1ce202} 
\index{HalApplicationProcessor.cc@{HalApplicationProcessor.cc}!kAPIC\_ICR\_Low@{kAPIC\_ICR\_Low}}
\index{kAPIC\_ICR\_Low@{kAPIC\_ICR\_Low}!HalApplicationProcessor.cc@{HalApplicationProcessor.cc}}
\doxysubsubsection{\texorpdfstring{kAPIC\_ICR\_Low}{kAPIC\_ICR\_Low}}
{\footnotesize\ttfamily \#define k\+APIC\+\_\+\+ICR\+\_\+\+Low~0x300}

\Hypertarget{_a_m_d64_2_hal_application_processor_8cc_ac93ea84a645875568b3481bf17329f77}\label{_a_m_d64_2_hal_application_processor_8cc_ac93ea84a645875568b3481bf17329f77} 
\index{HalApplicationProcessor.cc@{HalApplicationProcessor.cc}!kAPIC\_SIPI\_Vector@{kAPIC\_SIPI\_Vector}}
\index{kAPIC\_SIPI\_Vector@{kAPIC\_SIPI\_Vector}!HalApplicationProcessor.cc@{HalApplicationProcessor.cc}}
\doxysubsubsection{\texorpdfstring{kAPIC\_SIPI\_Vector}{kAPIC\_SIPI\_Vector}}
{\footnotesize\ttfamily \#define k\+APIC\+\_\+\+SIPI\+\_\+\+Vector~0x00500}

\Hypertarget{_a_m_d64_2_hal_application_processor_8cc_a74ef3dc1b6a33e9aad3fcd0ac862ffcc}\label{_a_m_d64_2_hal_application_processor_8cc_a74ef3dc1b6a33e9aad3fcd0ac862ffcc} 
\index{HalApplicationProcessor.cc@{HalApplicationProcessor.cc}!kApicSignature@{kApicSignature}}
\index{kApicSignature@{kApicSignature}!HalApplicationProcessor.cc@{HalApplicationProcessor.cc}}
\doxysubsubsection{\texorpdfstring{kApicSignature}{kApicSignature}}
{\footnotesize\ttfamily \#define k\+Apic\+Signature~"{}APIC"{}}

