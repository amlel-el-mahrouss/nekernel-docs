\doxysection{Dialogs.\+h}
\hypertarget{_dialogs_8h_source}{}\label{_dialogs_8h_source}\index{public/tools/diutil/vendor/Dialogs.h@{public/tools/diutil/vendor/Dialogs.h}}
\mbox{\hyperlink{_dialogs_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ \ Portable\ File\ Dialogs}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ \ Copyright\ ©\ 2018–2022\ Sam\ Hocevar\ <sam@hocevar.net>}}
\DoxyCodeLine{00005\ \textcolor{comment}{//}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ \ This\ library\ is\ free\ software.\ It\ comes\ without\ any\ warranty,\ to}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ \ the\ extent\ permitted\ by\ applicable\ law.\ You\ can\ redistribute\ it}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ \ and/or\ modify\ it\ under\ the\ terms\ of\ the\ Do\ What\ the\ Fuck\ You\ Want}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ to\ Public\ License,\ Version\ 2,\ as\ published\ by\ the\ WTFPL\ Task\ Force.}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ \ See\ http://www.wtfpl.net/\ for\ more\ details.}}
\DoxyCodeLine{00011\ \textcolor{comment}{//}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#ifndef\ WIN32\_LEAN\_AND\_MEAN}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#define\ WIN32\_LEAN\_AND\_MEAN\ 1}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <windows.h>}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <commdlg.h>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <shlobj.h>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <shobjidl.h>}\ \textcolor{comment}{//\ IFileDialog}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <shellapi.h>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <strsafe.h>}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <future>}\ \ \ \ \textcolor{comment}{//\ std::async}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <userenv.h>}\ \textcolor{comment}{//\ GetUserProfileDirectory()}}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <emscripten.h>}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#ifndef\ \_POSIX\_C\_SOURCE}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#define\ \_POSIX\_C\_SOURCE\ 2\ }\textcolor{comment}{//\ for\ popen()}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#ifdef\ \_\_APPLE\_\_}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#ifndef\ \_DARWIN\_C\_SOURCE}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#define\ \_DARWIN\_C\_SOURCE}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#include\ <cstdio>}\ \ \ \ \ \textcolor{comment}{//\ popen()}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#include\ <cstdlib>}\ \ \ \ \textcolor{comment}{//\ std::getenv()}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#include\ <fcntl.h>}\ \ \ \ \textcolor{comment}{//\ fcntl()}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#include\ <unistd.h>}\ \ \ \textcolor{comment}{//\ read(),\ pipe(),\ dup2(),\ getuid()}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#include\ <csignal>}\ \ \ \ \textcolor{comment}{//\ ::kill,\ std::signal}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#include\ <sys/stat.h>}\ \textcolor{comment}{//\ stat()}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#include\ <sys/wait.h>}\ \textcolor{comment}{//\ waitpid()}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#include\ <pwd.h>}\ \ \ \ \ \ \textcolor{comment}{//\ getpwnam()}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#include\ <string>}\ \ \ \textcolor{comment}{//\ std::string}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#include\ <memory>}\ \ \ \textcolor{comment}{//\ std::shared\_ptr}}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\#include\ <iostream>}\ \textcolor{comment}{//\ std::ostream}}
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#include\ <map>}\ \ \ \ \ \ \textcolor{comment}{//\ std::map}}
\DoxyCodeLine{00054\ \textcolor{preprocessor}{\#include\ <set>}\ \ \ \ \ \ \textcolor{comment}{//\ std::set}}
\DoxyCodeLine{00055\ \textcolor{preprocessor}{\#include\ <regex>}\ \ \ \ \textcolor{comment}{//\ std::regex}}
\DoxyCodeLine{00056\ \textcolor{preprocessor}{\#include\ <thread>}\ \ \ \textcolor{comment}{//\ std::mutex,\ std::this\_thread}}
\DoxyCodeLine{00057\ \textcolor{preprocessor}{\#include\ <chrono>}\ \ \ \textcolor{comment}{//\ std::chrono}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{comment}{//\ Versions\ of\ mingw64\ g++\ up\ to\ 9.3.0\ do\ not\ have\ a\ complete\ IFileDialog}}
\DoxyCodeLine{00060\ \textcolor{preprocessor}{\#ifndef\ PFD\_HAS\_IFILEDIALOG}}
\DoxyCodeLine{00061\ \textcolor{preprocessor}{\#define\ PFD\_HAS\_IFILEDIALOG\ 1}}
\DoxyCodeLine{00062\ \textcolor{preprocessor}{\#if\ (defined\ \_\_MINGW64\_\_\ ||\ defined\ \_\_MINGW32\_\_)\ \&\&\ defined\ \_\_GXX\_ABI\_VERSION}}
\DoxyCodeLine{00063\ \textcolor{preprocessor}{\#if\ \_\_GXX\_ABI\_VERSION\ <=\ 1013}}
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#undef\ PFD\_HAS\_IFILEDIALOG}}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#define\ PFD\_HAS\_IFILEDIALOG\ 0}}
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00068\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacepfd}{pfd}}}
\DoxyCodeLine{00071\ \{}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679}{button}}}
\DoxyCodeLine{00074\ \ \ \ \ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a10aec35353f9c4096a71c38654c3d402}{cancel}}\ =\ -\/1,}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a444bcb3a3fcf8389296c49467f27e1d6}{ok}},}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679aa6105c0a611b41b08f1209506350279e}{yes}},}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a7fa3b767c460b54a2be4d49030b349c7}{no}},}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a5bb94a1c12413a2e5d14deabab29f2aa}{abort}},}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a165e6d21e0a2cc9ebb32ca05f90e0fa7}{retry}},}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a567bc1d268f135496de3d5b946b691f3}{ignore}},}
\DoxyCodeLine{00082\ \ \ \ \ \};}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8}{choice}}}
\DoxyCodeLine{00085\ \ \ \ \ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a444bcb3a3fcf8389296c49467f27e1d6}{ok}}\ =\ 0,}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a809da5df9c86c6426c8d8db2934d3f51}{ok\_cancel}},}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a20f0596c21ad67a7fda598ffc7d038d1}{yes\_no}},}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a5c5cb337bb234e240912dc139048038c}{yes\_no\_cancel}},}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a7928e609b1665227bcb71b20d431fd6a}{retry\_cancel}},}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a9df771aa8f010c4b928e42a8979d5609}{abort\_retry\_ignore}},}
\DoxyCodeLine{00092\ \ \ \ \ \};}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85}{icon}}}
\DoxyCodeLine{00095\ \ \ \ \ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acaf9b6b99962bf5c2264824231d7a40c}{info}}\ =\ 0,}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a7b83d3f08fa392b79e3f553b585971cd}{warning}},}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acb5e100e5a9a3e7f6d1fd97512215282}{error}},}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a5494af1f14a8c19939968c3e9e2d4f79}{question}},}
\DoxyCodeLine{00100\ \ \ \ \ \};}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{comment}{//\ Additional\ option\ flags\ for\ various\ dialog\ constructors}}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ :\ uint8\_t}
\DoxyCodeLine{00104\ \ \ \ \ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a334c4a4c42fdb79d7ebc3e73b517e6f8}{none}}\ =\ 0,}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ file\ open,\ allow\ multiselect.}}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997ab66abfe0e0c2ef7c545895c12a0a8837}{multiselect}}\ =\ 0x1,}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ file\ save,\ force\ overwrite\ and\ disable\ the\ confirmation\ dialog.}}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a8fc52a8161c68fcaeebdfdb500a36d4b}{force\_overwrite}}\ =\ 0x2,}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ folder\ select,\ force\ path\ to\ be\ the\ provided\ argument\ instead}}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ of\ the\ last\ opened\ directory,\ which\ is\ the\ Microsoft-\/recommended,}}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ user-\/friendly\ behaviour.}}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a51106d57377a72da5f9a0415f4f6142b}{force\_path}}\ =\ 0x4,}
\DoxyCodeLine{00114\ \ \ \ \ \};}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ \mbox{\hyperlink{namespacepfd_aae00cd25e23dcc7e3a3c1f7678d1762c}{operator|}}(\mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ a,\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ b)}
\DoxyCodeLine{00117\ \ \ \ \ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}(uint8\_t(a)\ |\ uint8\_t(b));}
\DoxyCodeLine{00119\ \ \ \ \ \}}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacepfd_ab888b234398a273a027aebdeb7d5269f}{operator\&}}(\mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ a,\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ b)}
\DoxyCodeLine{00121\ \ \ \ \ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bool(uint8\_t(a)\ \&\ uint8\_t(b));}
\DoxyCodeLine{00123\ \ \ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{comment}{//\ The\ settings\ class,\ only\ exposing\ to\ the\ user\ a\ way\ to\ set\ verbose\ mode}}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{comment}{//\ and\ to\ force\ a\ rescan\ of\ installed\ desktop\ helpers\ (zenity,\ kdialog…).}}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1settings}{settings}}}
\DoxyCodeLine{00128\ \ \ \ \ \{}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1settings_a54fb5598e7501ac38d17e3629190b2fe}{available}}();}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classpfd_1_1settings_a0ed32e8ed039106028474eb9f0a0a7bc}{verbose}}(\textcolor{keywordtype}{bool}\ value);}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classpfd_1_1settings_a60023ab0ac98008d2c52a568e9ee540f}{rescan}}();}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classpfd_1_1settings}{settings}}(\textcolor{keywordtype}{bool}\ resync\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1settings_af1c2f6e88ffafd59a2f7609631a9eade}{check\_program}}(std::string\ \textcolor{keyword}{const}\&\ program);}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1settings_a4e22d6fb43d387ddc980bf6e2a6aad24}{is\_osascript}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1settings_a08e4a5b150186d77158a974cc8c2d4a2}{is\_zenity}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1settings_aa79fb10eee785f1acd8d1ff34e226c89}{is\_kdialog}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aad}{flag}}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada11dd6b78f267a47638211f4c7e23d434}{is\_scanned}}\ =\ 0,}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aadad9da28952c27749f53c23675db49d560}{is\_verbose}},}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aadaee57842698a0690e4b89730b469edc31}{has\_zenity}},}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1267dfaf66b51761e04b042bb2c4dd7a}{has\_matedialog}},}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1a652e3d6a785053942b6cffc2c4669d}{has\_qarma}},}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1f1a19f0bf1fe1a63ed3e73e40466b4b}{has\_kdialog}},}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aadaea0bbb642237ecdaa68a14a0d7212448}{is\_vista}},}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada73b7af539db867cb9edf24a3cb7b8a36}{max\_flag}},}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Static\ array\ of\ flags\ for\ internal\ state}}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aad}{flag}}\ in\_flag)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Non-\/const\ getter\ for\ the\ static\ array\ of\ flags}}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\&\ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aad}{flag}}\ in\_flag);}
\DoxyCodeLine{00163\ \ \ \ \ \};}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{comment}{//\ Internal\ classes,\ not\ to\ be\ used\ by\ client\ applications}}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keyword}{namespace\ }internal}
\DoxyCodeLine{00167\ \ \ \ \ \{}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Process\ wait\ timeout,\ in\ milliseconds}}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \textcolor{keyword}{const}\ default\_wait\_timeout\ =\ 20;}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1internal_1_1executor}{executor}}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1internal_1_1dialog}{dialog}};}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ High\ level\ function\ to\ get\ the\ result\ of\ a\ command}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a07116b98b28332c42946e956f7edd2ae}{result}}(\textcolor{keywordtype}{int}*\ exit\_code\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ High\ level\ function\ to\ abort}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_ab7766273bae572779a404c5543268406}{kill}}();}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ start\_func(std::function<std::string(\textcolor{keywordtype}{int}*)>\ \textcolor{keyword}{const}\&\ fun);}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{ddk_8h_ae4cc35dcc70810fa972cc8a5185a28fa}{BOOL}}\ CALLBACK\ enum\_windows\_callback(HWND\ hwnd,\ LPARAM\ lParam);}
\DoxyCodeLine{00186\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ start(\textcolor{keywordtype}{int}\ exit\_code);}
\DoxyCodeLine{00188\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_adcb1fcd88381030ada3d8f6d07dd8d6e}{start\_process}}(std::vector<std::string>\ \textcolor{keyword}{const}\&\ command);}
\DoxyCodeLine{00190\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a2d46b9964c60985ea8406c4092393be3}{\string~executor}}();}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a7eb363f3dc9d6dc21f1a8b6ce6a33679}{ready}}(\textcolor{keywordtype}{int}\ timeout\ =\ default\_wait\_timeout);}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a2e65a18556b3de93dafd6fabe3786277}{stop}}();}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a70760965e1179f84aee59abd92c7129e}{m\_running}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a062c9dc73980cd66d334c945c9617d9d}{m\_stdout}};}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_ae93cd2a96d031923e697d5f85cc5dfe7}{m\_exit\_code}}\ =\ -\/1;}
\DoxyCodeLine{00202\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ std::future<std::string>\ m\_future;}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ std::set<HWND>\ \ \ \ \ \ \ \ \ \ \ m\_windows;}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ std::condition\_variable\ \ m\_cond;}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ std::mutex\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_mutex;}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ DWORD\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_tid;}
\DoxyCodeLine{00208\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_\ ||\ \_\_NX\_\_}}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME:\ do\ something}}
\DoxyCodeLine{00210\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ pid\_t\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a7a164503ced150f7ad6c3e6084d4ff9b}{m\_pid}}\ =\ 0;}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a2730c595c2994a227d46aa6b74b95987}{m\_fd}}\ \ =\ -\/1;}
\DoxyCodeLine{00213\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1internal_1_1platform}{platform}}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00219\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Helper\ class\ around\ LoadLibraryA()\ and\ GetProcAddress()\ with\ some\ safety}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }dll}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dll(std::string\ \textcolor{keyword}{const}\&\ name);}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \string~dll();}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }proc}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ proc(dll\ \textcolor{keyword}{const}\&\ lib,\ std::string\ \textcolor{keyword}{const}\&\ sym)}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_proc(\textcolor{keyword}{reinterpret\_cast<}T*\textcolor{keyword}{>}((\textcolor{keywordtype}{void}*)::GetProcAddress(lib.handle,\ sym.c\_str())))}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ bool()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00237\ \textcolor{keyword}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_proc\ !=\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ T*()\ \textcolor{keyword}{const}}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_proc;}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T*\ m\_proc;}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HMODULE\ handle;}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Helper\ class\ around\ CoInitialize()\ and\ CoUnInitialize()}}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }ole32\_dll\ :\ \textcolor{keyword}{public}\ dll}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ole32\_dll();}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \string~ole32\_dll();}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_initialized();}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HRESULT\ m\_state;}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Helper\ class\ around\ CreateActCtx()\ and\ ActivateActCtx()}}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }new\_style\_context}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ new\_style\_context();}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \string~new\_style\_context();}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HANDLE\ \ \ \ create();}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ULONG\_PTR\ m\_cookie\ =\ 0;}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00276\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1internal_1_1dialog}{dialog}}\ :\ \textcolor{keyword}{protected}\ \mbox{\hyperlink{classpfd_1_1settings}{settings}},\ \textcolor{keyword}{protected}\ \mbox{\hyperlink{classpfd_1_1internal_1_1platform}{platform}}}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_a77f20e6063f83e601ce23ed4899907c6}{ready}}(\textcolor{keywordtype}{int}\ timeout\ =\ default\_wait\_timeout)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_a226b1502acd1d2cb86e34dd3df36772a}{kill}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_a05f9a4fcba8f8a9411d7dfaf18ee11ad}{dialog}}();}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_aadaf6cb30620c85f4b97993e3c819188}{desktop\_helper}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ std::string\ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_ac906c01d0365c13c9066cea857fd258a}{buttons\_to\_name}}(\mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8}{choice}}\ \_choice);}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ std::string\ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_ae94362bed052ab6050e38852712cb97a}{get\_icon\_name}}(\mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85}{icon}}\ \_icon);}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_aae2255eceb0b3b18b55d1618fd7e1635}{powershell\_quote}}(std::string\ \textcolor{keyword}{const}\&\ str)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_adc0ec6f5c8137cbdb0ea6669b5263a73}{osascript\_quote}}(std::string\ \textcolor{keyword}{const}\&\ str)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_a1a4f28c3c2bbd1629f2f882314fff63e}{shell\_quote}}(std::string\ \textcolor{keyword}{const}\&\ str)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Keep\ handle\ to\ executing\ command}}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ std::shared\_ptr<executor>\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_a91f4b2666fb920a7859df9cdc079502d}{m\_async}};}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog}{file\_dialog}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog}{dialog}}}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{enum}\ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_a758847a3fab54bb12a67abbf9ea683fc}{type}}}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_a758847a3fab54bb12a67abbf9ea683fca4fd9423739ee4c950107a4eef324c559}{open}},}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_a758847a3fab54bb12a67abbf9ea683fca3b913d5d81b101f1f2b5cc544ef81f90}{save}},}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_a758847a3fab54bb12a67abbf9ea683fca568b2ec66ef45be030a47ddc19bc7bba}{folder}},}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog}{file\_dialog}}(\mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_a758847a3fab54bb12a67abbf9ea683fc}{type}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ in\_type,}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ title,}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ default\_path\ =\ \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \textcolor{keyword}{const}\&\ filters\ \ \ \ \ \ =\ \{\},}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ options\ \ \ \ \ \ =\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a334c4a4c42fdb79d7ebc3e73b517e6f8}{opt::none}});}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_ac916440e9dcefba5cbd4f0e5bb8acbff}{string\_result}}();}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_ae28b6dd37ab4e47885ce7ca25652212b}{vector\_result}}();}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ CALLBACK\ bffcallback(HWND\ hwnd,\ UINT\ uMsg,\ LPARAM,\ LPARAM\ pData);}
\DoxyCodeLine{00322\ \textcolor{preprocessor}{\#if\ PFD\_HAS\_IFILEDIALOG}}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ select\_folder\_vista(IFileDialog*\ ifd,\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a51106d57377a72da5f9a0415f4f6142b}{force\_path}});}
\DoxyCodeLine{00324\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ std::wstring\ m\_wtitle;}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ std::wstring\ m\_wdefault\_path;}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ m\_vector\_result;}
\DoxyCodeLine{00330\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \ \ \ \ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{comment}{//\ The\ path\ class\ provides\ some\ platform-\/specific\ path\ constants}}
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1path}{path}}\ :\ \textcolor{keyword}{protected}\ \mbox{\hyperlink{classpfd_1_1internal_1_1platform}{internal::platform}}}
\DoxyCodeLine{00340\ \ \ \ \ \{}
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ std::string\ \mbox{\hyperlink{classpfd_1_1path_a1205ad5165c748f91ffe939687e095a2}{home}}();}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ std::string\ \mbox{\hyperlink{classpfd_1_1path_a73bb289af48853c52fb1569c2d00a40c}{separator}}();}
\DoxyCodeLine{00344\ \ \ \ \ \};}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{comment}{//\ The\ notify\ widget}}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1notify}{notify}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog}{internal::dialog}}}
\DoxyCodeLine{00351\ \ \ \ \ \{}
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1notify}{notify}}(std::string\ \textcolor{keyword}{const}\&\ title,}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{classpfd_1_1message}{message}},}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85}{icon}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_icon\ =\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acaf9b6b99962bf5c2264824231d7a40c}{icon::info}});}
\DoxyCodeLine{00356\ \ \ \ \ \};}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{comment}{//\ The\ message\ widget}}
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1message}{message}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog}{internal::dialog}}}
\DoxyCodeLine{00363\ \ \ \ \ \{}
\DoxyCodeLine{00364\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1message}{message}}(std::string\ \textcolor{keyword}{const}\&\ title,}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ text,}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8}{choice}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_choice\ =\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a809da5df9c86c6426c8d8db2934d3f51}{choice::ok\_cancel}},}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85}{icon}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_icon\ \ \ =\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acaf9b6b99962bf5c2264824231d7a40c}{icon::info}});}
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679}{button}}\ \mbox{\hyperlink{classpfd_1_1message_aeee673bf19f45328a7eb8ec2c1e01fc9}{result}}();}
\DoxyCodeLine{00371\ }
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Some\ extra\ logic\ to\ map\ the\ exit\ code\ to\ button\ number}}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ std::map<int,\ button>\ \mbox{\hyperlink{classpfd_1_1message_abd55bdeb662938db1c8e6747d3acb7b4}{m\_mappings}};}
\DoxyCodeLine{00375\ \ \ \ \ \};}
\DoxyCodeLine{00376\ }
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00378\ \ \ \ \ \textcolor{comment}{//\ The\ open\_file,\ save\_file,\ and\ open\_folder\ widgets}}
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00381\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1open__file}{open\_file}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog}{internal::file\_dialog}}}
\DoxyCodeLine{00382\ \ \ \ \ \{}
\DoxyCodeLine{00383\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1open__file}{open\_file}}(std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ title,}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ default\_path\ =\ \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \textcolor{keyword}{const}\&\ filters\ \ \ \ \ \ =\ \{\textcolor{stringliteral}{"{}All\ Files"{}},\ \textcolor{stringliteral}{"{}*"{}}\},}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ options\ \ \ \ \ \ =\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a334c4a4c42fdb79d7ebc3e73b517e6f8}{opt::none}});}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ \textcolor{preprocessor}{\#if\ defined(\_\_has\_cpp\_attribute)}}
\DoxyCodeLine{00390\ \textcolor{preprocessor}{\#if\ \_\_has\_cpp\_attribute(deprecated)}}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Backwards\ compatibility}}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ [[deprecated(\textcolor{stringliteral}{"{}Use\ pfd::opt::multiselect\ instead\ of\ allow\_multiselect"{}})]]}
\DoxyCodeLine{00393\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00394\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1open__file}{open\_file}}(std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ title,}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ default\_path,}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \textcolor{keyword}{const}\&\ filters,}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ allow\_multiselect);}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ std::vector<std::string>\ \mbox{\hyperlink{classpfd_1_1open__file_ad0f01c7de1fbb94343053c671ced8b0b}{result}}();}
\DoxyCodeLine{00401\ \ \ \ \ \};}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00403\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1save__file}{save\_file}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog}{internal::file\_dialog}}}
\DoxyCodeLine{00404\ \ \ \ \ \{}
\DoxyCodeLine{00405\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1save__file}{save\_file}}(std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ title,}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ default\_path\ =\ \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \textcolor{keyword}{const}\&\ filters\ \ \ \ \ \ =\ \{\textcolor{stringliteral}{"{}All\ Files"{}},\ \textcolor{stringliteral}{"{}*"{}}\},}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ options\ \ \ \ \ \ =\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a334c4a4c42fdb79d7ebc3e73b517e6f8}{opt::none}});}
\DoxyCodeLine{00410\ }
\DoxyCodeLine{00411\ \textcolor{preprocessor}{\#if\ defined(\_\_has\_cpp\_attribute)}}
\DoxyCodeLine{00412\ \textcolor{preprocessor}{\#if\ \_\_has\_cpp\_attribute(deprecated)}}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Backwards\ compatibility}}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ [[deprecated(\textcolor{stringliteral}{"{}Use\ pfd::opt::force\_overwrite\ instead\ of\ confirm\_overwrite"{}})]]}
\DoxyCodeLine{00415\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00416\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1save__file}{save\_file}}(std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ title,}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ default\_path,}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \textcolor{keyword}{const}\&\ filters,}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ confirm\_overwrite);}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{classpfd_1_1save__file_aefa58bfca841a51edb6a7ef2fa640904}{result}}();}
\DoxyCodeLine{00423\ \ \ \ \ \};}
\DoxyCodeLine{00424\ }
\DoxyCodeLine{00425\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classpfd_1_1select__folder}{select\_folder}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog}{internal::file\_dialog}}}
\DoxyCodeLine{00426\ \ \ \ \ \{}
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1select__folder}{select\_folder}}(std::string\ \textcolor{keyword}{const}\&\ title,}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ default\_path\ =\ \textcolor{stringliteral}{"{}"{}},}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ options\ \ \ \ \ \ =\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a334c4a4c42fdb79d7ebc3e73b517e6f8}{opt::none}});}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{classpfd_1_1select__folder_aa0f0d69af6be6b2627bf02440a921765}{result}}();}
\DoxyCodeLine{00433\ \ \ \ \ \};}
\DoxyCodeLine{00434\ }
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00436\ \ \ \ \ \textcolor{comment}{//\ Below\ this\ are\ all\ the\ method\ implementations.\ You\ may\ choose\ to\ define\ the}}
\DoxyCodeLine{00437\ \ \ \ \ \textcolor{comment}{//\ macro\ PFD\_SKIP\_IMPLEMENTATION\ everywhere\ before\ including\ this\ header\ except}}
\DoxyCodeLine{00438\ \ \ \ \ \textcolor{comment}{//\ in\ one\ place.\ This\ may\ reduce\ compilation\ times.}}
\DoxyCodeLine{00439\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00441\ \textcolor{preprocessor}{\#if\ !defined\ PFD\_SKIP\_IMPLEMENTATION}}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00443\ \ \ \ \ \textcolor{comment}{//\ internal\ free\ functions\ implementations}}
\DoxyCodeLine{00444\ }
\DoxyCodeLine{00445\ \ \ \ \ \textcolor{keyword}{namespace\ }internal}
\DoxyCodeLine{00446\ \ \ \ \ \{}
\DoxyCodeLine{00447\ }
\DoxyCodeLine{00448\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ std::wstring\ str2wstr(std::string\ \textcolor{keyword}{const}\&\ str)}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ len\ =\ MultiByteToWideChar(CP\_UTF8,\ 0,\ str.c\_str(),\ (\textcolor{keywordtype}{int})str.size(),\ \textcolor{keyword}{nullptr},\ 0);}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ std::wstring\ ret(len,\ \textcolor{charliteral}{'\(\backslash\)0'});}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ MultiByteToWideChar(CP\_UTF8,\ 0,\ str.c\_str(),\ (\textcolor{keywordtype}{int})str.size(),\ (LPWSTR)ret.data(),\ (\textcolor{keywordtype}{int})ret.size());}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ std::string\ wstr2str(std::wstring\ \textcolor{keyword}{const}\&\ str)}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ len\ =\ WideCharToMultiByte(CP\_UTF8,\ 0,\ str.c\_str(),\ (\textcolor{keywordtype}{int})str.size(),\ \textcolor{keyword}{nullptr},\ 0,\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ ret(len,\ \textcolor{charliteral}{'\(\backslash\)0'});}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ WideCharToMultiByte(CP\_UTF8,\ 0,\ str.c\_str(),\ (\textcolor{keywordtype}{int})str.size(),\ (LPSTR)ret.data(),\ (\textcolor{keywordtype}{int})ret.size(),\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ is\_vista()}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \ \ \ \ OSVERSIONINFOEXW\ osvi;}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_utils_8cc_a53393f40237f7cca6734f3125e091645}{memset}}(\&osvi,\ 0,\ \textcolor{keyword}{sizeof}(osvi));}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ DWORDLONG\ \textcolor{keyword}{const}\ mask\ =\ VerSetConditionMask(}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ VerSetConditionMask(}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ VerSetConditionMask(}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ VER\_MAJORVERSION,\ VER\_GREATER\_EQUAL),}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ VER\_MINORVERSION,\ VER\_GREATER\_EQUAL),}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ VER\_SERVICEPACKMAJOR,\ VER\_GREATER\_EQUAL);}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \ \ \ \ osvi.dwOSVersionInfoSize\ =\ \textcolor{keyword}{sizeof}(osvi);}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ osvi.dwMajorVersion\ \ \ \ \ \ =\ HIBYTE(\_WIN32\_WINNT\_VISTA);}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ osvi.dwMinorVersion\ \ \ \ \ \ =\ LOBYTE(\_WIN32\_WINNT\_VISTA);}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ osvi.wServicePackMajor\ \ \ =\ 0;}
\DoxyCodeLine{00479\ }
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ VerifyVersionInfoW(\&osvi,\ VER\_MAJORVERSION\ |\ VER\_MINORVERSION\ |\ VER\_SERVICEPACKMAJOR,\ mask)\ !=\ \mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00482\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00483\ }
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ necessary\ until\ C++20\ which\ will\ have\ std::string::ends\_with()\ etc.}}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ ends\_with(std::string\ \textcolor{keyword}{const}\&\ str,\ std::string\ \textcolor{keyword}{const}\&\ suffix)}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ suffix.size()\ <=\ str.size()\ \&\&}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ str.compare(str.size()\ -\/\ suffix.size(),\ suffix.size(),\ suffix)\ ==\ 0;}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00491\ }
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ starts\_with(std::string\ \textcolor{keyword}{const}\&\ str,\ std::string\ \textcolor{keyword}{const}\&\ prefix)}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ prefix.size()\ <=\ str.size()\ \&\&}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ str.compare(0,\ prefix.size(),\ prefix)\ ==\ 0;}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00497\ }
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ necessary\ until\ C++17\ which\ will\ have\ std::filesystem::is\_directory}}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ is\_directory(std::string\ \textcolor{keyword}{const}\&\ path)}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00502\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ attr\ =\ GetFileAttributesA(path.c\_str());}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ attr\ !=\ INVALID\_FILE\_ATTRIBUTES\ \&\&\ (attr\ \&\ FILE\_ATTRIBUTE\_DIRECTORY);}
\DoxyCodeLine{00505\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_}}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO}}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00508\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }stat\ s;}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ stat(path.c\_str(),\ \&s)\ ==\ 0\ \&\&\ S\_ISDIR(s.st\_mode);}
\DoxyCodeLine{00511\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00513\ }
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ necessary\ because\ getenv\ is\ not\ thread-\/safe}}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ std::string\ getenv(std::string\ \textcolor{keyword}{const}\&\ str)}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00518\ \textcolor{preprocessor}{\#if\ \_MSC\_VER}}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}*\ \ buf\ \ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ size\ =\ 0;}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_dupenv\_s(\&buf,\ \&size,\ str.c\_str())\ ==\ 0\ \&\&\ buf)}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ ret(buf);}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ free(buf);}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00528\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ buf\ =\ std::getenv(str.c\_str());}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ buf\ ?\ buf\ :\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00531\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00533\ }
\DoxyCodeLine{00534\ \ \ \ \ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00535\ }
\DoxyCodeLine{00536\ \ \ \ \ \textcolor{comment}{//\ settings\ implementation}}
\DoxyCodeLine{00537\ }
\DoxyCodeLine{00538\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classpfd_1_1settings_a7190e52d512b1321acb78731a8cddf42}{settings::settings}}(\textcolor{keywordtype}{bool}\ resync)}
\DoxyCodeLine{00539\ \ \ \ \ \{}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada11dd6b78f267a47638211f4c7e23d434}{flag::is\_scanned}})\ \&=\ !resync;}
\DoxyCodeLine{00541\ }
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada11dd6b78f267a47638211f4c7e23d434}{flag::is\_scanned}}))}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00544\ }
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ pfd\_verbose\ =\ internal::getenv(\textcolor{stringliteral}{"{}PFD\_VERBOSE"{}});}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ match\_no\ \ \ \ =\ std::regex(\textcolor{stringliteral}{"{}(|0|no|false)"{}},\ std::regex\_constants::icase);}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!std::regex\_match(pfd\_verbose,\ match\_no))}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aadad9da28952c27749f53c23675db49d560}{flag::is\_verbose}})\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00549\ }
\DoxyCodeLine{00550\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aadaea0bbb642237ecdaa68a14a0d7212448}{flag::is\_vista}})\ =\ internal::is\_vista();}
\DoxyCodeLine{00552\ \textcolor{preprocessor}{\#elif\ !\_\_APPLE\_\_}}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aadaee57842698a0690e4b89730b469edc31}{flag::has\_zenity}})\ =\ \mbox{\hyperlink{classpfd_1_1settings_af1c2f6e88ffafd59a2f7609631a9eade}{check\_program}}(\textcolor{stringliteral}{"{}zenity"{}});}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1267dfaf66b51761e04b042bb2c4dd7a}{flag::has\_matedialog}})\ =\ \mbox{\hyperlink{classpfd_1_1settings_af1c2f6e88ffafd59a2f7609631a9eade}{check\_program}}(\textcolor{stringliteral}{"{}matedialog"{}});}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1a652e3d6a785053942b6cffc2c4669d}{flag::has\_qarma}})\ =\ \mbox{\hyperlink{classpfd_1_1settings_af1c2f6e88ffafd59a2f7609631a9eade}{check\_program}}(\textcolor{stringliteral}{"{}qarma"{}});}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1f1a19f0bf1fe1a63ed3e73e40466b4b}{flag::has\_kdialog}})\ =\ \mbox{\hyperlink{classpfd_1_1settings_af1c2f6e88ffafd59a2f7609631a9eade}{check\_program}}(\textcolor{stringliteral}{"{}kdialog"{}});}
\DoxyCodeLine{00557\ }
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ multiple\ helpers\ are\ available,\ try\ to\ default\ to\ the\ best\ one}}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aadaee57842698a0690e4b89730b469edc31}{flag::has\_zenity}})\ \&\&\ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1f1a19f0bf1fe1a63ed3e73e40466b4b}{flag::has\_kdialog}}))}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ desktop\_name\ =\ internal::getenv(\textcolor{stringliteral}{"{}XDG\_SESSION\_DESKTOP"{}});}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (desktop\_name\ ==\ std::string(\textcolor{stringliteral}{"{}gnome"{}}))}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1f1a19f0bf1fe1a63ed3e73e40466b4b}{flag::has\_kdialog}})\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (desktop\_name\ ==\ std::string(\textcolor{stringliteral}{"{}KDE"{}}))}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aadaee57842698a0690e4b89730b469edc31}{flag::has\_zenity}})\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00567\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada11dd6b78f267a47638211f4c7e23d434}{flag::is\_scanned}})\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00570\ \ \ \ \ \}}
\DoxyCodeLine{00571\ }
\DoxyCodeLine{00572\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1settings_a54fb5598e7501ac38d17e3629190b2fe}{settings::available}}()}
\DoxyCodeLine{00573\ \ \ \ \ \{}
\DoxyCodeLine{00574\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00576\ \textcolor{preprocessor}{\#elif\ \_\_APPLE\_\_}}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00578\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_}}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME:\ Return\ true\ after\ implementation\ is\ complete.}}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00581\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings}{settings}}\ tmp;}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ tmp.\mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aadaee57842698a0690e4b89730b469edc31}{flag::has\_zenity}})\ ||}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tmp.\mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1267dfaf66b51761e04b042bb2c4dd7a}{flag::has\_matedialog}})\ ||}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tmp.\mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1a652e3d6a785053942b6cffc2c4669d}{flag::has\_qarma}})\ ||}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tmp.\mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1f1a19f0bf1fe1a63ed3e73e40466b4b}{flag::has\_kdialog}});}
\DoxyCodeLine{00587\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00588\ \ \ \ \ \}}
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00590\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classpfd_1_1settings_a0ed32e8ed039106028474eb9f0a0a7bc}{settings::verbose}}(\textcolor{keywordtype}{bool}\ value)}
\DoxyCodeLine{00591\ \ \ \ \ \{}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings}{settings}}().\mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aadad9da28952c27749f53c23675db49d560}{flag::is\_verbose}})\ =\ value;}
\DoxyCodeLine{00593\ \ \ \ \ \}}
\DoxyCodeLine{00594\ }
\DoxyCodeLine{00595\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classpfd_1_1settings_a60023ab0ac98008d2c52a568e9ee540f}{settings::rescan}}()}
\DoxyCodeLine{00596\ \ \ \ \ \{}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings}{settings}}(\textcolor{comment}{/*\ resync\ =\ */}\ \textcolor{keyword}{true});}
\DoxyCodeLine{00598\ \ \ \ \ \}}
\DoxyCodeLine{00599\ }
\DoxyCodeLine{00600\ \ \ \ \ \textcolor{comment}{//\ Check\ whether\ a\ program\ is\ present\ using\ “which”.}}
\DoxyCodeLine{00601\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1settings_af1c2f6e88ffafd59a2f7609631a9eade}{settings::check\_program}}(std::string\ \textcolor{keyword}{const}\&\ program)}
\DoxyCodeLine{00602\ \ \ \ \ \{}
\DoxyCodeLine{00603\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ (void)program;}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00606\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_}}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ (void)program;}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00609\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ exit\_code\ =\ -\/1;}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1executor}{internal::executor}}\ async;}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ async.\mbox{\hyperlink{classpfd_1_1internal_1_1executor_adcb1fcd88381030ada3d8f6d07dd8d6e}{start\_process}}(\{\textcolor{stringliteral}{"{}/bin/sh"{}},\ \textcolor{stringliteral}{"{}-\/c"{}},\ \textcolor{stringliteral}{"{}which\ "{}}\ +\ program\});}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ async.\mbox{\hyperlink{classpfd_1_1internal_1_1executor_a07116b98b28332c42946e956f7edd2ae}{result}}(\&exit\_code);}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ exit\_code\ ==\ 0;}
\DoxyCodeLine{00615\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00616\ \ \ \ \ \}}
\DoxyCodeLine{00617\ }
\DoxyCodeLine{00618\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1settings_a4e22d6fb43d387ddc980bf6e2a6aad24}{settings::is\_osascript}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00619\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00620\ \textcolor{preprocessor}{\#if\ \_\_APPLE\_\_}}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00622\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00624\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00625\ \ \ \ \ \}}
\DoxyCodeLine{00626\ }
\DoxyCodeLine{00627\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1settings_a08e4a5b150186d77158a974cc8c2d4a2}{settings::is\_zenity}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00628\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aadaee57842698a0690e4b89730b469edc31}{flag::has\_zenity}})\ ||}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1267dfaf66b51761e04b042bb2c4dd7a}{flag::has\_matedialog}})\ ||}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1a652e3d6a785053942b6cffc2c4669d}{flag::has\_qarma}});}
\DoxyCodeLine{00632\ \ \ \ \ \}}
\DoxyCodeLine{00633\ }
\DoxyCodeLine{00634\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1settings_aa79fb10eee785f1acd8d1ff34e226c89}{settings::is\_kdialog}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00635\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada1f1a19f0bf1fe1a63ed3e73e40466b4b}{flag::has\_kdialog}});}
\DoxyCodeLine{00637\ \ \ \ \ \}}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{settings::flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aad}{flag}}\ in\_flag)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00640\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}[\mbox{\hyperlink{_new_8h_aa9d55e2f20e580b7445617d0d12fff6e}{size\_t}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aada73b7af539db867cb9edf24a3cb7b8a36}{flag::max\_flag}})];}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}[\mbox{\hyperlink{_new_8h_aa9d55e2f20e580b7445617d0d12fff6e}{size\_t}}(in\_flag)];}
\DoxyCodeLine{00643\ \ \ \ \ \}}
\DoxyCodeLine{00644\ }
\DoxyCodeLine{00645\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\&\ \mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{settings::flags}}(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aad}{flag}}\ in\_flag)}
\DoxyCodeLine{00646\ \ \ \ \ \{}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{bool}\&\textcolor{keyword}{>}(\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classpfd_1_1settings}{settings}}\ const*\textcolor{keyword}{>}(\textcolor{keyword}{this})-\/>\mbox{\hyperlink{classpfd_1_1settings_a1445f3cf0311b15182d401f244b012d8}{flags}}(in\_flag));}
\DoxyCodeLine{00648\ \ \ \ \ \}}
\DoxyCodeLine{00649\ }
\DoxyCodeLine{00650\ \ \ \ \ \textcolor{comment}{//\ path\ implementation}}
\DoxyCodeLine{00651\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{classpfd_1_1path_a1205ad5165c748f91ffe939687e095a2}{path::home}}()}
\DoxyCodeLine{00652\ \ \ \ \ \{}
\DoxyCodeLine{00653\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ First\ try\ the\ USERPROFILE\ environment\ variable}}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ user\_profile\ =\ internal::getenv(\textcolor{stringliteral}{"{}USERPROFILE"{}});}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (user\_profile.size()\ >\ 0)}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ user\_profile;}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Otherwise,\ try\ GetUserProfileDirectory()}}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ HANDLE\ token\ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ DWORD\ \ len\ \ \ \ \ \ \ \ \ \ \ =\ MAX\_PATH;}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \ \ buf[MAX\_PATH]\ =\ \{\textcolor{charliteral}{'\(\backslash\)0'}\};}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (OpenProcessToken(GetCurrentProcess(),\ TOKEN\_QUERY,\ \&token))}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \ \ \ \ dll\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ userenv(\textcolor{stringliteral}{"{}userenv.dll"{}});}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ dll::proc<\mbox{\hyperlink{ddk_8h_ae4cc35dcc70810fa972cc8a5185a28fa}{BOOL}}\ WINAPI(HANDLE,\ LPSTR,\ LPDWORD)>\ get\_user\_profile\_directory(userenv,\ \textcolor{stringliteral}{"{}GetUserProfileDirectoryA"{}});}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \ \ \ \ get\_user\_profile\_directory(token,\ buf,\ \&len);}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \ \ \ \ CloseHandle(token);}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (*buf)}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ buf;}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00671\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_}}
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}/"{}};}
\DoxyCodeLine{00673\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ First\ try\ the\ HOME\ environment\ variable}}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classpfd_1_1path_a1205ad5165c748f91ffe939687e095a2}{home}}\ =\ internal::getenv(\textcolor{stringliteral}{"{}HOME"{}});}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classpfd_1_1path_a1205ad5165c748f91ffe939687e095a2}{home}}.size()\ >\ 0)}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classpfd_1_1path_a1205ad5165c748f91ffe939687e095a2}{home}};}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Otherwise,\ try\ getpwuid\_r()}}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ len\ =\ 4096;}
\DoxyCodeLine{00680\ \textcolor{preprocessor}{\#if\ defined(\_SC\_GETPW\_R\_SIZE\_MAX)}}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ size\_max\ =\ sysconf(\_SC\_GETPW\_R\_SIZE\_MAX);}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (size\_max\ !=\ -\/1)}
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \ \ \ \ len\ =\ \mbox{\hyperlink{_new_8h_aa9d55e2f20e580b7445617d0d12fff6e}{size\_t}}(size\_max);}
\DoxyCodeLine{00684\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ std::vector<char>\ buf(len);}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }passwd\ pwd,\ *result;}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (getpwuid\_r(getuid(),\ \&pwd,\ buf.data(),\ buf.size(),\ \&result)\ ==\ 0)}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result-\/>pw\_dir;}
\DoxyCodeLine{00689\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}/"{}};}
\DoxyCodeLine{00691\ \ \ \ \ \}}
\DoxyCodeLine{00692\ }
\DoxyCodeLine{00693\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{classpfd_1_1path_a73bb289af48853c52fb1569c2d00a40c}{path::separator}}()}
\DoxyCodeLine{00694\ \ \ \ \ \{}
\DoxyCodeLine{00695\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)"{}};}
\DoxyCodeLine{00697\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}/"{}};}
\DoxyCodeLine{00699\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00700\ \ \ \ \ \}}
\DoxyCodeLine{00701\ }
\DoxyCodeLine{00702\ \ \ \ \ \textcolor{comment}{//\ executor\ implementation}}
\DoxyCodeLine{00703\ }
\DoxyCodeLine{00704\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a07116b98b28332c42946e956f7edd2ae}{internal::executor::result}}(\textcolor{keywordtype}{int}*\ exit\_code\ \textcolor{comment}{/*\ =\ nullptr\ */})}
\DoxyCodeLine{00705\ \ \ \ \ \{}
\DoxyCodeLine{00706\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a2e65a18556b3de93dafd6fabe3786277}{stop}}();}
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (exit\_code)}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \ \ \ \ *exit\_code\ =\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_ae93cd2a96d031923e697d5f85cc5dfe7}{m\_exit\_code}};}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a062c9dc73980cd66d334c945c9617d9d}{m\_stdout}};}
\DoxyCodeLine{00710\ \ \ \ \ \}}
\DoxyCodeLine{00711\ }
\DoxyCodeLine{00712\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_ab7766273bae572779a404c5543268406}{internal::executor::kill}}()}
\DoxyCodeLine{00713\ \ \ \ \ \{}
\DoxyCodeLine{00714\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_future.valid())}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Close\ all\ windows\ that\ weren’t\ open\ when\ we\ started\ the\ future}}
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ previous\_windows\ =\ m\_windows;}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ \ \ EnumWindows(\&enum\_windows\_callback,\ (LPARAM)\textcolor{keyword}{this});}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ hwnd\ :\ m\_windows)}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (previous\_windows.find(hwnd)\ ==\ previous\_windows.end())}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00723\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SendMessage(hwnd,\ WM\_CLOSE,\ 0,\ 0);}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Also\ send\ IDNO\ in\ case\ of\ a\ Yes/No\ or\ Abort/Retry/Ignore\ messagebox}}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SendMessage(hwnd,\ WM\_COMMAND,\ IDNO,\ 0);}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00728\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_\ ||\ \_\_NX\_\_}}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME:\ do\ something}}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ cannot\ kill}}
\DoxyCodeLine{00731\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ ::kill(m\_pid,\ \mbox{\hyperlink{_signals_8h_addd8dcd406ce514ab3b4f576a5343d42}{SIGKILL}});}
\DoxyCodeLine{00733\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ stop();}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00736\ \ \ \ \ \}}
\DoxyCodeLine{00737\ }
\DoxyCodeLine{00738\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00739\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{ddk_8h_ae4cc35dcc70810fa972cc8a5185a28fa}{BOOL}}\ CALLBACK\ internal::executor::enum\_windows\_callback(HWND\ hwnd,\ LPARAM\ lParam)}
\DoxyCodeLine{00740\ \ \ \ \ \{}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ that\ =\ (\mbox{\hyperlink{classpfd_1_1internal_1_1executor}{executor}}*)lParam;}
\DoxyCodeLine{00742\ }
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ DWORD\ pid;}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \ tid\ =\ GetWindowThreadProcessId(hwnd,\ \&pid);}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tid\ ==\ that-\/>m\_tid)}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ that-\/>m\_windows.insert(hwnd);}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{00748\ \ \ \ \ \}}
\DoxyCodeLine{00749\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00750\ }
\DoxyCodeLine{00751\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00752\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ internal::executor::start\_func(std::function<std::string(\textcolor{keywordtype}{int}*)>\ \textcolor{keyword}{const}\&\ fun)}
\DoxyCodeLine{00753\ \ \ \ \ \{}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ stop();}
\DoxyCodeLine{00755\ }
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ trampoline\ =\ [fun,\ \textcolor{keyword}{this}]()\ \{}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Save\ our\ thread\ id\ so\ that\ the\ caller\ can\ cancel\ us}}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \ \ \ \ m\_tid\ =\ GetCurrentThreadId();}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ \ EnumWindows(\&enum\_windows\_callback,\ (LPARAM)\textcolor{keyword}{this});}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \ \ \ \ m\_cond.notify\_all();}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ fun(\&m\_exit\_code);}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00763\ }
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ std::unique\_lock<std::mutex>\ lock(m\_mutex);}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ m\_future\ =\ std::async(std::launch::async,\ trampoline);}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ m\_cond.wait(lock);}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ m\_running\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00768\ \ \ \ \ \}}
\DoxyCodeLine{00769\ }
\DoxyCodeLine{00770\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_}}
\DoxyCodeLine{00771\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ internal::executor::start(\textcolor{keywordtype}{int}\ exit\_code)}
\DoxyCodeLine{00772\ \ \ \ \ \{}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ m\_exit\_code\ =\ exit\_code;}
\DoxyCodeLine{00774\ \ \ \ \ \}}
\DoxyCodeLine{00775\ }
\DoxyCodeLine{00776\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00777\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_adcb1fcd88381030ada3d8f6d07dd8d6e}{internal::executor::start\_process}}(std::vector<std::string>\ \textcolor{keyword}{const}\&\ command)}
\DoxyCodeLine{00778\ \ \ \ \ \{}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ stop();}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \ \ m\_stdout.clear();}
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \ m\_exit\_code\ =\ -\/1;}
\DoxyCodeLine{00782\ }
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in[2],\ out[2];}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pipe(in)\ !=\ 0\ ||\ pipe(out)\ !=\ 0)}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00786\ }
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ m\_pid\ =\ fork();}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pid\ <\ 0)}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00790\ }
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dev_8h_a9b54c1e48e7a4f50016970a5187eadd8}{close}}(in[m\_pid\ ?\ 0\ :\ 1]);}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dev_8h_a9b54c1e48e7a4f50016970a5187eadd8}{close}}(out[m\_pid\ ?\ 1\ :\ 0]);}
\DoxyCodeLine{00793\ }
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_pid\ ==\ 0)}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \ \ \ \ dup2(in[0],\ STDIN\_FILENO);}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \ \ \ \ \ \ dup2(out[1],\ STDOUT\_FILENO);}
\DoxyCodeLine{00798\ }
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ignore\ stderr\ so\ that\ it\ doesn’t\ pollute\ the\ console\ (e.g.\ GTK+\ errors\ from\ zenity)}}
\DoxyCodeLine{00800\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ fd\ =\ \mbox{\hyperlink{dev_8h_a4a97bf579d8dd726327a23ed36d594bf}{open}}(\textcolor{stringliteral}{"{}/dev/null"{}},\ O\_WRONLY);}
\DoxyCodeLine{00801\ \ \ \ \ \ \ \ \ \ \ \ \ dup2(fd,\ STDERR\_FILENO);}
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dev_8h_a9b54c1e48e7a4f50016970a5187eadd8}{close}}(fd);}
\DoxyCodeLine{00803\ }
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<char*>\ args;}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \ \ \ \ std::transform(command.cbegin(),\ command.cend(),\ std::back\_inserter(args),}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [](std::string\ \textcolor{keyword}{const}\&\ s)\ \{\ return\ const\_cast<char*>(s.c\_str());\ \});}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \ \ \ \ args.push\_back(\textcolor{keyword}{nullptr});\ \textcolor{comment}{//\ null-\/terminate\ argv[]}}
\DoxyCodeLine{00808\ }
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ \ \ \ \ execvp(args[0],\ args.data());}
\DoxyCodeLine{00810\ \ \ \ \ \ \ \ \ \ \ \ \ exit(1);}
\DoxyCodeLine{00811\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00812\ }
\DoxyCodeLine{00813\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dev_8h_a9b54c1e48e7a4f50016970a5187eadd8}{close}}(in[1]);}
\DoxyCodeLine{00814\ \ \ \ \ \ \ \ \ m\_fd\ =\ out[0];}
\DoxyCodeLine{00815\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ flags\ =\ fcntl(m\_fd,\ F\_GETFL);}
\DoxyCodeLine{00816\ \ \ \ \ \ \ \ \ fcntl(m\_fd,\ F\_SETFL,\ flags\ |\ O\_NONBLOCK);}
\DoxyCodeLine{00817\ }
\DoxyCodeLine{00818\ \ \ \ \ \ \ \ \ m\_running\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00819\ \ \ \ \ \}}
\DoxyCodeLine{00820\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00821\ }
\DoxyCodeLine{00822\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a2d46b9964c60985ea8406c4092393be3}{internal::executor::\string~executor}}()}
\DoxyCodeLine{00823\ \ \ \ \ \{}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ stop();}
\DoxyCodeLine{00825\ \ \ \ \ \}}
\DoxyCodeLine{00826\ }
\DoxyCodeLine{00827\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a7eb363f3dc9d6dc21f1a8b6ce6a33679}{internal::executor::ready}}(\textcolor{keywordtype}{int}\ timeout\ \textcolor{comment}{/*\ =\ default\_wait\_timeout\ */})}
\DoxyCodeLine{00828\ \ \ \ \ \{}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_running)}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00831\ }
\DoxyCodeLine{00832\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_future.valid())}
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ status\ =\ m\_future.wait\_for(std::chrono::milliseconds(timeout));}
\DoxyCodeLine{00836\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (status\ !=\ std::future\_status::ready)}
\DoxyCodeLine{00837\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00838\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ On\ Windows,\ we\ need\ to\ run\ the\ message\ pump.\ If\ the\ async}}
\DoxyCodeLine{00839\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ thread\ uses\ a\ Windows\ API\ dialog,\ it\ may\ be\ attached\ to\ the}}
\DoxyCodeLine{00840\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ main\ thread\ and\ waiting\ for\ messages\ that\ only\ we\ can\ dispatch.}}
\DoxyCodeLine{00841\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MSG\ msg;}
\DoxyCodeLine{00842\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (PeekMessage(\&msg,\ \textcolor{keyword}{nullptr},\ 0,\ 0,\ PM\_REMOVE))}
\DoxyCodeLine{00843\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00844\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TranslateMessage(\&msg);}
\DoxyCodeLine{00845\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DispatchMessage(\&msg);}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00848\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00849\ }
\DoxyCodeLine{00850\ \ \ \ \ \ \ \ \ \ \ \ \ m\_stdout\ =\ m\_future.get();}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00852\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_\ ||\ \_\_NX\_\_}}
\DoxyCodeLine{00853\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME:\ do\ something}}
\DoxyCodeLine{00854\ \ \ \ \ \ \ \ \ (void)timeout;}
\DoxyCodeLine{00855\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00856\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ buf[BUFSIZ];}
\DoxyCodeLine{00857\ \ \ \ \ \ \ \ \ ssize\_t\ received\ =\ read(m\_fd,\ buf,\ BUFSIZ);\ \textcolor{comment}{//\ Flawfinder:\ ignore}}
\DoxyCodeLine{00858\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (received\ >\ 0)}
\DoxyCodeLine{00859\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \ \ \ \ m\_stdout\ +=\ std::string(buf,\ received);}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00863\ }
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reap\ child\ process\ if\ it\ is\ dead.\ It\ is\ possible\ that\ the\ system\ has\ already\ reaped\ it}}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (this\ happens\ when\ the\ calling\ application\ handles\ or\ ignores\ SIG\_CHLD)\ and\ results\ in}}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ waitpid()\ failing\ with\ ECHILD.\ Otherwise\ we\ assume\ the\ child\ is\ running\ and\ we\ sleep\ for}}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\ little\ while.}}
\DoxyCodeLine{00868\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ status;}
\DoxyCodeLine{00869\ \ \ \ \ \ \ \ \ pid\_t\ child\ =\ waitpid(m\_pid,\ \&status,\ WNOHANG);}
\DoxyCodeLine{00870\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (child\ !=\ m\_pid\ \&\&\ (child\ >=\ 0\ ||\ errno\ !=\ ECHILD))}
\DoxyCodeLine{00871\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00872\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME:\ this\ happens\ almost\ always\ at\ first\ iteration}}
\DoxyCodeLine{00873\ \ \ \ \ \ \ \ \ \ \ \ \ std::this\_thread::sleep\_for(std::chrono::milliseconds(timeout));}
\DoxyCodeLine{00874\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00875\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00876\ }
\DoxyCodeLine{00877\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{dev_8h_a9b54c1e48e7a4f50016970a5187eadd8}{close}}(m\_fd);}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ m\_exit\_code\ =\ WEXITSTATUS(status);}
\DoxyCodeLine{00879\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00880\ }
\DoxyCodeLine{00881\ \ \ \ \ \ \ \ \ m\_running\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00882\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00883\ \ \ \ \ \}}
\DoxyCodeLine{00884\ }
\DoxyCodeLine{00885\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classpfd_1_1internal_1_1executor_a2e65a18556b3de93dafd6fabe3786277}{internal::executor::stop}}()}
\DoxyCodeLine{00886\ \ \ \ \ \{}
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Loop\ until\ the\ user\ closes\ the\ dialog}}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!ready())}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \ \ \ \ ;}
\DoxyCodeLine{00890\ \ \ \ \ \}}
\DoxyCodeLine{00891\ }
\DoxyCodeLine{00892\ \ \ \ \ \textcolor{comment}{//\ dll\ implementation}}
\DoxyCodeLine{00893\ }
\DoxyCodeLine{00894\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00895\ \ \ \ \ \textcolor{keyword}{inline}\ internal::platform::dll::dll(std::string\ \textcolor{keyword}{const}\&\ name)}
\DoxyCodeLine{00896\ \ \ \ \ \ \ \ \ :\ handle(::LoadLibraryA(name.c\_str()))}
\DoxyCodeLine{00897\ \ \ \ \ \{}
\DoxyCodeLine{00898\ \ \ \ \ \}}
\DoxyCodeLine{00899\ }
\DoxyCodeLine{00900\ \ \ \ \ \textcolor{keyword}{inline}\ internal::platform::dll::\string~dll()}
\DoxyCodeLine{00901\ \ \ \ \ \{}
\DoxyCodeLine{00902\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (handle)}
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \ \ \ \ ::FreeLibrary(handle);}
\DoxyCodeLine{00904\ \ \ \ \ \}}
\DoxyCodeLine{00905\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_WIN32}}
\DoxyCodeLine{00906\ }
\DoxyCodeLine{00907\ \ \ \ \ \textcolor{comment}{//\ ole32\_dll\ implementation}}
\DoxyCodeLine{00908\ }
\DoxyCodeLine{00909\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00910\ \ \ \ \ \textcolor{keyword}{inline}\ internal::platform::ole32\_dll::ole32\_dll()}
\DoxyCodeLine{00911\ \ \ \ \ \ \ \ \ :\ dll(\textcolor{stringliteral}{"{}ole32.dll"{}})}
\DoxyCodeLine{00912\ \ \ \ \ \{}
\DoxyCodeLine{00913\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ COINIT\_MULTITHREADED\ because\ COINIT\_APARTMENTTHREADED\ causes\ crashes.}}
\DoxyCodeLine{00914\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ See\ https://github.com/samhocevar/portable-\/file-\/dialogs/issues/51}}
\DoxyCodeLine{00915\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ coinit\ =\ proc<HRESULT\ WINAPI(LPVOID,\ DWORD)>(*\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}CoInitializeEx"{}});}
\DoxyCodeLine{00916\ \ \ \ \ \ \ \ \ m\_state\ \ \ \ \ =\ coinit(\textcolor{keyword}{nullptr},\ COINIT\_MULTITHREADED);}
\DoxyCodeLine{00917\ \ \ \ \ \}}
\DoxyCodeLine{00918\ }
\DoxyCodeLine{00919\ \ \ \ \ \textcolor{keyword}{inline}\ internal::platform::ole32\_dll::\string~ole32\_dll()}
\DoxyCodeLine{00920\ \ \ \ \ \{}
\DoxyCodeLine{00921\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_initialized())}
\DoxyCodeLine{00922\ \ \ \ \ \ \ \ \ \ \ \ \ proc<void\ WINAPI()>(*\textcolor{keyword}{this},\ \textcolor{stringliteral}{"{}CoUninitialize"{}})();}
\DoxyCodeLine{00923\ \ \ \ \ \}}
\DoxyCodeLine{00924\ }
\DoxyCodeLine{00925\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ internal::platform::ole32\_dll::is\_initialized()}
\DoxyCodeLine{00926\ \ \ \ \ \{}
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_state\ ==\ S\_OK\ ||\ m\_state\ ==\ S\_FALSE;}
\DoxyCodeLine{00928\ \ \ \ \ \}}
\DoxyCodeLine{00929\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00930\ }
\DoxyCodeLine{00931\ \ \ \ \ \textcolor{comment}{//\ new\_style\_context\ implementation}}
\DoxyCodeLine{00932\ }
\DoxyCodeLine{00933\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{00934\ \ \ \ \ \textcolor{keyword}{inline}\ internal::platform::new\_style\_context::new\_style\_context()}
\DoxyCodeLine{00935\ \ \ \ \ \{}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Only\ create\ one\ activation\ context\ for\ the\ whole\ app\ lifetime.}}
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ HANDLE\ hctx\ =\ create();}
\DoxyCodeLine{00938\ }
\DoxyCodeLine{00939\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hctx\ !=\ INVALID\_HANDLE\_VALUE)}
\DoxyCodeLine{00940\ \ \ \ \ \ \ \ \ \ \ \ \ ActivateActCtx(hctx,\ \&m\_cookie);}
\DoxyCodeLine{00941\ \ \ \ \ \}}
\DoxyCodeLine{00942\ }
\DoxyCodeLine{00943\ \ \ \ \ \textcolor{keyword}{inline}\ internal::platform::new\_style\_context::\string~new\_style\_context()}
\DoxyCodeLine{00944\ \ \ \ \ \{}
\DoxyCodeLine{00945\ \ \ \ \ \ \ \ \ DeactivateActCtx(0,\ m\_cookie);}
\DoxyCodeLine{00946\ \ \ \ \ \}}
\DoxyCodeLine{00947\ }
\DoxyCodeLine{00948\ \ \ \ \ \textcolor{keyword}{inline}\ HANDLE\ internal::platform::new\_style\_context::create()}
\DoxyCodeLine{00949\ \ \ \ \ \{}
\DoxyCodeLine{00950\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ “hack”\ seems\ to\ be\ necessary\ for\ this\ code\ to\ work\ on\ windows\ XP.}}
\DoxyCodeLine{00951\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Without\ it,\ dialogs\ do\ not\ show\ and\ close\ immediately.\ GetError()}}
\DoxyCodeLine{00952\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ returns\ 0\ so\ I\ don’t\ know\ what\ causes\ this.\ I\ was\ not\ able\ to\ reproduce}}
\DoxyCodeLine{00953\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ this\ behavior\ on\ Windows\ 7\ and\ 10\ but\ just\ in\ case,\ let\ it\ be\ here\ for}}
\DoxyCodeLine{00954\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ those\ versions\ too.}}
\DoxyCodeLine{00955\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ hack\ is\ not\ required\ if\ other\ dialogs\ are\ used\ (they\ load\ comdlg32}}
\DoxyCodeLine{00956\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ automatically),\ only\ if\ message\ boxes\ are\ used.}}
\DoxyCodeLine{00957\ \ \ \ \ \ \ \ \ dll\ comdlg32(\textcolor{stringliteral}{"{}comdlg32.dll"{}});}
\DoxyCodeLine{00958\ }
\DoxyCodeLine{00959\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Using\ approach\ as\ shown\ here:\ https://stackoverflow.com/a/10444161}}
\DoxyCodeLine{00960\ \ \ \ \ \ \ \ \ UINT\ \ \ \ \ \ \ \ len\ =\ ::GetSystemDirectoryA(\textcolor{keyword}{nullptr},\ 0);}
\DoxyCodeLine{00961\ \ \ \ \ \ \ \ \ std::string\ sys\_dir(len,\ \textcolor{charliteral}{'\(\backslash\)0'});}
\DoxyCodeLine{00962\ \ \ \ \ \ \ \ \ ::GetSystemDirectoryA(\&sys\_dir[0],\ len);}
\DoxyCodeLine{00963\ }
\DoxyCodeLine{00964\ \ \ \ \ \ \ \ \ ACTCTXA\ act\_ctx\ =}
\DoxyCodeLine{00965\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Do\ not\ set\ flag\ ACTCTX\_FLAG\_SET\_PROCESS\_DEFAULT,\ since\ it\ causes\ a}}
\DoxyCodeLine{00967\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ crash\ with\ error\ “default\ context\ is\ already\ set”.}}
\DoxyCodeLine{00968\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(act\_ctx),}
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ACTCTX\_FLAG\_RESOURCE\_NAME\_VALID\ |\ ACTCTX\_FLAG\_ASSEMBLY\_DIRECTORY\_VALID,}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}shell32.dll"{}},}
\DoxyCodeLine{00971\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,}
\DoxyCodeLine{00972\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,}
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sys\_dir.c\_str(),}
\DoxyCodeLine{00974\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (LPCSTR)124,}
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{nullptr},}
\DoxyCodeLine{00976\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0,}
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00978\ }
\DoxyCodeLine{00979\ \ \ \ \ \ \ \ \ return\ ::CreateActCtxA(\&act\_ctx);}
\DoxyCodeLine{00980\ \ \ \ \ \}}
\DoxyCodeLine{00981\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ \_WIN32}}
\DoxyCodeLine{00982\ }
\DoxyCodeLine{00983\ \ \ \ \ \textcolor{comment}{//\ dialog\ implementation}}
\DoxyCodeLine{00984\ }
\DoxyCodeLine{00985\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_a77f20e6063f83e601ce23ed4899907c6}{internal::dialog::ready}}(\textcolor{keywordtype}{int}\ timeout\ \textcolor{comment}{/*\ =\ default\_wait\_timeout\ */})\textcolor{keyword}{\ const}}
\DoxyCodeLine{00986\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_async-\/>ready(timeout);}
\DoxyCodeLine{00988\ \ \ \ \ \}}
\DoxyCodeLine{00989\ }
\DoxyCodeLine{00990\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_a226b1502acd1d2cb86e34dd3df36772a}{internal::dialog::kill}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00991\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{00992\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_async-\/>kill();}
\DoxyCodeLine{00993\ \ \ \ \ \}}
\DoxyCodeLine{00994\ }
\DoxyCodeLine{00995\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_a05f9a4fcba8f8a9411d7dfaf18ee11ad}{internal::dialog::dialog}}()}
\DoxyCodeLine{00996\ \ \ \ \ \ \ \ \ :\ m\_async(std::make\_shared<\mbox{\hyperlink{classpfd_1_1internal_1_1executor}{executor}}>())}
\DoxyCodeLine{00997\ \ \ \ \ \{}
\DoxyCodeLine{00998\ \ \ \ \ \}}
\DoxyCodeLine{00999\ }
\DoxyCodeLine{01000\ \ \ \ \ \textcolor{keyword}{inline}\ std::vector<std::string>\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_aadaf6cb30620c85f4b97993e3c819188}{internal::dialog::desktop\_helper}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{01001\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{01002\ \textcolor{preprocessor}{\#if\ \_\_APPLE\_\_}}
\DoxyCodeLine{01003\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{\textcolor{stringliteral}{"{}osascript"{}}\};}
\DoxyCodeLine{01004\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01005\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{flags(flag::has\_zenity)\ ?\ \textcolor{stringliteral}{"{}zenity"{}}}
\DoxyCodeLine{01006\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ flags(flag::has\_matedialog)\ ?\ \textcolor{stringliteral}{"{}matedialog"{}}}
\DoxyCodeLine{01007\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ flags(flag::has\_qarma)\ ?\ \textcolor{stringliteral}{"{}qarma"{}}}
\DoxyCodeLine{01008\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ flags(flag::has\_kdialog)\ ?\ \textcolor{stringliteral}{"{}kdialog"{}}}
\DoxyCodeLine{01009\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{stringliteral}{"{}echo"{}}\};}
\DoxyCodeLine{01010\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01011\ \ \ \ \ \}}
\DoxyCodeLine{01012\ }
\DoxyCodeLine{01013\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_ac906c01d0365c13c9066cea857fd258a}{internal::dialog::buttons\_to\_name}}(\mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8}{choice}}\ \_choice)}
\DoxyCodeLine{01014\ \ \ \ \ \{}
\DoxyCodeLine{01015\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_choice)}
\DoxyCodeLine{01016\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01017\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a809da5df9c86c6426c8d8db2934d3f51}{choice::ok\_cancel}}:}
\DoxyCodeLine{01018\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}okcancel"{}};}
\DoxyCodeLine{01019\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a20f0596c21ad67a7fda598ffc7d038d1}{choice::yes\_no}}:}
\DoxyCodeLine{01020\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}yesno"{}};}
\DoxyCodeLine{01021\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a5c5cb337bb234e240912dc139048038c}{choice::yes\_no\_cancel}}:}
\DoxyCodeLine{01022\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}yesnocancel"{}};}
\DoxyCodeLine{01023\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a7928e609b1665227bcb71b20d431fd6a}{choice::retry\_cancel}}:}
\DoxyCodeLine{01024\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}retrycancel"{}};}
\DoxyCodeLine{01025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a9df771aa8f010c4b928e42a8979d5609}{choice::abort\_retry\_ignore}}:}
\DoxyCodeLine{01026\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}abortretryignore"{}};}
\DoxyCodeLine{01027\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ case\ choice::ok:\ */}\ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01028\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}ok"{}};}
\DoxyCodeLine{01029\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01030\ \ \ \ \ \}}
\DoxyCodeLine{01031\ }
\DoxyCodeLine{01032\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_ae94362bed052ab6050e38852712cb97a}{internal::dialog::get\_icon\_name}}(\mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85}{icon}}\ \_icon)}
\DoxyCodeLine{01033\ \ \ \ \ \{}
\DoxyCodeLine{01034\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_icon)}
\DoxyCodeLine{01035\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01036\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a7b83d3f08fa392b79e3f553b585971cd}{icon::warning}}:}
\DoxyCodeLine{01037\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}warning"{}};}
\DoxyCodeLine{01038\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acb5e100e5a9a3e7f6d1fd97512215282}{icon::error}}:}
\DoxyCodeLine{01039\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}error"{}};}
\DoxyCodeLine{01040\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a5494af1f14a8c19939968c3e9e2d4f79}{icon::question}}:}
\DoxyCodeLine{01041\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}question"{}};}
\DoxyCodeLine{01042\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Zenity\ wants\ "{}information"{}\ but\ WinForms\ wants\ "{}info"{}}}
\DoxyCodeLine{01043\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ case\ icon::info:\ */}\ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01044\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{01045\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}info"{}};}
\DoxyCodeLine{01046\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01047\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}information"{}};}
\DoxyCodeLine{01048\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01049\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01050\ \ \ \ \ \}}
\DoxyCodeLine{01051\ }
\DoxyCodeLine{01052\ \ \ \ \ \textcolor{comment}{//\ This\ is\ only\ used\ for\ debugging\ purposes}}
\DoxyCodeLine{01053\ \ \ \ \ \textcolor{keyword}{inline}\ std::ostream\&\ \mbox{\hyperlink{namespacepfd_acce315b273b2edaaeac0d8731f308ea9}{operator<<}}(std::ostream\&\ s,\ std::vector<std::string>\ \textcolor{keyword}{const}\&\ v)}
\DoxyCodeLine{01054\ \ \ \ \ \{}
\DoxyCodeLine{01055\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ not\_first\ =\ 0;}
\DoxyCodeLine{01056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ e\ :\ v)}
\DoxyCodeLine{01057\ \ \ \ \ \ \ \ \ \ \ \ \ s\ <<\ (not\_first++\ ?\ \textcolor{stringliteral}{"{}\ "{}}\ :\ \textcolor{stringliteral}{"{}"{}})\ <<\ e;}
\DoxyCodeLine{01058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ s;}
\DoxyCodeLine{01059\ \ \ \ \ \}}
\DoxyCodeLine{01060\ }
\DoxyCodeLine{01061\ \ \ \ \ \textcolor{comment}{//\ Properly\ quote\ a\ string\ for\ Powershell:\ replace\ '\ or\ "{}\ with\ ''\ or\ "{}"{}}}
\DoxyCodeLine{01062\ \ \ \ \ \textcolor{comment}{//\ FIXME:\ we\ should\ probably\ get\ rid\ of\ newlines!}}
\DoxyCodeLine{01063\ \ \ \ \ \textcolor{comment}{//\ FIXME:\ the\ \(\backslash\)"{}\ sequence\ seems\ unsafe,\ too!}}
\DoxyCodeLine{01064\ \ \ \ \ \textcolor{comment}{//\ XXX:\ this\ is\ no\ longer\ used\ but\ I\ would\ like\ to\ keep\ it\ around\ just\ in\ case}}
\DoxyCodeLine{01065\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_aae2255eceb0b3b18b55d1618fd7e1635}{internal::dialog::powershell\_quote}}(std::string\ \textcolor{keyword}{const}\&\ str)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01066\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{01067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}'"{}}\ +\ std::regex\_replace(str,\ std::regex(\textcolor{stringliteral}{"{}['\(\backslash\)"{}]"{}}),\ \textcolor{stringliteral}{"{}\$\&\$\&"{}})\ +\ \textcolor{stringliteral}{"{}'"{}};}
\DoxyCodeLine{01068\ \ \ \ \ \}}
\DoxyCodeLine{01069\ }
\DoxyCodeLine{01070\ \ \ \ \ \textcolor{comment}{//\ Properly\ quote\ a\ string\ for\ osascript:\ replace\ \(\backslash\)\ or\ "{}\ with\ \(\backslash\)\(\backslash\)\ or\ \(\backslash\)"{}}}
\DoxyCodeLine{01071\ \ \ \ \ \textcolor{comment}{//\ XXX:\ this\ also\ used\ to\ replace\ '\ with\ \(\backslash\)'\ when\ popen\ was\ used,\ but\ it\ would\ be}}
\DoxyCodeLine{01072\ \ \ \ \ \textcolor{comment}{//\ smarter\ to\ do\ shell\_quote(osascript\_quote(...))\ if\ this\ is\ needed\ again.}}
\DoxyCodeLine{01073\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_adc0ec6f5c8137cbdb0ea6669b5263a73}{internal::dialog::osascript\_quote}}(std::string\ \textcolor{keyword}{const}\&\ str)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01074\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{01075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}}\ +\ std::regex\_replace(str,\ std::regex(\textcolor{stringliteral}{"{}[\(\backslash\)\(\backslash\)\(\backslash\)\(\backslash\)\(\backslash\)"{}]"{}}),\ \textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)\$\&"{}})\ +\ \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}};}
\DoxyCodeLine{01076\ \ \ \ \ \}}
\DoxyCodeLine{01077\ }
\DoxyCodeLine{01078\ \ \ \ \ \textcolor{comment}{//\ Properly\ quote\ a\ string\ for\ the\ shell:\ just\ replace\ '\ with\ '\(\backslash\)''}}
\DoxyCodeLine{01079\ \ \ \ \ \textcolor{comment}{//\ XXX:\ this\ is\ no\ longer\ used\ but\ I\ would\ like\ to\ keep\ it\ around\ just\ in\ case}}
\DoxyCodeLine{01080\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1dialog_a1a4f28c3c2bbd1629f2f882314fff63e}{internal::dialog::shell\_quote}}(std::string\ \textcolor{keyword}{const}\&\ str)\textcolor{keyword}{\ const}}
\DoxyCodeLine{01081\ \textcolor{keyword}{\ \ \ \ }\{}
\DoxyCodeLine{01082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}'"{}}\ +\ std::regex\_replace(str,\ std::regex(\textcolor{stringliteral}{"{}'"{}}),\ \textcolor{stringliteral}{"{}'\(\backslash\)\(\backslash\)''"{}})\ +\ \textcolor{stringliteral}{"{}'"{}};}
\DoxyCodeLine{01083\ \ \ \ \ \}}
\DoxyCodeLine{01084\ }
\DoxyCodeLine{01085\ \ \ \ \ \textcolor{comment}{//\ file\_dialog\ implementation}}
\DoxyCodeLine{01086\ }
\DoxyCodeLine{01087\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_a16f53945e61d23aa9b7fc373701dd13f}{internal::file\_dialog::file\_dialog}}(\mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_a758847a3fab54bb12a67abbf9ea683fc}{type}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ in\_type,}
\DoxyCodeLine{01088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ title,}
\DoxyCodeLine{01089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ default\_path\ \textcolor{comment}{/*\ =\ "{}"{}\ */},}
\DoxyCodeLine{01090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \textcolor{keyword}{const}\&\ filters\ \textcolor{comment}{/*\ =\ \{\}\ */},}
\DoxyCodeLine{01091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ options\ \textcolor{comment}{/*\ =\ opt::none\ */})}
\DoxyCodeLine{01092\ \ \ \ \ \{}
\DoxyCodeLine{01093\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{01094\ \ \ \ \ \ \ \ \ std::string\ filter\_list;}
\DoxyCodeLine{01095\ \ \ \ \ \ \ \ \ std::regex\ \ whitespace(\textcolor{stringliteral}{"{}\ \ *"{}});}
\DoxyCodeLine{01096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ +\ 1\ <\ filters.size();\ i\ +=\ 2)}
\DoxyCodeLine{01097\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01098\ \ \ \ \ \ \ \ \ \ \ \ \ filter\_list\ +=\ filters[i]\ +\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{01099\ \ \ \ \ \ \ \ \ \ \ \ \ filter\_list\ +=\ std::regex\_replace(filters[i\ +\ 1],\ whitespace,\ \textcolor{stringliteral}{"{};"{}})\ +\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{01100\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01101\ \ \ \ \ \ \ \ \ filter\_list\ +=\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{01102\ }
\DoxyCodeLine{01103\ \ \ \ \ \ \ \ \ m\_async-\/>start\_func([\textcolor{keyword}{this},\ in\_type,\ title,\ default\_path,\ filter\_list,}
\DoxyCodeLine{01104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ options](\textcolor{keywordtype}{int}*\ exit\_code)\ -\/>\ std::string\ \{}
\DoxyCodeLine{01105\ \ \ \ \ \ \ \ \ \ \ \ \ (void)exit\_code;}
\DoxyCodeLine{01106\ \ \ \ \ \ \ \ \ \ \ \ \ m\_wtitle\ \ \ \ \ \ \ \ \ \ =\ internal::str2wstr(title);}
\DoxyCodeLine{01107\ \ \ \ \ \ \ \ \ \ \ \ \ m\_wdefault\_path\ \ \ =\ internal::str2wstr(default\_path);}
\DoxyCodeLine{01108\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ wfilter\_list\ =\ internal::str2wstr(filter\_list);}
\DoxyCodeLine{01109\ }
\DoxyCodeLine{01110\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Initialise\ COM.\ This\ is\ required\ for\ the\ new\ folder\ selection\ window,}}
\DoxyCodeLine{01111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (see\ https://github.com/samhocevar/portable-\/file-\/dialogs/pull/21)}}
\DoxyCodeLine{01112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ and\ to\ avoid\ random\ crashes\ with\ GetOpenFileNameW()\ (see}}
\DoxyCodeLine{01113\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ https://github.com/samhocevar/portable-\/file-\/dialogs/issues/51)}}
\DoxyCodeLine{01114\ \ \ \ \ \ \ \ \ \ \ \ \ ole32\_dll\ ole32;}
\DoxyCodeLine{01115\ }
\DoxyCodeLine{01116\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Folder\ selection\ uses\ a\ different\ method}}
\DoxyCodeLine{01117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (in\_type\ ==\ type::folder)}
\DoxyCodeLine{01118\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01119\ \textcolor{preprocessor}{\#if\ PFD\_HAS\_IFILEDIALOG}}
\DoxyCodeLine{01120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (flags(flag::is\_vista))}
\DoxyCodeLine{01121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ On\ Vista\ and\ higher\ we\ should\ be\ able\ to\ use\ IFileDialog\ for\ folder\ selection}}
\DoxyCodeLine{01123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IFileDialog*\ ifd;}
\DoxyCodeLine{01124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HRESULT\ \ \ \ \ \ hr\ =\ dll::proc<HRESULT\ WINAPI(REFCLSID,\ LPUNKNOWN,\ DWORD,\ REFIID,\ LPVOID*)>(ole32,\ \textcolor{stringliteral}{"{}CoCreateInstance"{}})(CLSID\_FileOpenDialog,\ \textcolor{keyword}{nullptr},\ CLSCTX\_INPROC\_SERVER,\ IID\_PPV\_ARGS(\&ifd));}
\DoxyCodeLine{01125\ }
\DoxyCodeLine{01126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ In\ case\ CoCreateInstance\ fails\ (which\ it\ should\ not),\ try\ legacy\ approach}}
\DoxyCodeLine{01127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (SUCCEEDED(hr))}
\DoxyCodeLine{01128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ select\_folder\_vista(ifd,\ options\ \&\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a51106d57377a72da5f9a0415f4f6142b}{opt::force\_path}});}
\DoxyCodeLine{01129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01130\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01131\ }
\DoxyCodeLine{01132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ BROWSEINFOW\ bi;}
\DoxyCodeLine{01133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_utils_8cc_a53393f40237f7cca6734f3125e091645}{memset}}(\&bi,\ 0,\ \textcolor{keyword}{sizeof}(bi));}
\DoxyCodeLine{01134\ }
\DoxyCodeLine{01135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bi.lpfn\ \ \ =\ \&bffcallback;}
\DoxyCodeLine{01136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bi.lParam\ =\ (LPARAM)\textcolor{keyword}{this};}
\DoxyCodeLine{01137\ }
\DoxyCodeLine{01138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (flags(flag::is\_vista))}
\DoxyCodeLine{01139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ole32.is\_initialized())}
\DoxyCodeLine{01141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bi.ulFlags\ |=\ BIF\_NEWDIALOGSTYLE;}
\DoxyCodeLine{01142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bi.ulFlags\ |=\ BIF\_EDITBOX;}
\DoxyCodeLine{01143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ bi.ulFlags\ |=\ BIF\_STATUSTEXT;}
\DoxyCodeLine{01144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01145\ }
\DoxyCodeLine{01146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ \ \ \ \ \ \ list\ =\ SHBrowseForFolderW(\&bi);}
\DoxyCodeLine{01147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ ret;}
\DoxyCodeLine{01148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (list)}
\DoxyCodeLine{01149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ buffer\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{wchar\_t}[MAX\_PATH];}
\DoxyCodeLine{01151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SHGetPathFromIDListW(list,\ buffer);}
\DoxyCodeLine{01152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dll::proc<void\ WINAPI(LPVOID)>(ole32,\ \textcolor{stringliteral}{"{}CoTaskMemFree"{}})(list);}
\DoxyCodeLine{01153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ret\ =\ internal::wstr2str(buffer);}
\DoxyCodeLine{01154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ buffer;}
\DoxyCodeLine{01155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{01157\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01158\ }
\DoxyCodeLine{01159\ \ \ \ \ \ \ \ \ \ \ \ \ OPENFILENAMEW\ ofn;}
\DoxyCodeLine{01160\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_utils_8cc_a53393f40237f7cca6734f3125e091645}{memset}}(\&ofn,\ 0,\ \textcolor{keyword}{sizeof}(ofn));}
\DoxyCodeLine{01161\ \ \ \ \ \ \ \ \ \ \ \ \ ofn.lStructSize\ =\ \textcolor{keyword}{sizeof}(OPENFILENAMEW);}
\DoxyCodeLine{01162\ \ \ \ \ \ \ \ \ \ \ \ \ ofn.hwndOwner\ \ \ =\ GetActiveWindow();}
\DoxyCodeLine{01163\ }
\DoxyCodeLine{01164\ \ \ \ \ \ \ \ \ \ \ \ \ ofn.lpstrFilter\ =\ wfilter\_list.c\_str();}
\DoxyCodeLine{01165\ }
\DoxyCodeLine{01166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ woutput\ \ =\ std::wstring(MAX\_PATH\ *\ 256,\ L\textcolor{charliteral}{'\(\backslash\)0'});}
\DoxyCodeLine{01167\ \ \ \ \ \ \ \ \ \ \ \ \ ofn.lpstrFile\ =\ (LPWSTR)woutput.data();}
\DoxyCodeLine{01168\ \ \ \ \ \ \ \ \ \ \ \ \ ofn.nMaxFile\ \ =\ (DWORD)woutput.size();}
\DoxyCodeLine{01169\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_wdefault\_path.empty())}
\DoxyCodeLine{01170\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ a\ directory\ was\ provided,\ use\ it\ as\ the\ initial\ directory.\ If}}
\DoxyCodeLine{01172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\ valid\ path\ was\ provided,\ use\ it\ as\ the\ initial\ file.\ Otherwise,}}
\DoxyCodeLine{01173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ let\ the\ Windows\ API\ decide.}}
\DoxyCodeLine{01174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ path\_attr\ =\ GetFileAttributesW(m\_wdefault\_path.c\_str());}
\DoxyCodeLine{01175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (path\_attr\ !=\ INVALID\_FILE\_ATTRIBUTES\ \&\&\ (path\_attr\ \&\ FILE\_ATTRIBUTE\_DIRECTORY))}
\DoxyCodeLine{01176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ofn.lpstrInitialDir\ =\ m\_wdefault\_path.c\_str();}
\DoxyCodeLine{01177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\_wdefault\_path.size()\ <=\ woutput.size())}
\DoxyCodeLine{01178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//second\ argument\ is\ size\ of\ buffer,\ not\ length\ of\ string}}
\DoxyCodeLine{01179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ StringCchCopyW(ofn.lpstrFile,\ MAX\_PATH\ *\ 256\ +\ 1,\ m\_wdefault\_path.c\_str());}
\DoxyCodeLine{01180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ofn.lpstrFileTitle\ =\ (LPWSTR)m\_wdefault\_path.data();}
\DoxyCodeLine{01183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ofn.nMaxFileTitle\ \ =\ (DWORD)m\_wdefault\_path.size();}
\DoxyCodeLine{01184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01185\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01186\ \ \ \ \ \ \ \ \ \ \ \ \ ofn.lpstrTitle\ =\ m\_wtitle.c\_str();}
\DoxyCodeLine{01187\ \ \ \ \ \ \ \ \ \ \ \ \ ofn.Flags\ \ \ \ \ \ =\ OFN\_NOCHANGEDIR\ |\ OFN\_EXPLORER;}
\DoxyCodeLine{01188\ }
\DoxyCodeLine{01189\ \ \ \ \ \ \ \ \ \ \ \ \ dll\ comdlg32(\textcolor{stringliteral}{"{}comdlg32.dll"{}});}
\DoxyCodeLine{01190\ }
\DoxyCodeLine{01191\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Apply\ new\ visual\ style\ (required\ for\ windows\ XP)}}
\DoxyCodeLine{01192\ \ \ \ \ \ \ \ \ \ \ \ \ new\_style\_context\ ctx;}
\DoxyCodeLine{01193\ }
\DoxyCodeLine{01194\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (in\_type\ ==\ type::save)}
\DoxyCodeLine{01195\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(options\ \&\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a8fc52a8161c68fcaeebdfdb500a36d4b}{opt::force\_overwrite}}))}
\DoxyCodeLine{01197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ofn.Flags\ |=\ OFN\_OVERWRITEPROMPT;}
\DoxyCodeLine{01198\ }
\DoxyCodeLine{01199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dll::proc<\mbox{\hyperlink{ddk_8h_ae4cc35dcc70810fa972cc8a5185a28fa}{BOOL}}\ WINAPI(LPOPENFILENAMEW)>\ get\_save\_file\_name(comdlg32,\ \textcolor{stringliteral}{"{}GetSaveFileNameW"{}});}
\DoxyCodeLine{01200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_save\_file\_name(\&ofn)\ ==\ 0)}
\DoxyCodeLine{01201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ internal::wstr2str(woutput.c\_str());}
\DoxyCodeLine{01203\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01204\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01205\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (options\ \&\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997ab66abfe0e0c2ef7c545895c12a0a8837}{opt::multiselect}})}
\DoxyCodeLine{01207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ofn.Flags\ |=\ OFN\_ALLOWMULTISELECT;}
\DoxyCodeLine{01208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ofn.Flags\ |=\ OFN\_PATHMUSTEXIST;}
\DoxyCodeLine{01209\ }
\DoxyCodeLine{01210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dll::proc<\mbox{\hyperlink{ddk_8h_ae4cc35dcc70810fa972cc8a5185a28fa}{BOOL}}\ WINAPI(LPOPENFILENAMEW)>\ get\_open\_file\_name(comdlg32,\ \textcolor{stringliteral}{"{}GetOpenFileNameW"{}});}
\DoxyCodeLine{01211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_open\_file\_name(\&ofn)\ ==\ 0)}
\DoxyCodeLine{01212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01213\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01214\ }
\DoxyCodeLine{01215\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ prefix;}
\DoxyCodeLine{01216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{wchar\_t}\ \textcolor{keyword}{const}*\ p\ =\ woutput.c\_str();\ *p;)}
\DoxyCodeLine{01217\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ filename\ =\ internal::wstr2str(p);}
\DoxyCodeLine{01219\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ +=\ wcslen(p);}
\DoxyCodeLine{01220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ In\ multiselect\ mode,\ we\ advance\ p\ one\ wchar\ further\ and}}
\DoxyCodeLine{01221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ for\ another\ filename.\ If\ there\ is\ one\ and\ the}}
\DoxyCodeLine{01222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ prefix\ is\ empty,\ it\ means\ we\ just\ read\ the\ prefix.}}
\DoxyCodeLine{01223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((options\ \&\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997ab66abfe0e0c2ef7c545895c12a0a8837}{opt::multiselect}})\ \&\&\ *++p\ \&\&\ prefix.empty())}
\DoxyCodeLine{01224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prefix\ =\ filename\ +\ \textcolor{stringliteral}{"{}/"{}};}
\DoxyCodeLine{01226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01228\ }
\DoxyCodeLine{01229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_vector\_result.push\_back(prefix\ +\ filename);}
\DoxyCodeLine{01230\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01231\ }
\DoxyCodeLine{01232\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01233\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{01234\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_}}
\DoxyCodeLine{01235\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME:\ do\ something}}
\DoxyCodeLine{01236\ \ \ \ \ \ \ \ \ (void)in\_type;}
\DoxyCodeLine{01237\ \ \ \ \ \ \ \ \ (void)title;}
\DoxyCodeLine{01238\ \ \ \ \ \ \ \ \ (void)default\_path;}
\DoxyCodeLine{01239\ \ \ \ \ \ \ \ \ (void)filters;}
\DoxyCodeLine{01240\ \ \ \ \ \ \ \ \ (void)options;}
\DoxyCodeLine{01241\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01242\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ command\ =\ desktop\_helper();}
\DoxyCodeLine{01243\ }
\DoxyCodeLine{01244\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_osascript())}
\DoxyCodeLine{01245\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01246\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ script\ =\ \textcolor{stringliteral}{"{}set\ ret\ to\ choose"{}};}
\DoxyCodeLine{01247\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (in\_type)}
\DoxyCodeLine{01248\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01249\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ type::save:}
\DoxyCodeLine{01250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\ file\ name"{}};}
\DoxyCodeLine{01251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01252\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ type::open:}
\DoxyCodeLine{01253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\ file"{}};}
\DoxyCodeLine{01255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (options\ \&\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997ab66abfe0e0c2ef7c545895c12a0a8837}{opt::multiselect}})}
\DoxyCodeLine{01256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\ with\ multiple\ selections\ allowed"{}};}
\DoxyCodeLine{01257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01258\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ type::folder:}
\DoxyCodeLine{01259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\ folder"{}};}
\DoxyCodeLine{01260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01261\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01262\ }
\DoxyCodeLine{01263\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (default\_path.size())}
\DoxyCodeLine{01264\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (in\_type\ ==\ type::folder\ ||\ is\_directory(default\_path))}
\DoxyCodeLine{01266\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\ default\ location\ "{}};}
\DoxyCodeLine{01267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\ default\ name\ "{}};}
\DoxyCodeLine{01269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ osascript\_quote(default\_path);}
\DoxyCodeLine{01270\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01271\ }
\DoxyCodeLine{01272\ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\ with\ prompt\ "{}}\ +\ osascript\_quote(title);}
\DoxyCodeLine{01273\ }
\DoxyCodeLine{01274\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (in\_type\ ==\ type::open)}
\DoxyCodeLine{01275\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Concatenate\ all\ user-\/provided\ filter\ patterns}}
\DoxyCodeLine{01277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ patterns;}
\DoxyCodeLine{01278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ filters.size()\ /\ 2;\ ++i)}
\DoxyCodeLine{01279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ patterns\ +=\ \textcolor{stringliteral}{"{}\ "{}}\ +\ filters[2\ *\ i\ +\ 1];}
\DoxyCodeLine{01280\ }
\DoxyCodeLine{01281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Split\ the\ pattern\ list\ to\ check\ whether\ "{}*"{}\ is\ in\ there;\ if\ it}}
\DoxyCodeLine{01282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ is,\ we\ have\ to\ disable\ filters\ because\ there\ is\ no\ mechanism\ in}}
\DoxyCodeLine{01283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ OS\ X\ for\ the\ user\ to\ override\ the\ filter.}}
\DoxyCodeLine{01284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::regex\ sep(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)s+"{}});}
\DoxyCodeLine{01285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ filter\_list;}
\DoxyCodeLine{01286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ has\_filter\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{01287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::sregex\_token\_iterator\ iter(patterns.begin(),\ patterns.end(),\ sep,\ -\/1);}
\DoxyCodeLine{01288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::sregex\_token\_iterator\ end;}
\DoxyCodeLine{01289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ iter\ !=\ end;\ ++iter)}
\DoxyCodeLine{01290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ pat\ =\ iter-\/>str();}
\DoxyCodeLine{01292\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pat\ ==\ \textcolor{stringliteral}{"{}*"{}}\ ||\ pat\ ==\ \textcolor{stringliteral}{"{}*.*"{}})}
\DoxyCodeLine{01293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ has\_filter\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{01294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (internal::starts\_with(pat,\ \textcolor{stringliteral}{"{}*."{}}))}
\DoxyCodeLine{01295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filter\_list\ +=\ \textcolor{stringliteral}{"{},"{}}\ +\ osascript\_quote(pat.substr(2,\ pat.size()\ -\/\ 2));}
\DoxyCodeLine{01296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01297\ }
\DoxyCodeLine{01298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (has\_filter\ \&\&\ filter\_list.size()\ >\ 0)}
\DoxyCodeLine{01299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01300\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ There\ is\ a\ weird\ AppleScript\ bug\ where\ file\ extensions\ of\ length\ !=\ 3\ are}}
\DoxyCodeLine{01301\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ignored,\ e.g.\ type\{"{}txt"{}\}\ works,\ but\ type\{"{}json"{}\}\ does\ not.\ Fortunately\ if}}
\DoxyCodeLine{01302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ whole\ list\ starts\ with\ a\ 3-\/character\ extension,\ everything\ works\ again.}}
\DoxyCodeLine{01303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ use\ "{}///"{}\ for\ such\ an\ extension\ because\ we\ are\ sure\ it\ cannot\ appear\ in}}
\DoxyCodeLine{01304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ an\ actual\ filename.}}
\DoxyCodeLine{01305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\ of\ type\ \{\(\backslash\)"{}///\(\backslash\)"{}"{}}\ +\ filter\_list\ +\ \textcolor{stringliteral}{"{}\}"{}};}
\DoxyCodeLine{01306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01307\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01308\ }
\DoxyCodeLine{01309\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (in\_type\ ==\ type::open\ \&\&\ (options\ \&\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997ab66abfe0e0c2ef7c545895c12a0a8837}{opt::multiselect}}))}
\DoxyCodeLine{01310\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\(\backslash\)nset\ s\ to\ \(\backslash\)"{}\(\backslash\)"{}"{}};}
\DoxyCodeLine{01312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\(\backslash\)nrepeat\ with\ i\ in\ ret"{}};}
\DoxyCodeLine{01313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\(\backslash\)n\ \ set\ s\ to\ s\ \&\ (POSIX\ path\ of\ i)\ \&\ \(\backslash\)"{}\(\backslash\)\(\backslash\)n\(\backslash\)"{}"{}};}
\DoxyCodeLine{01314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\(\backslash\)nend\ repeat"{}};}
\DoxyCodeLine{01315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\(\backslash\)ncopy\ s\ to\ stdout"{}};}
\DoxyCodeLine{01316\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01317\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01318\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01319\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\(\backslash\)nPOSIX\ path\ of\ ret"{}};}
\DoxyCodeLine{01320\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01321\ }
\DoxyCodeLine{01322\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/e"{}});}
\DoxyCodeLine{01323\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(script);}
\DoxyCodeLine{01324\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01325\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (is\_zenity())}
\DoxyCodeLine{01326\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01327\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/file-\/selection"{}});}
\DoxyCodeLine{01328\ }
\DoxyCodeLine{01329\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ default\ path\ is\ a\ directory,\ make\ sure\ it\ ends\ with\ "{}/"{}\ otherwise\ zenity\ will}}
\DoxyCodeLine{01330\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ open\ the\ file\ dialog\ in\ the\ parent\ directory.}}
\DoxyCodeLine{01331\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ filename\_arg\ =\ \textcolor{stringliteral}{"{}-\/-\/filename="{}}\ +\ default\_path;}
\DoxyCodeLine{01332\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (in\_type\ !=\ type::folder\ \&\&\ !ends\_with(default\_path,\ \textcolor{stringliteral}{"{}/"{}})\ \&\&\ internal::is\_directory(default\_path))}
\DoxyCodeLine{01333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filename\_arg\ +=\ \textcolor{stringliteral}{"{}/"{}};}
\DoxyCodeLine{01334\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(filename\_arg);}
\DoxyCodeLine{01335\ }
\DoxyCodeLine{01336\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/title"{}});}
\DoxyCodeLine{01337\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(title);}
\DoxyCodeLine{01338\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/separator=\(\backslash\)n"{}});}
\DoxyCodeLine{01339\ }
\DoxyCodeLine{01340\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ filters.size()\ /\ 2;\ ++i)}
\DoxyCodeLine{01341\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/file-\/filter"{}});}
\DoxyCodeLine{01343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(filters[2\ *\ i]\ +\ \textcolor{stringliteral}{"{}|"{}}\ +\ filters[2\ *\ i\ +\ 1]);}
\DoxyCodeLine{01344\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01345\ }
\DoxyCodeLine{01346\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (in\_type\ ==\ type::save)}
\DoxyCodeLine{01347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/save"{}});}
\DoxyCodeLine{01348\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (in\_type\ ==\ type::folder)}
\DoxyCodeLine{01349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/directory"{}});}
\DoxyCodeLine{01350\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(options\ \&\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a8fc52a8161c68fcaeebdfdb500a36d4b}{opt::force\_overwrite}}))}
\DoxyCodeLine{01351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/confirm-\/overwrite"{}});}
\DoxyCodeLine{01352\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (options\ \&\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997ab66abfe0e0c2ef7c545895c12a0a8837}{opt::multiselect}})}
\DoxyCodeLine{01353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/multiple"{}});}
\DoxyCodeLine{01354\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01355\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (is\_kdialog())}
\DoxyCodeLine{01356\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01357\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (in\_type)}
\DoxyCodeLine{01358\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01359\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ type::save:}
\DoxyCodeLine{01360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/getsavefilename"{}});}
\DoxyCodeLine{01361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01362\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ type::open:}
\DoxyCodeLine{01363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/getopenfilename"{}});}
\DoxyCodeLine{01364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01365\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ type::folder:}
\DoxyCodeLine{01366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/getexistingdirectory"{}});}
\DoxyCodeLine{01367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01368\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01369\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (options\ \&\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997ab66abfe0e0c2ef7c545895c12a0a8837}{opt::multiselect}})}
\DoxyCodeLine{01370\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/multiple"{}});}
\DoxyCodeLine{01372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/separate-\/output"{}});}
\DoxyCodeLine{01373\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01374\ }
\DoxyCodeLine{01375\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(default\_path);}
\DoxyCodeLine{01376\ }
\DoxyCodeLine{01377\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ filter;}
\DoxyCodeLine{01378\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ filters.size()\ /\ 2;\ ++i)}
\DoxyCodeLine{01379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filter\ +=\ (i\ ==\ 0\ ?\ \textcolor{stringliteral}{"{}"{}}\ :\ \textcolor{stringliteral}{"{}\ |\ "{}})\ +\ filters[2\ *\ i]\ +\ \textcolor{stringliteral}{"{}("{}}\ +\ filters[2\ *\ i\ +\ 1]\ +\ \textcolor{stringliteral}{"{})"{}};}
\DoxyCodeLine{01380\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(filter);}
\DoxyCodeLine{01381\ }
\DoxyCodeLine{01382\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/title"{}});}
\DoxyCodeLine{01383\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(title);}
\DoxyCodeLine{01384\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01385\ }
\DoxyCodeLine{01386\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (flags(flag::is\_verbose))}
\DoxyCodeLine{01387\ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}pfd:\ "{}}\ <<\ command\ <<\ std::endl;}
\DoxyCodeLine{01388\ }
\DoxyCodeLine{01389\ \ \ \ \ \ \ \ \ m\_async-\/>start\_process(command);}
\DoxyCodeLine{01390\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01391\ \ \ \ \ \}}
\DoxyCodeLine{01392\ }
\DoxyCodeLine{01393\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_ac916440e9dcefba5cbd4f0e5bb8acbff}{internal::file\_dialog::string\_result}}()}
\DoxyCodeLine{01394\ \ \ \ \ \{}
\DoxyCodeLine{01395\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{01396\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_async-\/>result();}
\DoxyCodeLine{01397\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01398\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ ret\ =\ m\_async-\/>result();}
\DoxyCodeLine{01399\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Strip\ potential\ trailing\ newline\ (zenity).\ Also\ strip\ trailing\ slash}}
\DoxyCodeLine{01400\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ added\ by\ osascript\ for\ consistency\ with\ other\ backends.}}
\DoxyCodeLine{01401\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!ret.empty()\ \&\&\ (ret.back()\ ==\ \textcolor{charliteral}{'\(\backslash\)n'}\ ||\ ret.back()\ ==\ \textcolor{charliteral}{'/'}))}
\DoxyCodeLine{01402\ \ \ \ \ \ \ \ \ \ \ \ \ ret.pop\_back();}
\DoxyCodeLine{01403\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{01404\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01405\ \ \ \ \ \}}
\DoxyCodeLine{01406\ }
\DoxyCodeLine{01407\ \ \ \ \ \textcolor{keyword}{inline}\ std::vector<std::string>\ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_ae28b6dd37ab4e47885ce7ca25652212b}{internal::file\_dialog::vector\_result}}()}
\DoxyCodeLine{01408\ \ \ \ \ \{}
\DoxyCodeLine{01409\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{01410\ \ \ \ \ \ \ \ \ m\_async-\/>result();}
\DoxyCodeLine{01411\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_vector\_result;}
\DoxyCodeLine{01412\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01413\ \ \ \ \ \ \ \ \ std::vector<std::string>\ ret;}
\DoxyCodeLine{01414\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ result\ =\ m\_async-\/>result();}
\DoxyCodeLine{01415\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)}
\DoxyCodeLine{01416\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01417\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Split\ result\ along\ newline\ characters}}
\DoxyCodeLine{01418\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ i\ =\ result.find(\textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{01419\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ 0\ ||\ i\ ==\ std::string::npos)}
\DoxyCodeLine{01420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01421\ \ \ \ \ \ \ \ \ \ \ \ \ ret.push\_back(result.substr(0,\ i));}
\DoxyCodeLine{01422\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ result.substr(i\ +\ 1,\ result.size());}
\DoxyCodeLine{01423\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01424\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{01425\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01426\ \ \ \ \ \}}
\DoxyCodeLine{01427\ }
\DoxyCodeLine{01428\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{01429\ \ \ \ \ \textcolor{comment}{//\ Use\ a\ static\ function\ to\ pass\ as\ BFFCALLBACK\ for\ legacy\ folder\ select}}
\DoxyCodeLine{01430\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ CALLBACK\ internal::file\_dialog::bffcallback(HWND\ hwnd,\ UINT\ uMsg,\ LPARAM,\ LPARAM\ pData)}
\DoxyCodeLine{01431\ \ \ \ \ \{}
\DoxyCodeLine{01432\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ inst\ =\ (\mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog}{file\_dialog}}*)pData;}
\DoxyCodeLine{01433\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (uMsg)}
\DoxyCodeLine{01434\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01435\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ BFFM\_INITIALIZED:}
\DoxyCodeLine{01436\ \ \ \ \ \ \ \ \ \ \ \ \ SendMessage(hwnd,\ BFFM\_SETSELECTIONW,\ \mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}},\ (LPARAM)inst-\/>m\_wdefault\_path.c\_str());}
\DoxyCodeLine{01437\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01438\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01439\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01440\ \ \ \ \ \}}
\DoxyCodeLine{01441\ }
\DoxyCodeLine{01442\ \textcolor{preprocessor}{\#if\ PFD\_HAS\_IFILEDIALOG}}
\DoxyCodeLine{01443\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ internal::file\_dialog::select\_folder\_vista(IFileDialog*\ ifd,\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a51106d57377a72da5f9a0415f4f6142b}{force\_path}})}
\DoxyCodeLine{01444\ \ \ \ \ \{}
\DoxyCodeLine{01445\ \ \ \ \ \ \ \ \ std::string\ result;}
\DoxyCodeLine{01446\ }
\DoxyCodeLine{01447\ \ \ \ \ \ \ \ \ IShellItem*\ folder;}
\DoxyCodeLine{01448\ }
\DoxyCodeLine{01449\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Load\ library\ at\ runtime\ so\ app\ doesn't\ link\ it\ at\ load\ time\ (which\ will\ fail\ on\ windows\ XP)}}
\DoxyCodeLine{01450\ \ \ \ \ \ \ \ \ dll\ shell32(\textcolor{stringliteral}{"{}shell32.dll"{}});}
\DoxyCodeLine{01451\ \ \ \ \ \ \ \ \ dll::proc<HRESULT\ WINAPI(PCWSTR,\ IBindCtx*,\ REFIID,\ \textcolor{keywordtype}{void}**)>}
\DoxyCodeLine{01452\ \ \ \ \ \ \ \ \ \ \ \ \ create\_item(shell32,\ \textcolor{stringliteral}{"{}SHCreateItemFromParsingName"{}});}
\DoxyCodeLine{01453\ }
\DoxyCodeLine{01454\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!create\_item)}
\DoxyCodeLine{01455\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01456\ }
\DoxyCodeLine{01457\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ hr\ =\ create\_item(m\_wdefault\_path.c\_str(),}
\DoxyCodeLine{01458\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{nullptr},}
\DoxyCodeLine{01459\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IID\_PPV\_ARGS(\&folder));}
\DoxyCodeLine{01460\ }
\DoxyCodeLine{01461\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ default\ folder\ if\ found.\ This\ only\ sets\ the\ default\ folder.\ If}}
\DoxyCodeLine{01462\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Windows\ has\ any\ info\ about\ the\ most\ recently\ selected\ folder,\ it}}
\DoxyCodeLine{01463\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ will\ display\ it\ instead.\ Generally,\ calling\ SetFolder()\ to\ set\ the}}
\DoxyCodeLine{01464\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ current\ directory\ “is\ not\ a\ good\ or\ expected\ user\ experience\ and}}
\DoxyCodeLine{01465\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ should\ therefore\ be\ avoided”:}}
\DoxyCodeLine{01466\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ https://docs.microsoft.com/windows/win32/api/shobjidl\_core/nf-\/shobjidl\_core-\/ifiledialog-\/setfolder}}
\DoxyCodeLine{01467\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (SUCCEEDED(hr))}
\DoxyCodeLine{01468\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01469\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a51106d57377a72da5f9a0415f4f6142b}{force\_path}})}
\DoxyCodeLine{01470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ifd-\/>SetFolder(folder);}
\DoxyCodeLine{01471\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01472\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ifd-\/>SetDefaultFolder(folder);}
\DoxyCodeLine{01473\ \ \ \ \ \ \ \ \ \ \ \ \ folder-\/>Release();}
\DoxyCodeLine{01474\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01475\ }
\DoxyCodeLine{01476\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Set\ the\ dialog\ title\ and\ option\ to\ select\ folders}}
\DoxyCodeLine{01477\ \ \ \ \ \ \ \ \ ifd-\/>SetOptions(FOS\_PICKFOLDERS\ |\ FOS\_FORCEFILESYSTEM);}
\DoxyCodeLine{01478\ \ \ \ \ \ \ \ \ ifd-\/>SetTitle(m\_wtitle.c\_str());}
\DoxyCodeLine{01479\ }
\DoxyCodeLine{01480\ \ \ \ \ \ \ \ \ hr\ =\ ifd-\/>Show(GetActiveWindow());}
\DoxyCodeLine{01481\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (SUCCEEDED(hr))}
\DoxyCodeLine{01482\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01483\ \ \ \ \ \ \ \ \ \ \ \ \ IShellItem*\ item;}
\DoxyCodeLine{01484\ \ \ \ \ \ \ \ \ \ \ \ \ hr\ =\ ifd-\/>GetResult(\&item);}
\DoxyCodeLine{01485\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (SUCCEEDED(hr))}
\DoxyCodeLine{01486\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{wchar\_t}*\ wname\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ unlikely\ to\ fail\ because\ we\ use\ FOS\_FORCEFILESYSTEM,\ but\ try}}
\DoxyCodeLine{01489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ output\ a\ debug\ message\ just\ in\ case.}}
\DoxyCodeLine{01490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (SUCCEEDED(item-\/>GetDisplayName(SIGDN\_FILESYSPATH,\ \&wname)))}
\DoxyCodeLine{01491\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ internal::wstr2str(std::wstring(wname));}
\DoxyCodeLine{01493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dll::proc<void\ WINAPI(LPVOID)>(ole32\_dll(),\ \textcolor{stringliteral}{"{}CoTaskMemFree"{}})(wname);}
\DoxyCodeLine{01494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (SUCCEEDED(item-\/>GetDisplayName(SIGDN\_NORMALDISPLAY,\ \&wname)))}
\DoxyCodeLine{01498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ name\ =\ internal::wstr2str(std::wstring(wname));}
\DoxyCodeLine{01500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dll::proc<void\ WINAPI(LPVOID)>(ole32\_dll(),\ \textcolor{stringliteral}{"{}CoTaskMemFree"{}})(wname);}
\DoxyCodeLine{01501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}pfd:\ failed\ to\ get\ path\ for\ "{}}\ <<\ name\ <<\ std::endl;}
\DoxyCodeLine{01502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01503\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}pfd:\ item\ of\ unknown\ type\ selected"{}}\ <<\ std::endl;}
\DoxyCodeLine{01505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01506\ }
\DoxyCodeLine{01507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ item-\/>Release();}
\DoxyCodeLine{01508\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01509\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01510\ }
\DoxyCodeLine{01511\ \ \ \ \ \ \ \ \ ifd-\/>Release();}
\DoxyCodeLine{01512\ }
\DoxyCodeLine{01513\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{01514\ \ \ \ \ \}}
\DoxyCodeLine{01515\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01516\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01517\ }
\DoxyCodeLine{01518\ \ \ \ \ \textcolor{comment}{//\ notify\ implementation}}
\DoxyCodeLine{01519\ }
\DoxyCodeLine{01520\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classpfd_1_1notify_a64f87055f567ed5720a357b6844eccb7}{notify::notify}}(std::string\ \textcolor{keyword}{const}\&\ title,}
\DoxyCodeLine{01521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \mbox{\hyperlink{classpfd_1_1message}{message}},}
\DoxyCodeLine{01522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85}{icon}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_icon\ \textcolor{comment}{/*\ =\ icon::info\ */})}
\DoxyCodeLine{01523\ \ \ \ \ \{}
\DoxyCodeLine{01524\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_icon\ ==\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a5494af1f14a8c19939968c3e9e2d4f79}{icon::question}})\ \textcolor{comment}{//\ Not\ supported\ by\ notifications}}
\DoxyCodeLine{01525\ \ \ \ \ \ \ \ \ \ \ \ \ \_icon\ =\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acaf9b6b99962bf5c2264824231d7a40c}{icon::info}};}
\DoxyCodeLine{01526\ }
\DoxyCodeLine{01527\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{01528\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ a\ static\ shared\ pointer\ for\ notify\_icon\ so\ that\ we\ can\ delete}}
\DoxyCodeLine{01529\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ it\ whenever\ we\ need\ to\ display\ a\ new\ one,\ and\ we\ can\ also\ wait}}
\DoxyCodeLine{01530\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ until\ the\ program\ has\ finished\ running.}}
\DoxyCodeLine{01531\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }notify\_icon\_data\ :\ \textcolor{keyword}{public}\ NOTIFYICONDATAW}
\DoxyCodeLine{01532\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01533\ \ \ \ \ \ \ \ \ \ \ \ \ \string~notify\_icon\_data()}
\DoxyCodeLine{01534\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01535\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Shell\_NotifyIconW(NIM\_DELETE,\ \textcolor{keyword}{this});}
\DoxyCodeLine{01536\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01537\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{01538\ }
\DoxyCodeLine{01539\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ std::shared\_ptr<notify\_icon\_data>\ nid;}
\DoxyCodeLine{01540\ }
\DoxyCodeLine{01541\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Release\ the\ previous\ notification\ icon,\ if\ any,\ and\ allocate\ a\ new}}
\DoxyCodeLine{01542\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ one.\ Note\ that\ std::make\_shared()\ does\ value\ initialization,\ so\ there}}
\DoxyCodeLine{01543\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ is\ no\ need\ to\ memset\ the\ structure.}}
\DoxyCodeLine{01544\ \ \ \ \ \ \ \ \ nid\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01545\ \ \ \ \ \ \ \ \ nid\ =\ std::make\_shared<notify\_icon\_data>();}
\DoxyCodeLine{01546\ }
\DoxyCodeLine{01547\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ For\ XP\ support}}
\DoxyCodeLine{01548\ \ \ \ \ \ \ \ \ nid-\/>cbSize\ =\ NOTIFYICONDATAW\_V2\_SIZE;}
\DoxyCodeLine{01549\ \ \ \ \ \ \ \ \ nid-\/>hWnd\ \ \ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{01550\ \ \ \ \ \ \ \ \ nid-\/>uID\ \ \ \ =\ 0;}
\DoxyCodeLine{01551\ }
\DoxyCodeLine{01552\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Flag\ Description:}}
\DoxyCodeLine{01553\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIF\_ICON\ \ \ \ The\ hIcon\ member\ is\ valid.}}
\DoxyCodeLine{01554\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIF\_MESSAGE\ The\ uCallbackMessage\ member\ is\ valid.}}
\DoxyCodeLine{01555\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIF\_TIP\ \ \ \ \ The\ szTip\ member\ is\ valid.}}
\DoxyCodeLine{01556\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIF\_STATE\ \ \ The\ dwState\ and\ dwStateMask\ members\ are\ valid.}}
\DoxyCodeLine{01557\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIF\_INFO\ \ \ \ Use\ a\ balloon\ ToolTip\ instead\ of\ a\ standard\ ToolTip.\ The\ szInfo,\ uTimeout,\ szInfoTitle,\ and\ dwInfoFlags\ members\ are\ valid.}}
\DoxyCodeLine{01558\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIF\_GUID\ \ \ \ Reserved.}}
\DoxyCodeLine{01559\ \ \ \ \ \ \ \ \ nid-\/>uFlags\ =\ NIF\_MESSAGE\ |\ NIF\_ICON\ |\ NIF\_INFO;}
\DoxyCodeLine{01560\ }
\DoxyCodeLine{01561\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Flag\ Description}}
\DoxyCodeLine{01562\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIIF\_ERROR\ \ \ \ \ An\ error\ icon.}}
\DoxyCodeLine{01563\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIIF\_INFO\ \ \ \ \ \ An\ information\ icon.}}
\DoxyCodeLine{01564\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIIF\_NONE\ \ \ \ \ \ No\ icon.}}
\DoxyCodeLine{01565\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIIF\_WARNING\ \ \ A\ warning\ icon.}}
\DoxyCodeLine{01566\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIIF\_ICON\_MASK\ Version\ 6.0.\ Reserved.}}
\DoxyCodeLine{01567\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ -\/\ NIIF\_NOSOUND\ \ \ Version\ 6.0.\ Do\ not\ play\ the\ associated\ sound.\ Applies\ only\ to\ balloon\ ToolTips}}
\DoxyCodeLine{01568\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_icon)}
\DoxyCodeLine{01569\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01570\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a7b83d3f08fa392b79e3f553b585971cd}{icon::warning}}:}
\DoxyCodeLine{01571\ \ \ \ \ \ \ \ \ \ \ \ \ nid-\/>dwInfoFlags\ =\ NIIF\_WARNING;}
\DoxyCodeLine{01572\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01573\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acb5e100e5a9a3e7f6d1fd97512215282}{icon::error}}:}
\DoxyCodeLine{01574\ \ \ \ \ \ \ \ \ \ \ \ \ nid-\/>dwInfoFlags\ =\ NIIF\_ERROR;}
\DoxyCodeLine{01575\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01576\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ case\ icon::info:\ */}\ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01577\ \ \ \ \ \ \ \ \ \ \ \ \ nid-\/>dwInfoFlags\ =\ NIIF\_INFO;}
\DoxyCodeLine{01578\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01579\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01580\ }
\DoxyCodeLine{01581\ \ \ \ \ \ \ \ \ ENUMRESNAMEPROC\ icon\_enum\_callback\ =\ [](HMODULE,\ LPCTSTR,\ LPTSTR\ lpName,\ LONG\_PTR\ lParam)\ -\/>\ \mbox{\hyperlink{ddk_8h_ae4cc35dcc70810fa972cc8a5185a28fa}{BOOL}}\ \{}
\DoxyCodeLine{01582\ \ \ \ \ \ \ \ \ \ \ \ \ ((NOTIFYICONDATAW*)lParam)-\/>hIcon\ =\ ::LoadIcon(GetModuleHandle(\textcolor{keyword}{nullptr}),\ lpName);}
\DoxyCodeLine{01583\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{01584\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{01585\ }
\DoxyCodeLine{01586\ \ \ \ \ \ \ \ \ nid-\/>hIcon\ =\ ::LoadIcon(\textcolor{keyword}{nullptr},\ IDI\_APPLICATION);}
\DoxyCodeLine{01587\ \ \ \ \ \ \ \ \ ::EnumResourceNames(\textcolor{keyword}{nullptr},\ RT\_GROUP\_ICON,\ icon\_enum\_callback,\ (LONG\_PTR)nid.get());}
\DoxyCodeLine{01588\ }
\DoxyCodeLine{01589\ \ \ \ \ \ \ \ \ nid-\/>uTimeout\ =\ 5000;}
\DoxyCodeLine{01590\ }
\DoxyCodeLine{01591\ \ \ \ \ \ \ \ \ StringCchCopyW(nid-\/>szInfoTitle,\ ARRAYSIZE(nid-\/>szInfoTitle),\ internal::str2wstr(title).c\_str());}
\DoxyCodeLine{01592\ \ \ \ \ \ \ \ \ StringCchCopyW(nid-\/>szInfo,\ ARRAYSIZE(nid-\/>szInfo),\ internal::str2wstr(\mbox{\hyperlink{classpfd_1_1message}{message}}).c\_str());}
\DoxyCodeLine{01593\ }
\DoxyCodeLine{01594\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Display\ the\ new\ icon}}
\DoxyCodeLine{01595\ \ \ \ \ \ \ \ \ Shell\_NotifyIconW(NIM\_ADD,\ nid.get());}
\DoxyCodeLine{01596\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_}}
\DoxyCodeLine{01597\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ FIXME:\ do\ something}}
\DoxyCodeLine{01598\ \ \ \ \ \ \ \ \ (void)title;}
\DoxyCodeLine{01599\ \ \ \ \ \ \ \ \ (void)\mbox{\hyperlink{classpfd_1_1message}{message}};}
\DoxyCodeLine{01600\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01601\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ command\ =\ desktop\_helper();}
\DoxyCodeLine{01602\ }
\DoxyCodeLine{01603\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_osascript())}
\DoxyCodeLine{01604\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01605\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/e"{}});}
\DoxyCodeLine{01606\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}display\ notification\ "{}}\ +\ osascript\_quote(\mbox{\hyperlink{classpfd_1_1message}{message}})\ +}
\DoxyCodeLine{01607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ with\ title\ "{}}\ +\ osascript\_quote(title));}
\DoxyCodeLine{01608\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01609\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (is\_zenity())}
\DoxyCodeLine{01610\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01611\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/notification"{}});}
\DoxyCodeLine{01612\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/window-\/icon"{}});}
\DoxyCodeLine{01613\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(get\_icon\_name(\_icon));}
\DoxyCodeLine{01614\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/text"{}});}
\DoxyCodeLine{01615\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(title\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}\ +\ \mbox{\hyperlink{classpfd_1_1message}{message}});}
\DoxyCodeLine{01616\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01617\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (is\_kdialog())}
\DoxyCodeLine{01618\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01619\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/icon"{}});}
\DoxyCodeLine{01620\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(get\_icon\_name(\_icon));}
\DoxyCodeLine{01621\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/title"{}});}
\DoxyCodeLine{01622\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(title);}
\DoxyCodeLine{01623\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/passivepopup"{}});}
\DoxyCodeLine{01624\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\mbox{\hyperlink{classpfd_1_1message}{message}});}
\DoxyCodeLine{01625\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}5"{}});}
\DoxyCodeLine{01626\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01627\ }
\DoxyCodeLine{01628\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (flags(flag::is\_verbose))}
\DoxyCodeLine{01629\ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}pfd:\ "{}}\ <<\ command\ <<\ std::endl;}
\DoxyCodeLine{01630\ }
\DoxyCodeLine{01631\ \ \ \ \ \ \ \ \ m\_async-\/>start\_process(command);}
\DoxyCodeLine{01632\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01633\ \ \ \ \ \}}
\DoxyCodeLine{01634\ }
\DoxyCodeLine{01635\ \ \ \ \ \textcolor{comment}{//\ message\ implementation}}
\DoxyCodeLine{01636\ }
\DoxyCodeLine{01637\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classpfd_1_1message_a38e0ce9a58c006011708a4968be17833}{message::message}}(std::string\ \textcolor{keyword}{const}\&\ title,}
\DoxyCodeLine{01638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ text,}
\DoxyCodeLine{01639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8}{choice}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_choice\ \textcolor{comment}{/*\ =\ choice::ok\_cancel\ */},}
\DoxyCodeLine{01640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85}{icon}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_icon\ \textcolor{comment}{/*\ =\ icon::info\ */})}
\DoxyCodeLine{01641\ \ \ \ \ \{}
\DoxyCodeLine{01642\ \textcolor{preprocessor}{\#if\ \_WIN32}}
\DoxyCodeLine{01643\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ MB\_SYSTEMMODAL\ rather\ than\ MB\_TOPMOST\ to\ ensure\ the\ message\ window\ is\ brought}}
\DoxyCodeLine{01644\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ front.\ See\ https://github.com/samhocevar/portable-\/file-\/dialogs/issues/52}}
\DoxyCodeLine{01645\ \ \ \ \ \ \ \ \ UINT\ style\ =\ MB\_SYSTEMMODAL;}
\DoxyCodeLine{01646\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_icon)}
\DoxyCodeLine{01647\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01648\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a7b83d3f08fa392b79e3f553b585971cd}{icon::warning}}:}
\DoxyCodeLine{01649\ \ \ \ \ \ \ \ \ \ \ \ \ style\ |=\ MB\_ICONWARNING;}
\DoxyCodeLine{01650\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01651\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acb5e100e5a9a3e7f6d1fd97512215282}{icon::error}}:}
\DoxyCodeLine{01652\ \ \ \ \ \ \ \ \ \ \ \ \ style\ |=\ MB\_ICONERROR;}
\DoxyCodeLine{01653\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01654\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a5494af1f14a8c19939968c3e9e2d4f79}{icon::question}}:}
\DoxyCodeLine{01655\ \ \ \ \ \ \ \ \ \ \ \ \ style\ |=\ MB\_ICONQUESTION;}
\DoxyCodeLine{01656\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01657\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ case\ icon::info:\ */}\ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01658\ \ \ \ \ \ \ \ \ \ \ \ \ style\ |=\ MB\_ICONINFORMATION;}
\DoxyCodeLine{01659\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01660\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01661\ }
\DoxyCodeLine{01662\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_choice)}
\DoxyCodeLine{01663\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01664\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a809da5df9c86c6426c8d8db2934d3f51}{choice::ok\_cancel}}:}
\DoxyCodeLine{01665\ \ \ \ \ \ \ \ \ \ \ \ \ style\ |=\ MB\_OKCANCEL;}
\DoxyCodeLine{01666\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01667\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a20f0596c21ad67a7fda598ffc7d038d1}{choice::yes\_no}}:}
\DoxyCodeLine{01668\ \ \ \ \ \ \ \ \ \ \ \ \ style\ |=\ MB\_YESNO;}
\DoxyCodeLine{01669\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01670\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a5c5cb337bb234e240912dc139048038c}{choice::yes\_no\_cancel}}:}
\DoxyCodeLine{01671\ \ \ \ \ \ \ \ \ \ \ \ \ style\ |=\ MB\_YESNOCANCEL;}
\DoxyCodeLine{01672\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01673\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a7928e609b1665227bcb71b20d431fd6a}{choice::retry\_cancel}}:}
\DoxyCodeLine{01674\ \ \ \ \ \ \ \ \ \ \ \ \ style\ |=\ MB\_RETRYCANCEL;}
\DoxyCodeLine{01675\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01676\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a9df771aa8f010c4b928e42a8979d5609}{choice::abort\_retry\_ignore}}:}
\DoxyCodeLine{01677\ \ \ \ \ \ \ \ \ \ \ \ \ style\ |=\ MB\_ABORTRETRYIGNORE;}
\DoxyCodeLine{01678\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01679\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ case\ choice::ok:\ */}\ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01680\ \ \ \ \ \ \ \ \ \ \ \ \ style\ |=\ MB\_OK;}
\DoxyCodeLine{01681\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01682\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01683\ }
\DoxyCodeLine{01684\ \ \ \ \ \ \ \ \ m\_mappings[IDCANCEL]\ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a10aec35353f9c4096a71c38654c3d402}{button::cancel}};}
\DoxyCodeLine{01685\ \ \ \ \ \ \ \ \ m\_mappings[IDOK]\ \ \ \ \ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a444bcb3a3fcf8389296c49467f27e1d6}{button::ok}};}
\DoxyCodeLine{01686\ \ \ \ \ \ \ \ \ m\_mappings[IDYES]\ \ \ \ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679aa6105c0a611b41b08f1209506350279e}{button::yes}};}
\DoxyCodeLine{01687\ \ \ \ \ \ \ \ \ m\_mappings[IDNO]\ \ \ \ \ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a7fa3b767c460b54a2be4d49030b349c7}{button::no}};}
\DoxyCodeLine{01688\ \ \ \ \ \ \ \ \ m\_mappings[IDABORT]\ \ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a5bb94a1c12413a2e5d14deabab29f2aa}{button::abort}};}
\DoxyCodeLine{01689\ \ \ \ \ \ \ \ \ m\_mappings[IDRETRY]\ \ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a165e6d21e0a2cc9ebb32ca05f90e0fa7}{button::retry}};}
\DoxyCodeLine{01690\ \ \ \ \ \ \ \ \ m\_mappings[IDIGNORE]\ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a567bc1d268f135496de3d5b946b691f3}{button::ignore}};}
\DoxyCodeLine{01691\ }
\DoxyCodeLine{01692\ \ \ \ \ \ \ \ \ m\_async-\/>start\_func([text,\ title,\ style](\textcolor{keywordtype}{int}*\ exit\_code)\ -\/>\ std::string\ \{}
\DoxyCodeLine{01693\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ wtext\ \ =\ internal::str2wstr(text);}
\DoxyCodeLine{01694\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ wtitle\ =\ internal::str2wstr(title);}
\DoxyCodeLine{01695\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Apply\ new\ visual\ style\ (required\ for\ all\ Windows\ versions)}}
\DoxyCodeLine{01696\ \ \ \ \ \ \ \ \ \ \ \ \ new\_style\_context\ ctx;}
\DoxyCodeLine{01697\ \ \ \ \ \ \ \ \ \ \ \ \ *exit\_code\ =\ MessageBoxW(GetActiveWindow(),\ wtext.c\_str(),\ wtitle.c\_str(),\ style);}
\DoxyCodeLine{01698\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{01699\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{01700\ }
\DoxyCodeLine{01701\ \textcolor{preprocessor}{\#elif\ \_\_EMSCRIPTEN\_\_}}
\DoxyCodeLine{01702\ \ \ \ \ \ \ \ \ std::string\ full\_message;}
\DoxyCodeLine{01703\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_icon)}
\DoxyCodeLine{01704\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01705\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a7b83d3f08fa392b79e3f553b585971cd}{icon::warning}}:}
\DoxyCodeLine{01706\ \ \ \ \ \ \ \ \ \ \ \ \ full\_message\ =\ \textcolor{stringliteral}{"{}⚠️"{}};}
\DoxyCodeLine{01707\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01708\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acb5e100e5a9a3e7f6d1fd97512215282}{icon::error}}:}
\DoxyCodeLine{01709\ \ \ \ \ \ \ \ \ \ \ \ \ full\_message\ =\ \textcolor{stringliteral}{"{}⛔"{}};}
\DoxyCodeLine{01710\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01711\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a5494af1f14a8c19939968c3e9e2d4f79}{icon::question}}:}
\DoxyCodeLine{01712\ \ \ \ \ \ \ \ \ \ \ \ \ full\_message\ =\ \textcolor{stringliteral}{"{}❓"{}};}
\DoxyCodeLine{01713\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01714\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ case\ icon::info:\ */}\ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01715\ \ \ \ \ \ \ \ \ \ \ \ \ full\_message\ =\ \textcolor{stringliteral}{"{}ℹ"{}};}
\DoxyCodeLine{01716\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01717\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01718\ }
\DoxyCodeLine{01719\ \ \ \ \ \ \ \ \ full\_message\ +=\ \textcolor{charliteral}{'\ '}\ +\ title\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n"{}}\ +\ text;}
\DoxyCodeLine{01720\ }
\DoxyCodeLine{01721\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ does\ not\ really\ start\ an\ async\ task;\ it\ just\ passes\ the}}
\DoxyCodeLine{01722\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ EM\_ASM\_INT\ return\ value\ to\ a\ fake\ start()\ function.}}
\DoxyCodeLine{01723\ \ \ \ \ \ \ \ \ m\_async-\/>start(EM\_ASM\_INT(}
\DoxyCodeLine{01724\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\$1)}
\DoxyCodeLine{01726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ window.confirm(UTF8ToString(\$0))\ ?\ 0\ :\ -\/1;}
\DoxyCodeLine{01727\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ alert(UTF8ToString(\$0));}
\DoxyCodeLine{01728\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{01729\ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{01730\ \ \ \ \ \ \ \ \ \ \ \ \ full\_message.c\_str(),\ \_choice\ ==\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a809da5df9c86c6426c8d8db2934d3f51}{choice::ok\_cancel}}));}
\DoxyCodeLine{01731\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{01732\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ command\ =\ desktop\_helper();}
\DoxyCodeLine{01733\ }
\DoxyCodeLine{01734\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_osascript())}
\DoxyCodeLine{01735\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01736\ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ script\ =\ \textcolor{stringliteral}{"{}display\ dialog\ "{}}\ +\ osascript\_quote(text)\ +}
\DoxyCodeLine{01737\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ with\ title\ "{}}\ +\ osascript\_quote(title);}
\DoxyCodeLine{01738\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ if\_cancel\ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a10aec35353f9c4096a71c38654c3d402}{button::cancel}};}
\DoxyCodeLine{01739\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_choice)}
\DoxyCodeLine{01740\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01741\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a809da5df9c86c6426c8d8db2934d3f51}{choice::ok\_cancel}}:}
\DoxyCodeLine{01742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}buttons\ \{\(\backslash\)"{}OK\(\backslash\)"{},\ \(\backslash\)"{}Cancel\(\backslash\)"{}\}"{}}}
\DoxyCodeLine{01743\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ default\ button\ \(\backslash\)"{}OK\(\backslash\)"{}"{}}}
\DoxyCodeLine{01744\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ cancel\ button\ \(\backslash\)"{}Cancel\(\backslash\)"{}"{}};}
\DoxyCodeLine{01745\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01746\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a20f0596c21ad67a7fda598ffc7d038d1}{choice::yes\_no}}:}
\DoxyCodeLine{01747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}buttons\ \{\(\backslash\)"{}Yes\(\backslash\)"{},\ \(\backslash\)"{}No\(\backslash\)"{}\}"{}}}
\DoxyCodeLine{01748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ default\ button\ \(\backslash\)"{}Yes\(\backslash\)"{}"{}}}
\DoxyCodeLine{01749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ cancel\ button\ \(\backslash\)"{}No\(\backslash\)"{}"{}};}
\DoxyCodeLine{01750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\_cancel\ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a7fa3b767c460b54a2be4d49030b349c7}{button::no}};}
\DoxyCodeLine{01751\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01752\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a5c5cb337bb234e240912dc139048038c}{choice::yes\_no\_cancel}}:}
\DoxyCodeLine{01753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}buttons\ \{\(\backslash\)"{}Yes\(\backslash\)"{},\ \(\backslash\)"{}No\(\backslash\)"{},\ \(\backslash\)"{}Cancel\(\backslash\)"{}\}"{}}}
\DoxyCodeLine{01754\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ default\ button\ \(\backslash\)"{}Yes\(\backslash\)"{}"{}}}
\DoxyCodeLine{01755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ cancel\ button\ \(\backslash\)"{}Cancel\(\backslash\)"{}"{}};}
\DoxyCodeLine{01756\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01757\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a7928e609b1665227bcb71b20d431fd6a}{choice::retry\_cancel}}:}
\DoxyCodeLine{01758\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}buttons\ \{\(\backslash\)"{}Retry\(\backslash\)"{},\ \(\backslash\)"{}Cancel\(\backslash\)"{}\}"{}}}
\DoxyCodeLine{01759\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ default\ button\ \(\backslash\)"{}Retry\(\backslash\)"{}"{}}}
\DoxyCodeLine{01760\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ cancel\ button\ \(\backslash\)"{}Cancel\(\backslash\)"{}"{}};}
\DoxyCodeLine{01761\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01762\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a9df771aa8f010c4b928e42a8979d5609}{choice::abort\_retry\_ignore}}:}
\DoxyCodeLine{01763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}buttons\ \{\(\backslash\)"{}Abort\(\backslash\)"{},\ \(\backslash\)"{}Retry\(\backslash\)"{},\ \(\backslash\)"{}Ignore\(\backslash\)"{}\}"{}}}
\DoxyCodeLine{01764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ default\ button\ \(\backslash\)"{}Abort\(\backslash\)"{}"{}}}
\DoxyCodeLine{01765\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ cancel\ button\ \(\backslash\)"{}Retry\(\backslash\)"{}"{}};}
\DoxyCodeLine{01766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\_cancel\ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a165e6d21e0a2cc9ebb32ca05f90e0fa7}{button::retry}};}
\DoxyCodeLine{01767\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01768\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a444bcb3a3fcf8389296c49467f27e1d6}{choice::ok}}:}
\DoxyCodeLine{01769\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01770\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}buttons\ \{\(\backslash\)"{}OK\(\backslash\)"{}\}"{}}}
\DoxyCodeLine{01771\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ default\ button\ \(\backslash\)"{}OK\(\backslash\)"{}"{}}}
\DoxyCodeLine{01772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\ cancel\ button\ \(\backslash\)"{}OK\(\backslash\)"{}"{}};}
\DoxyCodeLine{01773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\_cancel\ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a444bcb3a3fcf8389296c49467f27e1d6}{button::ok}};}
\DoxyCodeLine{01774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01775\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01776\ \ \ \ \ \ \ \ \ \ \ \ \ m\_mappings[1]\ =\ if\_cancel;}
\DoxyCodeLine{01777\ \ \ \ \ \ \ \ \ \ \ \ \ m\_mappings[256]\ =\ if\_cancel;\ \textcolor{comment}{//\ XXX:\ I\ think\ this\ was\ never\ correct}}
\DoxyCodeLine{01778\ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}\ with\ icon\ "{}};}
\DoxyCodeLine{01779\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_icon)}
\DoxyCodeLine{01780\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01781\ \textcolor{preprocessor}{\#define\ PFD\_OSX\_ICON(n)\ "{}alias\ ((path\ to\ library\ folder\ from\ system\ domain)\ as\ text\ "{}\ \(\backslash\)}}
\DoxyCodeLine{01782\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}\&\ \(\backslash\)"{}CoreServices:CoreTypes.bundle:Contents:Resources:"{}\ n\ "{}.icns\(\backslash\)"{})"{}}}
\DoxyCodeLine{01783\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acaf9b6b99962bf5c2264824231d7a40c}{icon::info}}:}
\DoxyCodeLine{01784\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \mbox{\hyperlink{_dialogs_8h_a0851d0adb9dc3b40d5c9961d6325ca33}{PFD\_OSX\_ICON}}(\textcolor{stringliteral}{"{}ToolBarInfo"{}});}
\DoxyCodeLine{01786\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01787\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a7b83d3f08fa392b79e3f553b585971cd}{icon::warning}}:}
\DoxyCodeLine{01788\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}caution"{}};}
\DoxyCodeLine{01789\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01790\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acb5e100e5a9a3e7f6d1fd97512215282}{icon::error}}:}
\DoxyCodeLine{01791\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \textcolor{stringliteral}{"{}stop"{}};}
\DoxyCodeLine{01792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01793\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a5494af1f14a8c19939968c3e9e2d4f79}{icon::question}}:}
\DoxyCodeLine{01794\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ script\ +=\ \mbox{\hyperlink{_dialogs_8h_a0851d0adb9dc3b40d5c9961d6325ca33}{PFD\_OSX\_ICON}}(\textcolor{stringliteral}{"{}GenericQuestionMarkIcon"{}});}
\DoxyCodeLine{01795\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01796\ \textcolor{preprocessor}{\#undef\ PFD\_OSX\_ICON}}
\DoxyCodeLine{01797\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01798\ }
\DoxyCodeLine{01799\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/e"{}});}
\DoxyCodeLine{01800\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(script);}
\DoxyCodeLine{01801\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01802\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (is\_zenity())}
\DoxyCodeLine{01803\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01804\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_choice)}
\DoxyCodeLine{01805\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01806\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a809da5df9c86c6426c8d8db2934d3f51}{choice::ok\_cancel}}:}
\DoxyCodeLine{01807\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.insert(command.end(),\ \{\textcolor{stringliteral}{"{}-\/-\/question"{}},\ \textcolor{stringliteral}{"{}-\/-\/cancel-\/label=Cancel"{}},\ \textcolor{stringliteral}{"{}-\/-\/ok-\/label=OK"{}}\});}
\DoxyCodeLine{01808\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01809\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a20f0596c21ad67a7fda598ffc7d038d1}{choice::yes\_no}}:}
\DoxyCodeLine{01810\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Do\ not\ use\ standard\ -\/-\/question\ because\ it\ causes\ “No”\ to\ return\ -\/1,}}
\DoxyCodeLine{01811\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ which\ is\ inconsistent\ with\ the\ “Yes/No/Cancel”\ mode\ below.}}
\DoxyCodeLine{01812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.insert(command.end(),\ \{\textcolor{stringliteral}{"{}-\/-\/question"{}},\ \textcolor{stringliteral}{"{}-\/-\/switch"{}},\ \textcolor{stringliteral}{"{}-\/-\/extra-\/button=No"{}},\ \textcolor{stringliteral}{"{}-\/-\/extra-\/button=Yes"{}}\});}
\DoxyCodeLine{01813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01814\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a5c5cb337bb234e240912dc139048038c}{choice::yes\_no\_cancel}}:}
\DoxyCodeLine{01815\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.insert(command.end(),\ \{\textcolor{stringliteral}{"{}-\/-\/question"{}},\ \textcolor{stringliteral}{"{}-\/-\/switch"{}},\ \textcolor{stringliteral}{"{}-\/-\/extra-\/button=Cancel"{}},\ \textcolor{stringliteral}{"{}-\/-\/extra-\/button=No"{}},\ \textcolor{stringliteral}{"{}-\/-\/extra-\/button=Yes"{}}\});}
\DoxyCodeLine{01816\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01817\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a7928e609b1665227bcb71b20d431fd6a}{choice::retry\_cancel}}:}
\DoxyCodeLine{01818\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.insert(command.end(),\ \{\textcolor{stringliteral}{"{}-\/-\/question"{}},\ \textcolor{stringliteral}{"{}-\/-\/switch"{}},\ \textcolor{stringliteral}{"{}-\/-\/extra-\/button=Cancel"{}},\ \textcolor{stringliteral}{"{}-\/-\/extra-\/button=Retry"{}}\});}
\DoxyCodeLine{01819\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01820\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a9df771aa8f010c4b928e42a8979d5609}{choice::abort\_retry\_ignore}}:}
\DoxyCodeLine{01821\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.insert(command.end(),\ \{\textcolor{stringliteral}{"{}-\/-\/question"{}},\ \textcolor{stringliteral}{"{}-\/-\/switch"{}},\ \textcolor{stringliteral}{"{}-\/-\/extra-\/button=Ignore"{}},\ \textcolor{stringliteral}{"{}-\/-\/extra-\/button=Abort"{}},\ \textcolor{stringliteral}{"{}-\/-\/extra-\/button=Retry"{}}\});}
\DoxyCodeLine{01822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01823\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a444bcb3a3fcf8389296c49467f27e1d6}{choice::ok}}:}
\DoxyCodeLine{01824\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_icon)}
\DoxyCodeLine{01826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acb5e100e5a9a3e7f6d1fd97512215282}{icon::error}}:}
\DoxyCodeLine{01828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/error"{}});}
\DoxyCodeLine{01829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01830\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a7b83d3f08fa392b79e3f553b585971cd}{icon::warning}}:}
\DoxyCodeLine{01831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/warning"{}});}
\DoxyCodeLine{01832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01834\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/info"{}});}
\DoxyCodeLine{01835\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01836\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01837\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01838\ }
\DoxyCodeLine{01839\ \ \ \ \ \ \ \ \ \ \ \ \ command.insert(command.end(),\ \{\textcolor{stringliteral}{"{}-\/-\/title"{}},\ title,}
\DoxyCodeLine{01840\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/width=300"{}},\ \textcolor{stringliteral}{"{}-\/-\/height=0"{}},\ \textcolor{comment}{//\ sensible\ defaults}}
\DoxyCodeLine{01841\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/no-\/markup"{}},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ do\ not\ interpret\ text\ as\ Pango\ markup}}
\DoxyCodeLine{01842\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/text"{}},\ text,}
\DoxyCodeLine{01843\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}-\/-\/icon-\/name=dialog-\/"{}}\ +\ get\_icon\_name(\_icon)\});}
\DoxyCodeLine{01844\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01845\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (is\_kdialog())}
\DoxyCodeLine{01846\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01847\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_choice\ ==\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a444bcb3a3fcf8389296c49467f27e1d6}{choice::ok}})}
\DoxyCodeLine{01848\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01849\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\_icon)}
\DoxyCodeLine{01850\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01851\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acb5e100e5a9a3e7f6d1fd97512215282}{icon::error}}:}
\DoxyCodeLine{01852\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/error"{}});}
\DoxyCodeLine{01853\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01854\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a7b83d3f08fa392b79e3f553b585971cd}{icon::warning}}:}
\DoxyCodeLine{01855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/sorry"{}});}
\DoxyCodeLine{01856\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01857\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/msgbox"{}});}
\DoxyCodeLine{01859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01860\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01861\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01862\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01863\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01864\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aad}{flag}}\ =\ \textcolor{stringliteral}{"{}-\/-\/"{}};}
\DoxyCodeLine{01865\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_icon\ ==\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85a7b83d3f08fa392b79e3f553b585971cd}{icon::warning}}\ ||\ \_icon\ ==\ \mbox{\hyperlink{namespacepfd_a96ff6709abe317ae8eff98d92bc8db85acb5e100e5a9a3e7f6d1fd97512215282}{icon::error}})}
\DoxyCodeLine{01866\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aad}{flag}}\ +=\ \textcolor{stringliteral}{"{}warning"{}};}
\DoxyCodeLine{01867\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aad}{flag}}\ +=\ \textcolor{stringliteral}{"{}yesno"{}};}
\DoxyCodeLine{01868\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_choice\ ==\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a5c5cb337bb234e240912dc139048038c}{choice::yes\_no\_cancel}})}
\DoxyCodeLine{01869\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aad}{flag}}\ +=\ \textcolor{stringliteral}{"{}cancel"{}};}
\DoxyCodeLine{01870\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\mbox{\hyperlink{classpfd_1_1settings_a61077e0fd48da6de7bb0f5dd9d9d1aad}{flag}});}
\DoxyCodeLine{01871\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_choice\ ==\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a20f0596c21ad67a7fda598ffc7d038d1}{choice::yes\_no}}\ ||\ \_choice\ ==\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a5c5cb337bb234e240912dc139048038c}{choice::yes\_no\_cancel}})}
\DoxyCodeLine{01872\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01873\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_mappings[0]\ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679aa6105c0a611b41b08f1209506350279e}{button::yes}};}
\DoxyCodeLine{01874\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_mappings[256]\ =\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a7fa3b767c460b54a2be4d49030b349c7}{button::no}};}
\DoxyCodeLine{01875\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01876\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01877\ }
\DoxyCodeLine{01878\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(text);}
\DoxyCodeLine{01879\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(\textcolor{stringliteral}{"{}-\/-\/title"{}});}
\DoxyCodeLine{01880\ \ \ \ \ \ \ \ \ \ \ \ \ command.push\_back(title);}
\DoxyCodeLine{01881\ }
\DoxyCodeLine{01882\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Must\ be\ after\ the\ above\ part}}
\DoxyCodeLine{01883\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_choice\ ==\ \mbox{\hyperlink{namespacepfd_a70b4c2a87aca3443a4de387bedae49e8a809da5df9c86c6426c8d8db2934d3f51}{choice::ok\_cancel}})}
\DoxyCodeLine{01884\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ command.insert(command.end(),\ \{\textcolor{stringliteral}{"{}-\/-\/yes-\/label"{}},\ \textcolor{stringliteral}{"{}OK"{}},\ \textcolor{stringliteral}{"{}-\/-\/no-\/label"{}},\ \textcolor{stringliteral}{"{}Cancel"{}}\});}
\DoxyCodeLine{01885\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01886\ }
\DoxyCodeLine{01887\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (flags(flag::is\_verbose))}
\DoxyCodeLine{01888\ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}pfd:\ "{}}\ <<\ command\ <<\ std::endl;}
\DoxyCodeLine{01889\ }
\DoxyCodeLine{01890\ \ \ \ \ \ \ \ \ m\_async-\/>start\_process(command);}
\DoxyCodeLine{01891\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01892\ \ \ \ \ \}}
\DoxyCodeLine{01893\ }
\DoxyCodeLine{01894\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679}{button}}\ \mbox{\hyperlink{classpfd_1_1message_aeee673bf19f45328a7eb8ec2c1e01fc9}{message::result}}()}
\DoxyCodeLine{01895\ \ \ \ \ \{}
\DoxyCodeLine{01896\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ exit\_code;}
\DoxyCodeLine{01897\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ ret\ =\ m\_async-\/>result(\&exit\_code);}
\DoxyCodeLine{01898\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ osascript\ will\ say\ "{}button\ returned:Cancel\(\backslash\)n"{}}}
\DoxyCodeLine{01899\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ and\ others\ will\ just\ say\ "{}Cancel\(\backslash\)n"{}}}
\DoxyCodeLine{01900\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (internal::ends\_with(ret,\ \textcolor{stringliteral}{"{}Cancel\(\backslash\)n"{}}))}
\DoxyCodeLine{01901\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a10aec35353f9c4096a71c38654c3d402}{button::cancel}};}
\DoxyCodeLine{01902\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (internal::ends\_with(ret,\ \textcolor{stringliteral}{"{}OK\(\backslash\)n"{}}))}
\DoxyCodeLine{01903\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a444bcb3a3fcf8389296c49467f27e1d6}{button::ok}};}
\DoxyCodeLine{01904\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (internal::ends\_with(ret,\ \textcolor{stringliteral}{"{}Yes\(\backslash\)n"{}}))}
\DoxyCodeLine{01905\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679aa6105c0a611b41b08f1209506350279e}{button::yes}};}
\DoxyCodeLine{01906\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (internal::ends\_with(ret,\ \textcolor{stringliteral}{"{}No\(\backslash\)n"{}}))}
\DoxyCodeLine{01907\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a7fa3b767c460b54a2be4d49030b349c7}{button::no}};}
\DoxyCodeLine{01908\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (internal::ends\_with(ret,\ \textcolor{stringliteral}{"{}Abort\(\backslash\)n"{}}))}
\DoxyCodeLine{01909\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a5bb94a1c12413a2e5d14deabab29f2aa}{button::abort}};}
\DoxyCodeLine{01910\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (internal::ends\_with(ret,\ \textcolor{stringliteral}{"{}Retry\(\backslash\)n"{}}))}
\DoxyCodeLine{01911\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a165e6d21e0a2cc9ebb32ca05f90e0fa7}{button::retry}};}
\DoxyCodeLine{01912\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (internal::ends\_with(ret,\ \textcolor{stringliteral}{"{}Ignore\(\backslash\)n"{}}))}
\DoxyCodeLine{01913\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a567bc1d268f135496de3d5b946b691f3}{button::ignore}};}
\DoxyCodeLine{01914\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_mappings.count(exit\_code)\ !=\ 0)}
\DoxyCodeLine{01915\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_mappings[exit\_code];}
\DoxyCodeLine{01916\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ exit\_code\ ==\ 0\ ?\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a444bcb3a3fcf8389296c49467f27e1d6}{button::ok}}\ :\ \mbox{\hyperlink{namespacepfd_aad4fba5e0884b6d814006a7e92ade679a10aec35353f9c4096a71c38654c3d402}{button::cancel}};}
\DoxyCodeLine{01917\ \ \ \ \ \}}
\DoxyCodeLine{01918\ }
\DoxyCodeLine{01919\ \ \ \ \ \textcolor{comment}{//\ open\_file\ implementation}}
\DoxyCodeLine{01920\ }
\DoxyCodeLine{01921\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classpfd_1_1open__file_a014c40411d2f697f7ee827f0daf78559}{open\_file::open\_file}}(std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ title,}
\DoxyCodeLine{01922\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ default\_path\ \textcolor{comment}{/*\ =\ "{}"{}\ */},}
\DoxyCodeLine{01923\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \textcolor{keyword}{const}\&\ filters\ \textcolor{comment}{/*\ =\ \{\ "{}All\ Files"{},\ "{}*"{}\ \}\ */},}
\DoxyCodeLine{01924\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ options\ \textcolor{comment}{/*\ =\ opt::none\ */})}
\DoxyCodeLine{01925\ \ \ \ \ \ \ \ \ :\ file\_dialog(\mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_a758847a3fab54bb12a67abbf9ea683fc}{type}}::\mbox{\hyperlink{dev_8h_a4a97bf579d8dd726327a23ed36d594bf}{open}},\ title,\ default\_path,\ filters,\ options)}
\DoxyCodeLine{01926\ \ \ \ \ \{}
\DoxyCodeLine{01927\ \ \ \ \ \}}
\DoxyCodeLine{01928\ }
\DoxyCodeLine{01929\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classpfd_1_1open__file_a014c40411d2f697f7ee827f0daf78559}{open\_file::open\_file}}(std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ title,}
\DoxyCodeLine{01930\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ default\_path,}
\DoxyCodeLine{01931\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \textcolor{keyword}{const}\&\ filters,}
\DoxyCodeLine{01932\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ allow\_multiselect)}
\DoxyCodeLine{01933\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classpfd_1_1open__file}{open\_file}}(title,\ default\_path,\ filters,\ (allow\_multiselect\ ?\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}::\mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997ab66abfe0e0c2ef7c545895c12a0a8837}{multiselect}}\ :\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}::\mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a334c4a4c42fdb79d7ebc3e73b517e6f8}{none}}))}
\DoxyCodeLine{01934\ \ \ \ \ \{}
\DoxyCodeLine{01935\ \ \ \ \ \}}
\DoxyCodeLine{01936\ }
\DoxyCodeLine{01937\ \ \ \ \ \textcolor{keyword}{inline}\ std::vector<std::string>\ \mbox{\hyperlink{classpfd_1_1open__file_ad0f01c7de1fbb94343053c671ced8b0b}{open\_file::result}}()}
\DoxyCodeLine{01938\ \ \ \ \ \{}
\DoxyCodeLine{01939\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_ae28b6dd37ab4e47885ce7ca25652212b}{vector\_result}}();}
\DoxyCodeLine{01940\ \ \ \ \ \}}
\DoxyCodeLine{01941\ }
\DoxyCodeLine{01942\ \ \ \ \ \textcolor{comment}{//\ save\_file\ implementation}}
\DoxyCodeLine{01943\ }
\DoxyCodeLine{01944\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classpfd_1_1save__file_a47363d5412758115513dd1ca97f3d895}{save\_file::save\_file}}(std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ title,}
\DoxyCodeLine{01945\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ default\_path\ \textcolor{comment}{/*\ =\ "{}"{}\ */},}
\DoxyCodeLine{01946\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \textcolor{keyword}{const}\&\ filters\ \textcolor{comment}{/*\ =\ \{\ "{}All\ Files"{},\ "{}*"{}\ \}\ */},}
\DoxyCodeLine{01947\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ options\ \textcolor{comment}{/*\ =\ opt::none\ */})}
\DoxyCodeLine{01948\ \ \ \ \ \ \ \ \ :\ file\_dialog(\mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_a758847a3fab54bb12a67abbf9ea683fc}{type}}::save,\ title,\ default\_path,\ filters,\ options)}
\DoxyCodeLine{01949\ \ \ \ \ \{}
\DoxyCodeLine{01950\ \ \ \ \ \}}
\DoxyCodeLine{01951\ }
\DoxyCodeLine{01952\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classpfd_1_1save__file_a47363d5412758115513dd1ca97f3d895}{save\_file::save\_file}}(std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ title,}
\DoxyCodeLine{01953\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ default\_path,}
\DoxyCodeLine{01954\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::string>\ \textcolor{keyword}{const}\&\ filters,}
\DoxyCodeLine{01955\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ confirm\_overwrite)}
\DoxyCodeLine{01956\ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classpfd_1_1save__file}{save\_file}}(title,\ default\_path,\ filters,\ (confirm\_overwrite\ ?\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}::\mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a334c4a4c42fdb79d7ebc3e73b517e6f8}{none}}\ :\ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}::\mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997a8fc52a8161c68fcaeebdfdb500a36d4b}{force\_overwrite}}))}
\DoxyCodeLine{01957\ \ \ \ \ \{}
\DoxyCodeLine{01958\ \ \ \ \ \}}
\DoxyCodeLine{01959\ }
\DoxyCodeLine{01960\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{classpfd_1_1save__file_aefa58bfca841a51edb6a7ef2fa640904}{save\_file::result}}()}
\DoxyCodeLine{01961\ \ \ \ \ \{}
\DoxyCodeLine{01962\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_ac916440e9dcefba5cbd4f0e5bb8acbff}{string\_result}}();}
\DoxyCodeLine{01963\ \ \ \ \ \}}
\DoxyCodeLine{01964\ }
\DoxyCodeLine{01965\ \ \ \ \ \textcolor{comment}{//\ select\_folder\ implementation}}
\DoxyCodeLine{01966\ }
\DoxyCodeLine{01967\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classpfd_1_1select__folder_ac6611de7b07e4366ffd2442d22ae1924}{select\_folder::select\_folder}}(std::string\ \textcolor{keyword}{const}\&\ title,}
\DoxyCodeLine{01968\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ \textcolor{keyword}{const}\&\ default\_path\ \textcolor{comment}{/*\ =\ "{}"{}\ */},}
\DoxyCodeLine{01969\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacepfd_a1a482ccd57bb939dcbf7d9caacd3f997}{opt}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ options\ \textcolor{comment}{/*\ =\ opt::none\ */})}
\DoxyCodeLine{01970\ \ \ \ \ \ \ \ \ :\ file\_dialog(\mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_a758847a3fab54bb12a67abbf9ea683fc}{type}}::folder,\ title,\ default\_path,\ \{\},\ options)}
\DoxyCodeLine{01971\ \ \ \ \ \{}
\DoxyCodeLine{01972\ \ \ \ \ \}}
\DoxyCodeLine{01973\ }
\DoxyCodeLine{01974\ \ \ \ \ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{classpfd_1_1select__folder_aa0f0d69af6be6b2627bf02440a921765}{select\_folder::result}}()}
\DoxyCodeLine{01975\ \ \ \ \ \{}
\DoxyCodeLine{01976\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classpfd_1_1internal_1_1file__dialog_ac916440e9dcefba5cbd4f0e5bb8acbff}{string\_result}}();}
\DoxyCodeLine{01977\ \ \ \ \ \}}
\DoxyCodeLine{01978\ }
\DoxyCodeLine{01979\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ PFD\_SKIP\_IMPLEMENTATION}}
\DoxyCodeLine{01980\ }
\DoxyCodeLine{01981\ \}\ \textcolor{comment}{//\ namespace\ pfd}}

\end{DoxyCode}
