\doxysection{Device.\+h}
\hypertarget{_kernel_2_kernel_kit_2_p_c_i_2_device_8h_source}{}\label{_kernel_2_kernel_kit_2_p_c_i_2_device_8h_source}\index{dev/Kernel/KernelKit/PCI/Device.h@{dev/Kernel/KernelKit/PCI/Device.h}}
\mbox{\hyperlink{_kernel_2_kernel_kit_2_p_c_i_2_device_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002\ \textcolor{comment}{}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ \ \ \ Copyright\ (C)\ 2024-\/2025,\ Amlal\ EL\ Mahrouss,\ all\ rights\ reserved.}}
\DoxyCodeLine{00004\ \textcolor{comment}{}}
\DoxyCodeLine{00005\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{_kernel_2_new_kit_2_defines_8h}{NewKit/Defines.h}}>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_ne_o_s_1_1_p_c_i}{NeOS::PCI}}}
\DoxyCodeLine{00011\ \{}
\DoxyCodeLine{00012\ \ \ \ \ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{namespace_ne_o_s_1_1_p_c_i_a3a92143b8f44ac30311a9a11fb7958bf}{PciConfigKind}}\ :\ \mbox{\hyperlink{namespace_ne_o_s_a00dada5f0d44bcaf0cedffcae3657faf}{UShort}}}
\DoxyCodeLine{00013\ \ \ \ \ \{}
\DoxyCodeLine{00014\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_1_1_p_c_i_a3a92143b8f44ac30311a9a11fb7958bfa8fefe9709090df50a1d6d7b6bcf6f7c0}{ConfigAddress}}\ =\ 0xCF8,}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_1_1_p_c_i_a3a92143b8f44ac30311a9a11fb7958bfacbc879c4bd3682a47d02e7fd332c3d43}{ConfigData}}\ \ \ \ \ \ =\ 0xCFC,}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_1_1_p_c_i_a3a92143b8f44ac30311a9a11fb7958bfa11450bdf07b4ea5cc6ad0e81c8d44527}{CommandReg}}\ \ \ \ \ \ =\ 0x0004,}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_1_1_p_c_i_a3a92143b8f44ac30311a9a11fb7958bfa4bbb8f967da6d1a610596d7257179c2b}{Invalid}}\ \ \ \ \ \ \ \ =\ 0xFFFF,}
\DoxyCodeLine{00018\ \ \ \ \ \};}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device}{Device}}\ final}
\DoxyCodeLine{00021\ \ \ \ \ \{}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a64493d2b667c305a01bea1697f35de49}{Device}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a64493d2b667c305a01bea1697f35de49}{Device}}(\mbox{\hyperlink{namespace_ne_o_s_a00dada5f0d44bcaf0cedffcae3657faf}{UShort}}\ bus,\ \mbox{\hyperlink{namespace_ne_o_s_a00dada5f0d44bcaf0cedffcae3657faf}{UShort}}\ device,\ \mbox{\hyperlink{namespace_ne_o_s_a00dada5f0d44bcaf0cedffcae3657faf}{UShort}}\ function,\ \mbox{\hyperlink{namespace_ne_o_s_a160d206409956603d46f6292a41b1f52}{UInt32}}\ bar);}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device}{Device}}\&\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a26d42f99c60bc0b9a4ffdff3290f25c3}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device}{Device}}\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a3184a9586e86c6cf6a2d25b42fe56af6}{Device}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device}{Device}}\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a9dabc419c8d8df3a686c33ce042bc99a}{\string~Device}}();}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_ab593fceae447211cf5e55db6a5f5ac1c}{UInt}}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a724f0b432b8b8c44e0dc6409dfec2ddb}{Read}}(\mbox{\hyperlink{namespace_ne_o_s_ab593fceae447211cf5e55db6a5f5ac1c}{UInt}}\ bar,\ \mbox{\hyperlink{namespace_ne_o_s_a83fc5fb64d170235fdc4061a31f2f766}{Size}}\ szData);}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_mod_2_a_h_c_i_2_a_h_c_i_8h_a7a9e0d1c2c1ac92baa698f393e953c87}{Write}}(\mbox{\hyperlink{namespace_ne_o_s_ab593fceae447211cf5e55db6a5f5ac1c}{UInt}}\ bar,\ \mbox{\hyperlink{namespace_ne_o_s_a45d30b4091e6c91b5e25bcf408ca6dbb}{UIntPtr}}\ data,\ \mbox{\hyperlink{namespace_ne_o_s_a83fc5fb64d170235fdc4061a31f2f766}{Size}}\ szData);}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ bool();}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_ab593fceae447211cf5e55db6a5f5ac1c}{UInt}}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a2be45ec055f09bc99010e351dacba22e}{Read}}(\mbox{\hyperlink{namespace_ne_o_s_ab593fceae447211cf5e55db6a5f5ac1c}{UInt}}\ bar)}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(T)\ <=\ 4,\ \textcolor{stringliteral}{"{}64-\/bit\ PCI\ addressing\ is\ unsupported"{}});}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a724f0b432b8b8c44e0dc6409dfec2ddb}{Read}}(bar,\ \textcolor{keyword}{sizeof}(T));}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_aed99d922f1fdeabeb4233d200b6718d8}{Write}}(\mbox{\hyperlink{namespace_ne_o_s_ab593fceae447211cf5e55db6a5f5ac1c}{UInt}}\ bar,\ \mbox{\hyperlink{namespace_ne_o_s_a45d30b4091e6c91b5e25bcf408ca6dbb}{UIntPtr}}\ data)}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(\textcolor{keyword}{sizeof}(T)\ <=\ 4,\ \textcolor{stringliteral}{"{}64-\/bit\ PCI\ addressing\ is\ unsupported"{}});}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_mod_2_a_h_c_i_2_a_h_c_i_8h_a7a9e0d1c2c1ac92baa698f393e953c87}{Write}}(bar,\ data,\ \textcolor{keyword}{sizeof}(T));}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_a00dada5f0d44bcaf0cedffcae3657faf}{UShort}}\ \ \ \ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a42764744139da888c5236f8f4b7fb15e}{DeviceId}}();}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_a00dada5f0d44bcaf0cedffcae3657faf}{UShort}}\ \ \ \ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a2e832939b888af7c5a3bb7286c2a599c}{VendorId}}();}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_a00dada5f0d44bcaf0cedffcae3657faf}{UShort}}\ \ \ \ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a0269e76832247164986bbc9d54ae1f00}{InterfaceId}}();}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_adb8ea8dee4caf819742316fb6b013d8e}{UChar}}\ \ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a430728fdc1ecdbd15e75356db90483a4}{Class}}();}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_adb8ea8dee4caf819742316fb6b013d8e}{UChar}}\ \ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a8654753d7969b5c0a265d6e2ff2ea1ab}{Subclass}}();}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_adb8ea8dee4caf819742316fb6b013d8e}{UChar}}\ \ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a072e178ab31ff129666b916e2f73b920}{ProgIf}}();}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_adb8ea8dee4caf819742316fb6b013d8e}{UChar}}\ \ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a20017191c398cff3030b429134c28a3c}{HeaderType}}();}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_a45d30b4091e6c91b5e25bcf408ca6dbb}{UIntPtr}}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_ae49160f0d6a00660f5fcc7898e0fa788}{Bar}}(\mbox{\hyperlink{namespace_ne_o_s_a160d206409956603d46f6292a41b1f52}{UInt32}}\ bar\_in);}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_afe29c73dcda28ffff523ca092f25975b}{EnableMmio}}(\mbox{\hyperlink{namespace_ne_o_s_a160d206409956603d46f6292a41b1f52}{UInt32}}\ bar\_in);}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a76c9e4825e6f0a0816a9ace02bf359ce}{BecomeBusMaster}}(\mbox{\hyperlink{namespace_ne_o_s_a160d206409956603d46f6292a41b1f52}{UInt32}}\ bar\_in);\ \textcolor{comment}{//\ for\ PCI-\/DMA,\ PC-\/DMA\ does\ not\ need\ that.}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_a00dada5f0d44bcaf0cedffcae3657faf}{UShort}}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a44c8719f325922fdcc83a0ca9d606836}{Vendor}}();}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_a00dada5f0d44bcaf0cedffcae3657faf}{UShort}}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a838d66f774d773e8a067f22477b21a50}{fBus}};}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_a00dada5f0d44bcaf0cedffcae3657faf}{UShort}}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_aeb5356787faf4249aa3857b7aaff8393}{fDevice}};}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_a00dada5f0d44bcaf0cedffcae3657faf}{UShort}}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_a0d75bb82b082b2d9161bd52bc6ad2b40}{fFunction}};}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespace_ne_o_s_a160d206409956603d46f6292a41b1f52}{UInt32}}\ \mbox{\hyperlink{class_ne_o_s_1_1_p_c_i_1_1_device_aa13733bb9a427d74a7b020c972907205}{fBar}};}
\DoxyCodeLine{00077\ \ \ \ \ \};}
\DoxyCodeLine{00078\ \}\ \textcolor{comment}{//\ namespace\ NeOS::PCI}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \mbox{\hyperlink{_kernel_2_new_kit_2_macros_8h_abbaccfbed35b945162c27ef6d3748e77}{EXTERN\_C}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{_kernel_2_kernel_kit_2_p_c_i_2_device_8h_ad10e3cd0f3fb6531bb07c4888c8d1eb1}{NewOSPCISetCfgTarget}}(\mbox{\hyperlink{namespace_ne_o_s_ab593fceae447211cf5e55db6a5f5ac1c}{NeOS::UInt}}\ bar);}
\DoxyCodeLine{00081\ \mbox{\hyperlink{_kernel_2_new_kit_2_macros_8h_abbaccfbed35b945162c27ef6d3748e77}{EXTERN\_C}}\ \mbox{\hyperlink{namespace_ne_o_s_ab593fceae447211cf5e55db6a5f5ac1c}{NeOS::UInt}}\ \mbox{\hyperlink{_kernel_2_kernel_kit_2_p_c_i_2_device_8h_ad5c980ad1d12d80e4201242a3ca4d82d}{NewOSPCIReadRaw}}(\mbox{\hyperlink{namespace_ne_o_s_ab593fceae447211cf5e55db6a5f5ac1c}{NeOS::UInt}}\ bar);}

\end{DoxyCode}
