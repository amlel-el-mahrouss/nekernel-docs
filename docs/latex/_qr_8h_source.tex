\doxysection{Qr.\+h}
\hypertarget{_qr_8h_source}{}\label{_qr_8h_source}\index{dev/boot/BootKit/Qr.h@{dev/boot/BootKit/Qr.h}}
\mbox{\hyperlink{_qr_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ QR\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ QR\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{base_8h}{BootKit/Shared/base.h}}>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{bit_8h}{BootKit/Shared/bit.h}}>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{_qr_prelude_8h}{BootKit/QrPrelude.h}}>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{_f_b_mgr_8h}{modules/CoreGfx/FBMgr.h}}>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{_support_8h}{BootKit/Support.h}}>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{_detail_8h}{CompilerKit/Detail.h}}>}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceqr}{qr}}}
\DoxyCodeLine{00015\ \{}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keyword}{inline}\ uint8\_t\ \mbox{\hyperlink{namespaceqr_a878ef9af13c0ca854be02b4c6a464a71}{min\_poly}}\ =}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0b11101,\ \textcolor{comment}{/*\ Minimal\ polynomial\ x\string^8\ +\ x\string^4\ +\ x\string^3\ +\ x\string^2\ +\ 1\ */}}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_abe85340a4c802d0e304cf1dd6803f1cb}{generator}}\ =\ 0b10;\ \ \ \ \ \ \textcolor{comment}{/*\ Generator\ of\ Galois\ field\ */}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keyword}{inline}\ uint8\_t\ \mbox{\hyperlink{namespaceqr_af35bb909a9cab33489cf3cb92c79d6c1}{gf\_mul}}(uint8\_t\ a,\ uint8\_t\ b)}
\DoxyCodeLine{00022\ \ \ \ \ \{}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ uint8\_t\ res\ =\ 0;}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ b;\ b\ >>=\ 1)}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (b\ \&\ 1)}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ \string^=\ a;}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (a\ \&\ 0x80)}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ (a\ <<\ 1)\ \string^\ \mbox{\hyperlink{namespaceqr_a878ef9af13c0ca854be02b4c6a464a71}{min\_poly}};}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ <<=\ 1;}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ res;}
\DoxyCodeLine{00036\ \ \ \ \ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{comment}{//\ Size\ of\ Ecc\ block\ with\ respect\ to\ level\ and\ version.\ 0\ version\ is\ for}}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{comment}{//\ padding.}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceqr_a9d88fcd72ef1e601e4db7e82c6152d98}{ECC\_CODEWORDS\_PER\_BLOCK}}[4][41]\ =\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \{0,\ 7,\ 10,\ 15,\ 20,\ 26,\ 18,\ 20,\ 24,\ 30,\ 18,\ 20,\ 24,\ 26,}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ 30,\ 22,\ 24,\ 28,\ 30,\ 28,\ 28,\ 28,\ 28,\ 30,\ 30,\ 26,\ 28,\ 30,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30\},}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \{0,\ 10,\ 16,\ 26,\ 18,\ 24,\ 16,\ 18,\ 22,\ 22,\ 26,\ 30,\ 22,\ 22,}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ 24,\ 24,\ 28,\ 28,\ 26,\ 26,\ 26,\ 26,\ 28,\ 28,\ 28,\ 28,\ 28,\ 28,}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ 28,\ 28,\ 28,\ 28,\ 28,\ 28,\ 28,\ 28,\ 28,\ 28,\ 28,\ 28,\ 28\},}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \{0,\ 13,\ 22,\ 18,\ 26,\ 18,\ 24,\ 18,\ 22,\ 20,\ 24,\ 28,\ 26,\ 24,}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ 20,\ 30,\ 24,\ 28,\ 28,\ 26,\ 30,\ 28,\ 30,\ 30,\ 30,\ 30,\ 28,\ 30,}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30\},}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \{0,\ 17,\ 28,\ 22,\ 16,\ 22,\ 28,\ 26,\ 26,\ 24,\ 28,\ 24,\ 28,\ 22,}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ 24,\ 24,\ 30,\ 28,\ 28,\ 26,\ 28,\ 30,\ 24,\ 30,\ 30,\ 30,\ 30,\ 30,}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30,\ 30\},}
\DoxyCodeLine{00053\ \ \ \ \ \};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{comment}{//\ Number\ of\ Ecc\ blocks\ with\ respect\ to\ level\ and\ version.\ 0\ version\ is\ for}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{//\ padding.}}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceqr_a6e44c1a178e5267b6fbae9e51d6d2180}{N\_ECC\_BLOCKS}}[4][41]\ =\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \{0,\ 1,\ 1,\ 1,\ 1,\ 1,\ 2,\ 2,\ 2,\ 2,\ 4,\ 4,\ 4,\ 4,}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ 4,\ 6,\ 6,\ 6,\ 6,\ 7,\ 8,\ 8,\ 9,\ 9,\ 10,\ 12,\ 12,\ 12,}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ 13,\ 14,\ 15,\ 16,\ 17,\ 18,\ 19,\ 19,\ 20,\ 21,\ 22,\ 24,\ 25\},}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \{0,\ 1,\ 1,\ 1,\ 2,\ 2,\ 4,\ 4,\ 4,\ 5,\ 5,\ 5,\ 8,\ 9,}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ 9,\ 10,\ 10,\ 11,\ 13,\ 14,\ 16,\ 17,\ 17,\ 18,\ 20,\ 21,\ 23,\ 25,}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ 26,\ 28,\ 29,\ 31,\ 33,\ 35,\ 37,\ 38,\ 40,\ 43,\ 45,\ 47,\ 49\},}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \{0,\ 1,\ 1,\ 2,\ 2,\ 4,\ 4,\ 6,\ 6,\ 8,\ 8,\ 8,\ 10,\ 12,}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ 16,\ 12,\ 17,\ 16,\ 18,\ 21,\ 20,\ 23,\ 23,\ 25,\ 27,\ 29,\ 34,\ 34,}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ 35,\ 38,\ 40,\ 43,\ 45,\ 48,\ 51,\ 53,\ 56,\ 59,\ 62,\ 65,\ 68\},}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \{0,\ 1,\ 1,\ 2,\ 4,\ 4,\ 4,\ 5,\ 6,\ 8,\ 8,\ 11,\ 11,\ 16,}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ 16,\ 18,\ 16,\ 19,\ 21,\ 25,\ 25,\ 25,\ 34,\ 30,\ 32,\ 35,\ 37,\ 40,}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ 42,\ 45,\ 48,\ 51,\ 54,\ 57,\ 60,\ 63,\ 66,\ 70,\ 74,\ 77,\ 81\},}
\DoxyCodeLine{00070\ \ \ \ \ \};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ Positions\ of\ central\ modules\ of\ alignment\ patterns\ according\ to\ version.\ 0}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{comment}{//\ version\ is\ for\ padding.}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceqr_aa79f24e70db606e9cdf5c18cc0e7aa57}{ALIGN\_POS}}[41][7]\ =\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \{\},}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \{0\},}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \{6,\ 18\},}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \{6,\ 22\},}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \{6,\ 26\},}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \{6,\ 30\},}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \{6,\ 34\},}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \{6,\ 22,\ 38\},}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \{6,\ 24,\ 42\},}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \{6,\ 26,\ 46\},}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \{6,\ 28,\ 50\},}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \{6,\ 30,\ 54\},}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \{6,\ 32,\ 58\},}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \{6,\ 34,\ 62\},}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \{6,\ 26,\ 46,\ 66\},}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \{6,\ 26,\ 48,\ 70\},}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \{6,\ 26,\ 50,\ 74\},}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \{6,\ 30,\ 54,\ 78\},}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \{6,\ 30,\ 56,\ 82\},}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \{6,\ 30,\ 58,\ 86\},}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \{6,\ 34,\ 62,\ 90\},}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \{6,\ 28,\ 50,\ 72,\ 94\},}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \{6,\ 26,\ 50,\ 74,\ 98\},}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \{6,\ 30,\ 54,\ 78,\ 102\},}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \{6,\ 28,\ 54,\ 80,\ 106\},}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \{6,\ 32,\ 58,\ 84,\ 110\},}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \{6,\ 30,\ 58,\ 86,\ 114\},}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \{6,\ 34,\ 62,\ 90,\ 118\},}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \{6,\ 26,\ 50,\ 74,\ 98,\ 122\},}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \{6,\ 30,\ 54,\ 78,\ 102,\ 126\},}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \{6,\ 26,\ 52,\ 78,\ 104,\ 130\},}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \{6,\ 30,\ 56,\ 82,\ 108,\ 134\},}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \{6,\ 34,\ 60,\ 86,\ 112,\ 138\},}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \{6,\ 30,\ 58,\ 86,\ 114,\ 142\},}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \{6,\ 34,\ 62,\ 90,\ 118,\ 146\},}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \{6,\ 30,\ 54,\ 78,\ 102,\ 126,\ 150\},}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \{6,\ 24,\ 50,\ 76,\ 102,\ 128,\ 154\},}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \{6,\ 28,\ 54,\ 80,\ 106,\ 132,\ 158\},}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \{6,\ 32,\ 58,\ 84,\ 110,\ 136,\ 162\},}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \{6,\ 26,\ 54,\ 82,\ 110,\ 138,\ 166\},}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \{6,\ 30,\ 58,\ 86,\ 114,\ 142,\ 170\},}
\DoxyCodeLine{00116\ \ \ \ \ \};}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{comment}{//\ Return\ n-\/th\ bit\ of\ arr\ starting\ from\ MSB.}}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keyword}{constexpr}\ uint8\_t\ \mbox{\hyperlink{namespaceqr_ac3512fe60e2972de5666d246e895be90}{get\_bit\_r}}(uint8\_t*\ arr,\ \textcolor{keywordtype}{int}\ n)}
\DoxyCodeLine{00120\ \ \ \ \ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (arr[n\ >>\ 3]\ >>\ (7\ -\/\ (n\ \&\ 7)))\ \&\ 1;}
\DoxyCodeLine{00122\ \ \ \ \ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{comment}{//\ Add\ up\ to\ 16\ bits\ to\ arr.\ Data\ starts\ from\ MSB\ as\ well\ as\ each\ byte\ of\ an}}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{comment}{//\ array.}}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(uint16\_t\ data,\ \textcolor{keywordtype}{int}\ n,\ uint8\_t*\ arr,\ \textcolor{keywordtype}{size\_t}\&\ pos)}
\DoxyCodeLine{00127\ \ \ \ \ \{}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (n-\/-\/)}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ arr[pos\ >>\ 3]\ |=\ ((data\ >>\ n)\ \&\ 1)\ <<\ (7\ -\/\ (pos\ \&\ 7));}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ ++pos;}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00133\ \ \ \ \ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{comment}{//\ Translate\ char\ to\ alphanumeric\ encoding\ value,}}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceqr_ad06fc24755df3c6b2cd22c39fd0bf010}{alphanumeric}}(\textcolor{keywordtype}{char}\ c)}
\DoxyCodeLine{00137\ \ \ \ \ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (c\ >=\ \textcolor{charliteral}{'0'}\ \&\&\ c\ <=\ \textcolor{charliteral}{'9'})}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ c\ -\/\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (c\ >=\ \textcolor{charliteral}{'A'}\ \&\&\ c\ <=\ \textcolor{charliteral}{'Z'})}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ c\ -\/\ \textcolor{charliteral}{'A'}\ +\ 10;}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (c)}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\ '}:}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 36;}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\$'}:}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 37;}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\%'}:}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 38;}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'*'}:}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 39;}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'+'}:}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 40;}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'-\/'}:}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 41;}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'.'}:}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 42;}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'/'}:}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 43;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{':'}:}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 44;}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00166\ \ \ \ \ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ string\ can\ be\ encoded\ in\ alphanumeric\ mode.}}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespaceqr_ad37bbcb6af8e2ed3ff013a19cf316c87}{is\_alphanumeric}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str,\ \textcolor{keywordtype}{size\_t}\ len)}
\DoxyCodeLine{00170\ \ \ \ \ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ len;\ ++i)}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceqr_ad06fc24755df3c6b2cd22c39fd0bf010}{alphanumeric}}(str[i])\ ==\ -\/1)}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00175\ \ \ \ \ \}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ string\ can\ be\ encoded\ in\ numeric\ mode.}}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespaceqr_abfa7cbee2c756321897cac3449729613}{is\_numeric}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str,\ \textcolor{keywordtype}{size\_t}\ len)}
\DoxyCodeLine{00179\ \ \ \ \ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ len;\ ++i)}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (str[i]\ <\ \textcolor{charliteral}{'0'}\ ||\ str[i]\ >\ \textcolor{charliteral}{'9'})}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00184\ \ \ \ \ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{comment}{//\ Check\ if\ string\ can\ be\ encoded\ in\ kanji\ mode.}}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespaceqr_a36c301bb47987365dfcd3245238de28b}{is\_kanji}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str,\ \textcolor{keywordtype}{size\_t}\ len)}
\DoxyCodeLine{00188\ \ \ \ \ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ len;\ i\ +=\ 2)}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ uint16\_t\ val\ =\ uint16\_t(str[i])\ |\ (uint16\_t(str[i\ +\ 1])\ <<\ 8);}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (val\ <\ 0x8140\ ||\ val\ >\ 0xebbf\ ||\ (val\ >\ 0x9ffc\ \&\&\ val\ <\ 0xe040))}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00196\ \ \ \ \ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{comment}{//\ Reed-\/Solomon\ Ecc\ generator\ polynomial\ for\ the\ given\ degree.}}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceqr_aeded86590df2c771bb3c036757edbd3e}{gf\_gen\_poly}}(\textcolor{keywordtype}{int}\ degree,\ uint8\_t*\ poly)}
\DoxyCodeLine{00200\ \ \ \ \ \{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_support_8h_a14e2d58d4f377e1e0b972ecf1f4be97e}{SetMem}}(poly,\ 0,\ degree);}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ uint8\_t\ root\ =\ poly[degree\ -\/\ 1]\ =\ 1;}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ degree;\ ++i)}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ degree\ -\/\ 1;\ ++j)}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ poly[j]\ =\ \mbox{\hyperlink{namespaceqr_af35bb909a9cab33489cf3cb92c79d6c1}{gf\_mul}}(poly[j],\ root)\ \string^\ poly[j\ +\ 1];}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ poly[degree\ -\/\ 1]\ =\ \mbox{\hyperlink{namespaceqr_af35bb909a9cab33489cf3cb92c79d6c1}{gf\_mul}}(poly[degree\ -\/\ 1],\ root);}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ root\ \ \ \ \ \ \ \ \ \ \ \ \ =\ (root\ <<\ 1)\ \string^\ ((root\ >>\ 7)\ *\ 0x11d);}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00212\ \ \ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{comment}{//\ Polynomial\ division\ if\ Galois\ Field.}}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceqr_ab5ff4223e349fdc9712a6cbc016e47a5}{gf\_poly\_div}}(uint8\_t*\ dividend,\ \textcolor{keywordtype}{size\_t}\ len,\ uint8\_t*\ divisor,\ \textcolor{keywordtype}{int}\ degree,\ uint8\_t*\ result)}
\DoxyCodeLine{00216\ \ \ \ \ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_support_8h_a14e2d58d4f377e1e0b972ecf1f4be97e}{SetMem}}(result,\ 0,\ degree);}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ len;\ ++i)}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t\ factor\ =\ dividend[i]\ \string^\ result[0];}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_support_8h_a3d0f4556ea847605b0cbfb9c86c0a6aa}{MoveMem}}(\&result[0],\ \&result[1],\ degree\ -\/\ 1);}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ result[degree\ -\/\ 1]\ =\ 0;}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ degree;\ ++j)}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result[j]\ \string^=\ \mbox{\hyperlink{namespaceqr_af35bb909a9cab33489cf3cb92c79d6c1}{gf\_mul}}(divisor[j],\ factor);}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00227\ \ \ \ \ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keyword}{enum}\ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865}{Ecc}}}
\DoxyCodeLine{00230\ \ \ \ \ \{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865afb446127f2771970216e8f03876813bc}{L}},}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865afa1a3065f4423009e728ebdb1087de71}{M}},}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865ae3aae91aef3eb28cd0aae116de679d5e}{Q}},}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865a5053c50355f114b49424fb91510a4320}{H}},}
\DoxyCodeLine{00235\ \ \ \ \ \};}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{keyword}{enum}\ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5}{Mode}}}
\DoxyCodeLine{00238\ \ \ \ \ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5abfbdafba139c92530a4b124098150e20}{M\_NUMERIC}},}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5af636347b3d6f5176e868eb508d953c37}{M\_ALPHANUMERIC}},}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5ab92eaf929d5757e20984bb9f2f67dd72}{M\_BYTE}},}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5a387d09f39018df13dd6d92c92f43da10}{M\_KANJI}},}
\DoxyCodeLine{00243\ \ \ \ \ \};}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{comment}{//\ Select\ appropriate\ encoding\ mode\ for\ string.}}
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5}{Mode}}\ \mbox{\hyperlink{namespaceqr_ac8796c4a6ee46d2f7b4b6c3ca51105a2}{select\_mode}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str,\ \textcolor{keywordtype}{size\_t}\ len)}
\DoxyCodeLine{00247\ \ \ \ \ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceqr_abfa7cbee2c756321897cac3449729613}{is\_numeric}}(str,\ len))}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5abfbdafba139c92530a4b124098150e20}{M\_NUMERIC}};}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceqr_ad37bbcb6af8e2ed3ff013a19cf316c87}{is\_alphanumeric}}(str,\ len))}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5af636347b3d6f5176e868eb508d953c37}{M\_ALPHANUMERIC}};}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceqr_a36c301bb47987365dfcd3245238de28b}{is\_kanji}}(str,\ len))}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5a387d09f39018df13dd6d92c92f43da10}{M\_KANJI}};}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5ab92eaf929d5757e20984bb9f2f67dd72}{M\_BYTE}};}
\DoxyCodeLine{00255\ \ \ \ \ \}}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{comment}{//\ Return\ size\ of\ Character\ Control\ Indicator\ in\ bits\ for\ given\ version\ and}}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{comment}{//\ mode.}}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespaceqr_a767860c022121560659853e1bd29113f}{cci}}(\textcolor{keywordtype}{int}\ ver,\ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5}{Mode}}\ mode)}
\DoxyCodeLine{00260\ \ \ \ \ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ cnt[4][3]\ =\ \{}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \{10,\ 12,\ 14\},}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \{9,\ 11,\ 13\},}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \{8,\ 16,\ 16\},}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \{8,\ 10,\ 12\},}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ver\ <\ 10)}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cnt[mode][0];}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ver\ <\ 27)}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cnt[mode][1];}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cnt[mode][2];}
\DoxyCodeLine{00272\ \ \ \ \ \}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structqr_1_1_qr}{Qr}}}
\DoxyCodeLine{00276\ \ \ \ \ \{}
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classqr_1_1_qr_delegate}{QrDelegate}};}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structqr_1_1_qr_a693caab7467e94f99ffa453df95a9968}{draw}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{structqr_1_1_qr_a983ad5116f0f80034099f78a671c928f}{side\_size}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00283\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structqr_1_1_qr_a11faa58594ab17d94337955da4f9d225}{SIDE}};}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structqr_1_1_qr_abb2b9a0e0887ff26c5e609b7fba6a181}{module}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y);}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structqr_1_1_qr_a204465e8b8011f55a6af06dc5d7c8a26}{encode}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str,\ \textcolor{keywordtype}{size\_t}\ len,\ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865}{Ecc}}\ ecc,\ \textcolor{keywordtype}{int}\ mask\ =\ -\/1);}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structqr_1_1_qr_a3a1ebbc99834e1948408d633f25cf9db}{encode\_data}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ data,\ \textcolor{keywordtype}{size\_t}\ len,\ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865}{Ecc}}\ ecc,\ uint8\_t*\ out);}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_ab967f64e9bb369640d6db98441cb7704}{encode\_ecc}}(uint8\_t*\ data,\ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865}{Ecc}}\ ecc,\ uint8\_t*\ out);}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a20e47826bdc6f255b632bc5e8bae04f7}{add\_data}}(uint8\_t*\ data,\ uint8\_t*\ patterns);}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a0eb015fd2bb3bacdcceaed113f83f2a4}{add\_patterns}}();}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a21197672d936ef9050cf6887e00cd956}{add\_version}}();}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a87a558f0962a9bd59085346e00ab69d1}{add\_format}}(\mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865}{Ecc}}\ ecc,\ \textcolor{keywordtype}{int}\ mask);}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a509525bd878c42421fc86d08c7c477c0}{reserve\_patterns}}(uint8\_t*\ out);}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ Black>}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a3f1ecaff1bec83f2aa98a846e3d52cd1}{draw\_rect}}(\textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ height,\ \textcolor{keywordtype}{int}\ width,\ uint8\_t*\ out);}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ Black>}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a370c2f99cc976436510b92d82a556cff}{draw\_bound}}(\textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ height,\ \textcolor{keywordtype}{int}\ width,\ uint8\_t*\ out);}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ Horizontal>}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ \mbox{\hyperlink{structqr_1_1_qr_a50942e1977059e79f0afdde2659ea0fe}{rule\_1\_3\_score}}();}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ \mbox{\hyperlink{structqr_1_1_qr_a0e4cecb2dd2446e547a669c519495b7c}{penalty\_score}}();}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ \mbox{\hyperlink{structqr_1_1_qr_a4878e135fef31830fef72568a1038aae}{select\_mask}}(\mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865}{Ecc}}\ ecc,\ uint8\_t*\ patterns);}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_aff67713303597c1bbc1b033cd2540833}{apply\_mask}}(\textcolor{keywordtype}{int}\ mask,\ uint8\_t*\ patterns);}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(V\ >=\ 1\ \&\&\ V\ <=\ 40,\ \textcolor{stringliteral}{"{}invalid\ version"{}});}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_a11faa58594ab17d94337955da4f9d225}{SIDE}}\ \ \ \ \ \ \ \ \ =\ 17\ +\ V\ *\ 4;}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_ac2868583321446a7bad49a1e0dad8e46}{N\_BITS}}\ \ \ \ \ \ \ \ \ =\ \mbox{\hyperlink{structqr_1_1_qr_a11faa58594ab17d94337955da4f9d225}{SIDE}}\ *\ \mbox{\hyperlink{structqr_1_1_qr_a11faa58594ab17d94337955da4f9d225}{SIDE}};}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_a4adec018cc23a0e740b17839e4c03b70}{N\_ALIGN}}\ \ \ =\ V\ ==\ 1\ ?\ 0\ :\ V\ /\ 7\ +\ 2;}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_ab35699ac3b093ea34f0db48570fb14e1}{N\_ALIGN\_BITS}}\ =\ V\ >\ 1\ ?\ (\mbox{\hyperlink{structqr_1_1_qr_a4adec018cc23a0e740b17839e4c03b70}{N\_ALIGN}}*\ \mbox{\hyperlink{structqr_1_1_qr_a4adec018cc23a0e740b17839e4c03b70}{N\_ALIGN}}\ -\/\ 3)\ *\ 25\ :\ 0;}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_a0d5fcc8d319db7e001a3ca173f9e4273}{N\_TIMING\_BITS}}\ =}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{structqr_1_1_qr_a11faa58594ab17d94337955da4f9d225}{SIDE}}\ -\/\ 16)\ *\ 2\ -\/\ (10\ *\ (V\ >\ 1\ ?\ \mbox{\hyperlink{structqr_1_1_qr_a4adec018cc23a0e740b17839e4c03b70}{N\_ALIGN}}\ -\/\ 2\ :\ 0));}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_a09c238f86738ac284647a40dcb4a892d}{N\_VER\_BITS}}\ =\ V\ >\ 6\ ?\ 36\ :\ 0;}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_a9db82cd403f687666ddf241eac426ced}{N\_DAT\_BITS}}\ =}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structqr_1_1_qr_ac2868583321446a7bad49a1e0dad8e46}{N\_BITS}}\ -\/\ (192\ +\ \mbox{\hyperlink{structqr_1_1_qr_ab35699ac3b093ea34f0db48570fb14e1}{N\_ALIGN\_BITS}}\ +\ \mbox{\hyperlink{structqr_1_1_qr_a0d5fcc8d319db7e001a3ca173f9e4273}{N\_TIMING\_BITS}}\ +\ 31\ +\ \mbox{\hyperlink{structqr_1_1_qr_a09c238f86738ac284647a40dcb4a892d}{N\_VER\_BITS}});}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_afbb7e79a475ebd1b6f07163c674765ea}{N\_BYTES}}\ =\ \mbox{\hyperlink{namespaceutl_a3b9fc587871661ae2126709c13fba3ec}{utl::bytes\_in\_bits}}(\mbox{\hyperlink{structqr_1_1_qr_ac2868583321446a7bad49a1e0dad8e46}{N\_BITS}});\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Actual\ number\ of\ bytes\_in\_bits}}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ required\ to\ store\ whole\ Qr\ code}}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_a6e27c221387e013dfd3dfef593ed26c2}{N\_DAT\_BYTES}}\ =\ \mbox{\hyperlink{namespaceutl_a3b9fc587871661ae2126709c13fba3ec}{utl::bytes\_in\_bits}}(\mbox{\hyperlink{structqr_1_1_qr_a9db82cd403f687666ddf241eac426ced}{N\_DAT\_BITS}});\ \textcolor{comment}{//\ Actual\ number\ of\ bytes\_in\_bits\ required\ to\ store}}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ [data\ +\ ecc]}}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_a6d578c30f9870af157a07ce309326f36}{N\_DAT\_CAPACITY}}\ =}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structqr_1_1_qr_a9db82cd403f687666ddf241eac426ced}{N\_DAT\_BITS}}\ >>\ 3;\ \textcolor{comment}{//\ Capacity\ of\ [data\ +\ ecc]\ without\ remainder\ bits}}
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ uint8\_t\ \mbox{\hyperlink{structqr_1_1_qr_a566395f618d277baec184459fab45c8b}{get\_arr\_bit}}(uint8\_t*\ arr,\ \textcolor{keywordtype}{unsigned}\ bit)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00331\ \textcolor{keyword}{\ \ \ \ \ \ \ \ }\{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceutl_a70e866f0b1f83d5b6a9a97073785c4ba}{utl::get\_arr\_bit}}(arr,\ bit);}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_ac2ceff32be91db4c79ba8e9a2ff6a964}{set\_arr\_bit}}(uint8\_t*\ arr,\ \textcolor{keywordtype}{unsigned}\ bit)}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceutl_a44192b27b1bbe99b59f7733f75aec331}{utl::set\_arr\_bit}}(arr,\ bit);}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a725cacf05e5d8768e1e0e73fa6298218}{clr\_arr\_bit}}(uint8\_t*\ arr,\ \textcolor{keywordtype}{unsigned}\ bit)}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceutl_a2674f6ed33b433dc1409b5b0a3432f3b}{utl::clr\_arr\_bit}}(arr,\ bit);}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ uint8\_t\ \mbox{\hyperlink{structqr_1_1_qr_a2bae65348410e709d40acebe8f0d1dd2}{code}}[\mbox{\hyperlink{structqr_1_1_qr_afbb7e79a475ebd1b6f07163c674765ea}{N\_BYTES}}]\ =\ \{\};}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structqr_1_1_qr_aa5864ad4ab18d92f70c9854de4763157}{status}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00350\ \ \ \ \ \};}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{comment}{//\ Get\ color\ of\ a\ module\ from\ left-\/to-\/right\ and\ top-\/to-\/bottom.\ Black\ is\ true.}}
\DoxyCodeLine{00353\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structqr_1_1_qr_abb2b9a0e0887ff26c5e609b7fba6a181}{Qr<V>::module}}(\textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y)}
\DoxyCodeLine{00355\ \ \ \ \ \{}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ get\_arr\_bit(code,\ y\ *\ SIDE\ +\ x);}
\DoxyCodeLine{00357\ \ \ \ \ \}}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00361\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structqr_1_1_qr_a693caab7467e94f99ffa453df95a9968}{Qr<V>::draw}}(\textcolor{keywordtype}{int}\ whereX,\ \textcolor{keywordtype}{int}\ whereY)\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00362\ \ \ \ \ \{}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!this-\/>status)}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ it\ may\ be\ invalid.}}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_f_b_mgr_8h_af426c91c49821bcf155ae7b712e52b1b}{fb\_init}}();}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ (this-\/>side\_size());\ ++y)}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ (this-\/>side\_size());\ ++x)}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_f_b_mgr_8h_ae16cf1e77ab82769ae955d1fac7e4935}{FBDrawInRegion}}(}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (this-\/>module(x,\ y)\ ?\ \mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a52d6f67c629ccece695186d3ccceba54}{RGB}}(00,\ 00,\ 00)\ :\ \mbox{\hyperlink{kernel_2_new_kit_2_macros_8h_a52d6f67c629ccece695186d3ccceba54}{RGB}}(0xFF,\ 0xFF,\ 0xFF)),}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1,\ 1,}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x\ +\ whereX,\ y\ +\ whereY);}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_f_b_mgr_8h_a5eb2b0e3f79ee92449f5bad2d00c664a}{fb\_clear}}();}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00382\ \ \ \ \ \}}
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ \ \ \ \ \textcolor{comment}{//\ Create\ Qr\ code\ with\ given\ error\ correction\ level.\ If\ mask\ ==\ -\/1,}}
\DoxyCodeLine{00385\ \ \ \ \ \textcolor{comment}{//\ then\ best\ mask\ selected\ automatically.\ NOTE:\ Automatic\ mask\ is\ the}}
\DoxyCodeLine{00386\ \ \ \ \ \textcolor{comment}{//\ most\ expensive\ operation.\ Takes\ about\ 95\ \%\ of\ all\ computation\ time.}}
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00388\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structqr_1_1_qr_a204465e8b8011f55a6af06dc5d7c8a26}{Qr<V>::encode}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str,\ \textcolor{keywordtype}{size\_t}\ len,\ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865}{Ecc}}\ ecc,\ \textcolor{keywordtype}{int}\ mask)}
\DoxyCodeLine{00389\ \ \ \ \ \{}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ uint8\_t\ data[N\_DAT\_BYTES]\ \ \ \ \ \ \ \ \ \ =\ \{\};}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ uint8\_t\ data\_with\_ecc[N\_DAT\_BYTES]\ =\ \{\};}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ uint8\_t\ patterns[N\_BYTES]\ \ \ \ \ \ \ \ \ \ =\ \{\};}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!encode\_data(str,\ len,\ ecc,\ data))}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ status\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ encode\_ecc(data,\ ecc,\ data\_with\_ecc);}
\DoxyCodeLine{00400\ }
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ reserve\_patterns(patterns);}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_support_8h_a013574543d2f27a210fdfd5fa284ebe3}{CopyMem}}(code,\ patterns,\ N\_BYTES);}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ add\_data(data\_with\_ecc,\ patterns);}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ add\_patterns();}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ add\_version();}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ mask\ =\ mask\ !=\ -\/1\ ?\ mask\ \&\ 7\ :\ select\_mask(ecc,\ patterns);}
\DoxyCodeLine{00409\ }
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ add\_format(ecc,\ mask);}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ apply\_mask(mask,\ patterns);}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ status\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00414\ \ \ \ \ \}}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structqr_1_1_qr_a3a1ebbc99834e1948408d633f25cf9db}{Qr<V>::encode\_data}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ data,\ \textcolor{keywordtype}{size\_t}\ len,\ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865}{Ecc}}\ ecc,\ uint8\_t*\ out)}
\DoxyCodeLine{00418\ \ \ \ \ \{}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5}{Mode}}\ mode\ =\ \mbox{\hyperlink{namespaceqr_ac8796c4a6ee46d2f7b4b6c3ca51105a2}{select\_mode}}(data,\ len);}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ n\_bits\ =}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \ \ \ \ (N\_DAT\_CAPACITY\ -\/\ \mbox{\hyperlink{namespaceqr_a9d88fcd72ef1e601e4db7e82c6152d98}{ECC\_CODEWORDS\_PER\_BLOCK}}[ecc][V]\ *\ \mbox{\hyperlink{namespaceqr_a6e44c1a178e5267b6fbae9e51d6d2180}{N\_ECC\_BLOCKS}}[ecc][V])}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ <<\ 3;}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ pos\ =\ 0;}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(1\ <<\ mode,\ 4,\ out,\ pos);}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(len,\ \mbox{\hyperlink{namespaceqr_a767860c022121560659853e1bd29113f}{cci}}(V,\ mode),\ out,\ pos);}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (mode\ ==\ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5abfbdafba139c92530a4b124098150e20}{M\_NUMERIC}})}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ triplets\ \ \ \ \ \ =\ len\ /\ 3;}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ triplets\_size\ =\ triplets\ *\ 3;}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ rem\ \ \ \ \ \ \ \ \ \ \ =\ len\ \%\ 3;}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ rem\_bits\ \ \ \ \ \ =\ rem\ ==\ 2\ ?\ 7\ :\ rem\ ==\ 1\ ?\ 4}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ 0;}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ total\_size\ \ \ \ =\ 10\ *\ triplets\ +\ rem\_bits;}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pos\ +\ total\_size\ >\ n\_bits)}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ buf[4]\ =\ \{\};}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ triplets\_size;\ i\ +=\ 3)}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buf[0]\ =\ data[i];}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buf[1]\ =\ data[i\ +\ 1];}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buf[2]\ =\ data[i\ +\ 2];}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint16\_t\ num\ =\ \mbox{\hyperlink{_support_8h_af25309cafd06a4e5d3dcefba4e156acd}{StringToLong}}(buf,\ \mbox{\hyperlink{ddk_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ 10);}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(num,\ 10,\ out,\ pos);}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (rem)}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buf[0]\ \ \ =\ data[triplets\_size];}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buf[1]\ \ \ =\ data[triplets\_size\ +\ 1];}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buf[rem]\ =\ 0;}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint16\_t\ num\ =\ \mbox{\hyperlink{_support_8h_af25309cafd06a4e5d3dcefba4e156acd}{StringToLong}}(buf,\ \mbox{\hyperlink{ddk_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}},\ 10);}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(num,\ rem\_bits,\ out,\ pos);}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (mode\ ==\ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5af636347b3d6f5176e868eb508d953c37}{M\_ALPHANUMERIC}})}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pos\ +\ 11\ *\ (\textcolor{keywordtype}{int}(len\ \&\ \string~1ul)\ /\ 2)\ >\ n\_bits)}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00467\ }
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ int(len\ \&\ \string~1ul);\ i\ +=\ 2)}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint16\_t\ num\ =\ \mbox{\hyperlink{namespaceqr_ad06fc24755df3c6b2cd22c39fd0bf010}{alphanumeric}}(data[i])\ *\ 45\ +\ \mbox{\hyperlink{namespaceqr_ad06fc24755df3c6b2cd22c39fd0bf010}{alphanumeric}}(data[i\ +\ 1]);}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(num,\ 11,\ out,\ pos);}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ \&\ 1)}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pos\ +\ 6\ >\ n\_bits)}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(\mbox{\hyperlink{namespaceqr_ad06fc24755df3c6b2cd22c39fd0bf010}{alphanumeric}}(data[len\ -\/\ 1]),\ 6,\ out,\ pos);}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (mode\ ==\ \mbox{\hyperlink{namespaceqr_a3310a533383c4dbf029cc201f27daba5ab92eaf929d5757e20984bb9f2f67dd72}{M\_BYTE}})}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pos\ +\ len\ *\ 8\ >\ n\_bits)}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ len;\ ++i)}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(data[i],\ 8,\ out,\ pos);}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pos\ +\ 13\ *\ (len\ /\ 2)\ >\ n\_bits)}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ len;\ i\ +=\ 2)}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint16\_t\ val\ =\ ((uint8\_t)data[i])\ |\ (((uint8\_t)data[i\ +\ 1])\ <<\ 8);}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint16\_t\ res\ =\ 0;}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ val\ -\/=\ val\ <\ 0x9FFC\ ?\ 0x8140\ :\ 0xC140;}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ +=\ val\ \&\ 0xff;}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ +=\ (val\ >>\ 8)\ *\ 0xc0;}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(res,\ 13,\ out,\ pos);}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ padding\ =\ n\_bits\ -\/\ pos;}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ i\ \ \ \ \ \ \ =\ 0;}
\DoxyCodeLine{00507\ }
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(0,\ padding\ >\ 4\ ?\ 4\ :\ padding,\ out,\ pos);}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pos\ \&\ 7)}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(0,\ (8\ -\/\ pos)\ \&\ 7,\ out,\ pos);}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (pos\ <\ n\_bits)}
\DoxyCodeLine{00514\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ad69f7ce82d6becb24c34c1904cfcf4d3}{add\_bits}}(++i\ \&\ 1\ ?\ 0xec\ :\ 0x11,\ 8,\ out,\ pos);}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00517\ \ \ \ \ \}}
\DoxyCodeLine{00518\ }
\DoxyCodeLine{00519\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00520\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_ab967f64e9bb369640d6db98441cb7704}{Qr<V>::encode\_ecc}}(uint8\_t*\ data,\ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865}{Ecc}}\ ecc,\ uint8\_t*\ out)}
\DoxyCodeLine{00521\ \ \ \ \ \{}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n\_blocks\ =\ \mbox{\hyperlink{namespaceqr_a6e44c1a178e5267b6fbae9e51d6d2180}{N\_ECC\_BLOCKS}}[ecc][V];}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ ecc\_len\ \ =\ \mbox{\hyperlink{namespaceqr_a9d88fcd72ef1e601e4db7e82c6152d98}{ECC\_CODEWORDS\_PER\_BLOCK}}[ecc][V];}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n\_data\_bytes\ =\ N\_DAT\_CAPACITY\ -\/\ ecc\_len\ *\ n\_blocks;}
\DoxyCodeLine{00526\ }
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n\_short\_blocks\ =\ n\_blocks\ -\/\ N\_DAT\_CAPACITY\ \%\ n\_blocks;}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ short\_len\ \ \ \ \ \ =\ N\_DAT\_CAPACITY\ /\ n\_blocks\ -\/\ ecc\_len;}
\DoxyCodeLine{00529\ }
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ uint8\_t\ gen\_poly[30];}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ uint8\_t\ ecc\_buf[30];}
\DoxyCodeLine{00532\ }
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_aeded86590df2c771bb3c036757edbd3e}{gf\_gen\_poly}}(ecc\_len,\ gen\_poly);}
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ uint8\_t*\ data\_ptr\ =\ data;}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ n\_blocks;\ ++i)}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ data\_len\ =\ short\_len;}
\DoxyCodeLine{00540\ }
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ >=\ n\_short\_blocks)}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++data\_len;}
\DoxyCodeLine{00543\ }
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceqr_ab5ff4223e349fdc9712a6cbc016e47a5}{gf\_poly\_div}}(data\_ptr,\ data\_len,\ gen\_poly,\ ecc\_len,\ ecc\_buf);}
\DoxyCodeLine{00545\ }
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0,\ k\ =\ i;\ j\ <\ data\_len;\ ++j,\ k\ +=\ n\_blocks)}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (j\ ==\ short\_len)}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ k\ -\/=\ n\_short\_blocks;}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out[k]\ =\ data\_ptr[j];}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0,\ k\ =\ n\_data\_bytes\ +\ i;\ j\ <\ ecc\_len;\ ++j,\ k\ +=\ n\_blocks)}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ out[k]\ =\ ecc\_buf[j];}
\DoxyCodeLine{00554\ }
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \ \ \ \ data\_ptr\ +=\ data\_len;}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00557\ \ \ \ \ \}}
\DoxyCodeLine{00558\ }
\DoxyCodeLine{00559\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00560\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a20e47826bdc6f255b632bc5e8bae04f7}{Qr<V>::add\_data}}(uint8\_t*\ data,\ uint8\_t*\ patterns)}
\DoxyCodeLine{00561\ \ \ \ \ \{}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ data\_pos\ =\ 0;}
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ SIDE\ -\/\ 1;\ x\ >=\ 1;\ x\ -\/=\ 2)}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ ==\ 6)}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ 5;}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ SIDE;\ ++i)}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ y\ \ \ \ \ =\ !((x\ +\ 1)\ \&\ 2)\ ?\ SIDE\ -\/\ 1\ -\/\ i\ :\ i;}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coord\ =\ y\ *\ SIDE\ +\ x;}
\DoxyCodeLine{00573\ }
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!get\_arr\_bit(patterns,\ coord))}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceqr_ac3512fe60e2972de5666d246e895be90}{get\_bit\_r}}(data,\ data\_pos))}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(code,\ coord);}
\DoxyCodeLine{00578\ }
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++data\_pos;}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!get\_arr\_bit(patterns,\ coord\ -\/\ 1))}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespaceqr_ac3512fe60e2972de5666d246e895be90}{get\_bit\_r}}(data,\ data\_pos))}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(code,\ coord\ -\/\ 1);}
\DoxyCodeLine{00586\ }
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++data\_pos;}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00591\ \ \ \ \ \}}
\DoxyCodeLine{00592\ }
\DoxyCodeLine{00593\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00594\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a0eb015fd2bb3bacdcceaed113f83f2a4}{Qr<V>::add\_patterns}}()}
\DoxyCodeLine{00595\ \ \ \ \ \{}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ White\ bounds\ inside\ finders}}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ draw\_bound<false>(1,\ 1,\ 5,\ 5,\ code);}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ draw\_bound<false>(1,\ SIDE\ -\/\ 6,\ 5,\ 5,\ code);}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ draw\_bound<false>(SIDE\ -\/\ 6,\ 1,\ 5,\ 5,\ code);}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Finish\ alignment\ patterns}}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ N\_ALIGN;\ ++i)}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ N\_ALIGN;\ ++j)}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((!i\ \&\&\ !j)\ ||\ (!i\ \&\&\ j\ ==\ N\_ALIGN\ -\/\ 1)\ ||\ (!j\ \&\&\ i\ ==\ N\_ALIGN\ -\/\ 1))}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ draw\_bound<false>(\mbox{\hyperlink{namespaceqr_aa79f24e70db606e9cdf5c18cc0e7aa57}{ALIGN\_POS}}[V][i]\ -\/\ 1,\ \mbox{\hyperlink{namespaceqr_aa79f24e70db606e9cdf5c18cc0e7aa57}{ALIGN\_POS}}[V][j]\ -\/\ 1,\ 3,\ 3,\ code);}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00611\ }
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Draw\ white\ separators}}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ draw\_rect<false>(7,\ 0,\ 1,\ 8,\ code);}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ draw\_rect<false>(0,\ 7,\ 8,\ 1,\ code);}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ draw\_rect<false>(SIDE\ -\/\ 8,\ 0,\ 1,\ 8,\ code);}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ draw\_rect<false>(SIDE\ -\/\ 8,\ 7,\ 8,\ 1,\ code);}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ draw\_rect<false>(7,\ SIDE\ -\/\ 8,\ 1,\ 8,\ code);}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ draw\_rect<false>(0,\ SIDE\ -\/\ 8,\ 8,\ 1,\ code);}
\DoxyCodeLine{00619\ }
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Perforate\ timing\ patterns}}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 7;\ i\ <\ SIDE\ -\/\ 7;\ i\ +=\ 2)}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ 6\ *\ SIDE\ +\ i);}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ i\ *\ SIDE\ +\ 6);}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00626\ \ \ \ \ \}}
\DoxyCodeLine{00627\ }
\DoxyCodeLine{00628\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00629\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a21197672d936ef9050cf6887e00cd956}{Qr<V>::add\_version}}()}
\DoxyCodeLine{00630\ \ \ \ \ \{}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (V\ <\ 7)}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00633\ }
\DoxyCodeLine{00634\ \ \ \ \ \ \ \ \ uint32\_t\ rem\ =\ V;}
\DoxyCodeLine{00635\ }
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ i\ =\ 0;\ i\ <\ 12;\ ++i)}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \ \ \ \ rem\ =\ (rem\ <<\ 1)\ \string^\ ((rem\ >>\ 11)\ *\ 0x1F25);}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ uint32\_t\ data\ =\ V\ <<\ 12\ |\ rem;}
\DoxyCodeLine{00640\ }
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ 6;\ ++x)}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ 3;\ ++j)}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ y\ =\ SIDE\ -\/\ 11\ +\ j;}
\DoxyCodeLine{00646\ }
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ black\ =\ (data\ >>\ (x\ *\ 3\ +\ j))\ \&\ 1;}
\DoxyCodeLine{00648\ }
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!black)}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ y\ *\ SIDE\ +\ x);}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ y\ +\ SIDE\ *\ x);}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00656\ \ \ \ \ \}}
\DoxyCodeLine{00657\ }
\DoxyCodeLine{00658\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00659\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a87a558f0962a9bd59085346e00ab69d1}{Qr<V>::add\_format}}(\mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865}{Ecc}}\ ecc,\ \textcolor{keywordtype}{int}\ mask)}
\DoxyCodeLine{00660\ \ \ \ \ \{}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ data\ =\ (ecc\ \string^\ 1)\ <<\ 3\ |\ mask;}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ rem\ \ =\ data;}
\DoxyCodeLine{00663\ }
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 10;\ i++)}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ rem\ =\ (rem\ <<\ 1)\ \string^\ ((rem\ >>\ 9)\ *\ 0b10100110111);}
\DoxyCodeLine{00666\ }
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ res\ =\ (data\ <<\ 10\ |\ rem)\ \string^\ 0b101010000010010;}
\DoxyCodeLine{00668\ }
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 6;\ ++i)}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00671\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((res\ >>\ i)\ \&\ 1)}
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(code,\ SIDE\ *\ 8\ +\ SIDE\ -\/\ 1\ -\/\ i);}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(code,\ SIDE\ *\ i\ +\ 8);}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ SIDE\ *\ 8\ +\ SIDE\ -\/\ 1\ -\/\ i);}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ SIDE\ *\ i\ +\ 8);}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 6;\ i\ <\ 8;\ ++i)}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((res\ >>\ i)\ \&\ 1)}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(code,\ SIDE\ *\ 8\ +\ SIDE\ -\/\ 1\ -\/\ i);}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(code,\ SIDE\ *\ (i\ +\ 1)\ +\ 8);}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ SIDE\ *\ 8\ +\ SIDE\ -\/\ 1\ -\/\ i);}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ SIDE\ *\ (i\ +\ 1)\ +\ 8);}
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00696\ }
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((res\ >>\ 8)\ \&\ 1)}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(code,\ SIDE\ *\ 8\ +\ 7);}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(code,\ SIDE\ *\ (SIDE\ -\/\ 7)\ +\ 8);}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ SIDE\ *\ 8\ +\ 7);}
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ SIDE\ *\ (SIDE\ -\/\ 7)\ +\ 8);}
\DoxyCodeLine{00706\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00707\ }
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 9,\ j\ =\ 5;\ i\ <\ 15;\ ++i,\ -\/-\/j)}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((res\ >>\ i)\ \&\ 1)}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(code,\ SIDE\ *\ 8\ +\ j);}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(code,\ SIDE\ *\ (SIDE\ -\/\ 1\ -\/\ j)\ +\ 8);}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ SIDE\ *\ 8\ +\ j);}
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ SIDE\ *\ (SIDE\ -\/\ 1\ -\/\ j)\ +\ 8);}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00721\ \ \ \ \ \}}
\DoxyCodeLine{00722\ }
\DoxyCodeLine{00723\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00724\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ B>}
\DoxyCodeLine{00725\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a3f1ecaff1bec83f2aa98a846e3d52cd1}{Qr<V>::draw\_rect}}(\textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ height,\ \textcolor{keywordtype}{int}\ width,\ uint8\_t*\ out)}
\DoxyCodeLine{00726\ \ \ \ \ \{}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (B)}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ dy\ =\ y\ *\ SIDE;\ dy\ <\ (y\ +\ height)\ *\ SIDE;\ dy\ +=\ SIDE)}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ dx\ =\ x;\ dx\ <\ x\ +\ width;\ ++dx)}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(out,\ dy\ +\ dx);}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ dy\ =\ y\ *\ SIDE;\ dy\ <\ (y\ +\ height)\ *\ SIDE;\ dy\ +=\ SIDE)}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ dx\ =\ x;\ dx\ <\ x\ +\ width;\ ++dx)}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(out,\ dy\ +\ dx);}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00739\ \ \ \ \ \}}
\DoxyCodeLine{00740\ }
\DoxyCodeLine{00741\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00742\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ B>}
\DoxyCodeLine{00743\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a370c2f99cc976436510b92d82a556cff}{Qr<V>::draw\_bound}}(\textcolor{keywordtype}{int}\ y,\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ height,\ \textcolor{keywordtype}{int}\ width,\ uint8\_t*\ out)}
\DoxyCodeLine{00744\ \ \ \ \ \{}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (B)}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ y\ *\ SIDE\ +\ x;\ i\ <\ y\ *\ SIDE\ +\ x\ +\ width;\ ++i)}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(out,\ i);}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ (y\ +\ height\ -\/\ 1)\ *\ SIDE\ +\ x;}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i\ <\ (y\ +\ height\ -\/\ 1)\ *\ SIDE\ +\ x\ +\ width;\ ++i)}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(out,\ i);}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ (y\ +\ 1)\ *\ SIDE\ +\ x;\ i\ <\ (y\ +\ height\ -\/\ 1)\ *\ SIDE\ +\ x;\ i\ +=\ SIDE)}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(out,\ i);}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ (y\ +\ 1)\ *\ SIDE\ +\ x\ +\ width\ -\/\ 1;}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i\ <\ (y\ +\ height\ -\/\ 1)\ *\ SIDE\ +\ x\ +\ width\ -\/\ 1;\ i\ +=\ SIDE)}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(out,\ i);}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ y\ *\ SIDE\ +\ x;\ i\ <\ y\ *\ SIDE\ +\ x\ +\ width;\ ++i)}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(out,\ i);}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ (y\ +\ height\ -\/\ 1)\ *\ SIDE\ +\ x;}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i\ <\ (y\ +\ height\ -\/\ 1)\ *\ SIDE\ +\ x\ +\ width;\ ++i)}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(out,\ i);}
\DoxyCodeLine{00765\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ (y\ +\ 1)\ *\ SIDE\ +\ x;\ i\ <\ (y\ +\ height\ -\/\ 1)\ *\ SIDE\ +\ x;\ i\ +=\ SIDE)}
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(out,\ i);}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ (y\ +\ 1)\ *\ SIDE\ +\ x\ +\ width\ -\/\ 1;}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ i\ <\ (y\ +\ height\ -\/\ 1)\ *\ SIDE\ +\ x\ +\ width\ -\/\ 1;\ i\ +=\ SIDE)}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(out,\ i);}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00771\ \ \ \ \ \}}
\DoxyCodeLine{00772\ }
\DoxyCodeLine{00773\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00774\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_a509525bd878c42421fc86d08c7c477c0}{Qr<V>::reserve\_patterns}}(uint8\_t*\ out)}
\DoxyCodeLine{00775\ \ \ \ \ \{}
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ draw\_rect<true>(0,\ 6,\ SIDE,\ 1,\ out);}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ draw\_rect<true>(6,\ 0,\ 1,\ SIDE,\ out);}
\DoxyCodeLine{00778\ }
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ draw\_rect<true>(0,\ 0,\ 9,\ 9,\ out);}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \ \ draw\_rect<true>(SIDE\ -\/\ 8,\ 0,\ 8,\ 9,\ out);}
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \ draw\_rect<true>(0,\ SIDE\ -\/\ 8,\ 9,\ 8,\ out);}
\DoxyCodeLine{00782\ }
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ N\_ALIGN;\ ++i)}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ N\_ALIGN;\ ++j)}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((!i\ \&\&\ !j)\ ||\ (!i\ \&\&\ j\ ==\ N\_ALIGN\ -\/\ 1)\ ||\ (!j\ \&\&\ i\ ==\ N\_ALIGN\ -\/\ 1))}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ draw\_rect<true>(\mbox{\hyperlink{namespaceqr_aa79f24e70db606e9cdf5c18cc0e7aa57}{ALIGN\_POS}}[V][i]\ -\/\ 2,\ \mbox{\hyperlink{namespaceqr_aa79f24e70db606e9cdf5c18cc0e7aa57}{ALIGN\_POS}}[V][j]\ -\/\ 2,\ 5,\ 5,\ out);}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00792\ }
\DoxyCodeLine{00793\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (V\ >=\ 7)}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_rect<true>(SIDE\ -\/\ 11,\ 0,\ 3,\ 6,\ out);}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \ \ \ \ draw\_rect<true>(0,\ SIDE\ -\/\ 11,\ 6,\ 3,\ out);}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00798\ \ \ \ \ \}}
\DoxyCodeLine{00799\ }
\DoxyCodeLine{00800\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00801\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ H>}
\DoxyCodeLine{00802\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_a50942e1977059e79f0afdde2659ea0fe}{Qr<V>::rule\_1\_3\_score}}()}
\DoxyCodeLine{00803\ \ \ \ \ \{}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ y\_max\ \ =\ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865a5053c50355f114b49424fb91510a4320}{H}}\ ?\ N\_BITS\ :\ SIDE;}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ x\_max\ \ =\ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865a5053c50355f114b49424fb91510a4320}{H}}\ ?\ SIDE\ :\ N\_BITS;}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ y\_step\ =\ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865a5053c50355f114b49424fb91510a4320}{H}}\ ?\ SIDE\ :\ 1;}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ x\_step\ =\ \mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865a5053c50355f114b49424fb91510a4320}{H}}\ ?\ 1\ :\ SIDE;}
\DoxyCodeLine{00808\ }
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ res\ =\ 0;}
\DoxyCodeLine{00810\ }
\DoxyCodeLine{00811\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ y\_max;\ y\ +=\ y\_step)}
\DoxyCodeLine{00812\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00813\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ color\ \ =\ get\_arr\_bit(code,\ y);}
\DoxyCodeLine{00814\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ finder\ =\ color;}
\DoxyCodeLine{00815\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \ cnt\ \ \ \ =\ 1;}
\DoxyCodeLine{00816\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ 1;\ x\ <\ x\_max;\ x\ +=\ x\_step)}
\DoxyCodeLine{00817\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00818\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_arr\_bit(code,\ y\ +\ x)\ ==\ color)}
\DoxyCodeLine{00819\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00820\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++cnt;}
\DoxyCodeLine{00821\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cnt\ ==\ 5)}
\DoxyCodeLine{00822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ +=\ 3;}
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cnt\ >\ 5)}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++res;}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ color\ =\ !color;}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cnt\ \ \ =\ 1;}
\DoxyCodeLine{00830\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Finder-\/like}}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ finder\ =\ ((finder\ <<\ 1)\ \&\ 0x7ff)\ |\ color;}
\DoxyCodeLine{00833\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ >=\ x\_step\ *\ 10)}
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (finder\ ==\ 0x05d\ ||\ finder\ ==\ 0x5d0)}
\DoxyCodeLine{00836\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ +=\ 40;}
\DoxyCodeLine{00837\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00838\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00839\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00840\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ res;}
\DoxyCodeLine{00841\ \ \ \ \ \}}
\DoxyCodeLine{00842\ }
\DoxyCodeLine{00843\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00844\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_a0e4cecb2dd2446e547a669c519495b7c}{Qr<V>::penalty\_score}}()}
\DoxyCodeLine{00845\ \ \ \ \ \{}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ res\ =\ 0;}
\DoxyCodeLine{00847\ }
\DoxyCodeLine{00848\ \ \ \ \ \ \ \ \ res\ +=\ rule\_1\_3\_score<true>();}
\DoxyCodeLine{00849\ \ \ \ \ \ \ \ \ res\ +=\ rule\_1\_3\_score<false>();}
\DoxyCodeLine{00850\ }
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ N\_BITS\ -\/\ SIDE;\ y\ +=\ SIDE)}
\DoxyCodeLine{00852\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00853\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ SIDE\ -\/\ 1;\ ++x)}
\DoxyCodeLine{00854\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ c\ =\ get\_arr\_bit(code,\ y\ +\ x);}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (c\ ==\ get\_arr\_bit(code,\ y\ +\ x\ +\ 1)\ \&\&}
\DoxyCodeLine{00858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c\ ==\ get\_arr\_bit(code,\ y\ +\ x\ +\ SIDE)\ \&\&}
\DoxyCodeLine{00859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c\ ==\ get\_arr\_bit(code,\ y\ +\ x\ +\ SIDE\ +\ 1))}
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ +=\ 3;}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00863\ }
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ black\ =\ 0;}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ N\_BITS;\ y\ +=\ SIDE)}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ SIDE;\ ++x)}
\DoxyCodeLine{00868\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ black\ +=\ get\_arr\_bit(code,\ y\ +\ x);}
\DoxyCodeLine{00869\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00870\ \ \ \ \ \ \ \ \ res\ +=\ abs((black\ *\ 100)\ /\ N\_BITS\ -\/\ 50)\ /\ 5\ *\ 10;}
\DoxyCodeLine{00871\ }
\DoxyCodeLine{00872\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ res;}
\DoxyCodeLine{00873\ \ \ \ \ \}}
\DoxyCodeLine{00874\ }
\DoxyCodeLine{00875\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00876\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structqr_1_1_qr_a4878e135fef31830fef72568a1038aae}{Qr<V>::select\_mask}}(\mbox{\hyperlink{namespaceqr_af98ebde8f935f582815540adba4b1865}{Ecc}}\ ecc,\ uint8\_t*\ patterns)}
\DoxyCodeLine{00877\ \ \ \ \ \{}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ min\_score\ =\ -\/1;}
\DoxyCodeLine{00879\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ score\ \ \ \ \ =\ 0;}
\DoxyCodeLine{00880\ \ \ \ \ \ \ \ \ uint8\_t\ \ mask\ \ \ \ \ \ =\ 0;}
\DoxyCodeLine{00881\ }
\DoxyCodeLine{00882\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 8;\ ++i)}
\DoxyCodeLine{00883\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00884\ \ \ \ \ \ \ \ \ \ \ \ \ add\_format(ecc,\ i);}
\DoxyCodeLine{00885\ \ \ \ \ \ \ \ \ \ \ \ \ apply\_mask(i,\ patterns);}
\DoxyCodeLine{00886\ \ \ \ \ \ \ \ \ \ \ \ \ score\ =\ penalty\_score();}
\DoxyCodeLine{00887\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (score\ <\ min\_score)}
\DoxyCodeLine{00888\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mask\ \ \ \ \ \ =\ i;}
\DoxyCodeLine{00890\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ min\_score\ =\ score;}
\DoxyCodeLine{00891\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00892\ \ \ \ \ \ \ \ \ \ \ \ \ apply\_mask(i,\ patterns);}
\DoxyCodeLine{00893\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00894\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ mask;}
\DoxyCodeLine{00895\ \ \ \ \ \}}
\DoxyCodeLine{00896\ }
\DoxyCodeLine{00897\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00898\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structqr_1_1_qr_aff67713303597c1bbc1b033cd2540833}{Qr<V>::apply\_mask}}(\textcolor{keywordtype}{int}\ mask,\ uint8\_t*\ patterns)}
\DoxyCodeLine{00899\ \ \ \ \ \{}
\DoxyCodeLine{00900\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ y\ =\ 0,\ dy\ =\ 0;\ y\ <\ SIDE;\ ++y,\ dy\ +=\ SIDE)}
\DoxyCodeLine{00901\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00902\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ SIDE;\ ++x)}
\DoxyCodeLine{00903\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coord\ =\ dy\ +\ x;}
\DoxyCodeLine{00905\ }
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_arr\_bit(patterns,\ coord))}
\DoxyCodeLine{00907\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00908\ }
\DoxyCodeLine{00909\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ keep\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00910\ }
\DoxyCodeLine{00911\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (mask)}
\DoxyCodeLine{00912\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00913\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00914\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keep\ =\ (x\ +\ y)\ \&\ 1;}
\DoxyCodeLine{00915\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00916\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00917\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keep\ =\ y\ \&\ 1;}
\DoxyCodeLine{00918\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00919\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{00920\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keep\ =\ x\ \%\ 3;}
\DoxyCodeLine{00921\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00922\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{00923\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keep\ =\ (x\ +\ y)\ \%\ 3;}
\DoxyCodeLine{00924\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00925\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{00926\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keep\ =\ (y\ /\ 2\ +\ x\ /\ 3)\ \&\ 1;}
\DoxyCodeLine{00927\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00928\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 5:}
\DoxyCodeLine{00929\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keep\ =\ x\ *\ y\ \%\ 2\ +\ x\ *\ y\ \%\ 3;}
\DoxyCodeLine{00930\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00931\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 6:}
\DoxyCodeLine{00932\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keep\ =\ (x\ *\ y\ \%\ 2\ +\ x\ *\ y\ \%\ 3)\ \&\ 1;}
\DoxyCodeLine{00933\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00934\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 7:}
\DoxyCodeLine{00935\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ keep\ =\ ((x\ +\ y)\ \%\ 2\ +\ x\ *\ y\ \%\ 3)\ \&\ 1;}
\DoxyCodeLine{00936\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00937\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00938\ }
\DoxyCodeLine{00939\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!keep)}
\DoxyCodeLine{00940\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00941\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (get\_arr\_bit(code,\ coord))}
\DoxyCodeLine{00942\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ clr\_arr\_bit(code,\ coord);}
\DoxyCodeLine{00943\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_arr\_bit(code,\ coord);}
\DoxyCodeLine{00945\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00946\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00947\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00948\ \ \ \ \ \}}
\DoxyCodeLine{00949\ }
\DoxyCodeLine{00951\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classqr_1_1_qr_delegate}{QrDelegate}}\ final}
\DoxyCodeLine{00952\ \ \ \ \ \{}
\DoxyCodeLine{00953\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00954\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classqr_1_1_qr_delegate_a1b5f0ba642703957cface508e82e551a}{QrDelegate}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00955\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classqr_1_1_qr_delegate_a0342aef47d459c32076b53d082e98672}{\string~QrDelegate}}()\ \ \ \ \ \ \ \ \ \ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00956\ }
\DoxyCodeLine{00957\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classqr_1_1_qr_delegate_ad8f7b80d449a2e896b63096b57789a7d}{NE\_COPY\_DEFAULT}}(\mbox{\hyperlink{classqr_1_1_qr_delegate}{QrDelegate}});}
\DoxyCodeLine{00958\ }
\DoxyCodeLine{00960\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{int}\ V>}
\DoxyCodeLine{00961\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classqr_1_1_qr_delegate_aa0135a4c1798b48370c81f0f23d7eb84}{draw}}(\mbox{\hyperlink{structqr_1_1_qr}{Qr<V>}}\&\ subject,\ \textcolor{keywordtype}{int}\ x,\ \textcolor{keywordtype}{int}\ y)\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00962\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00963\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ subject.draw(x,\ y);}
\DoxyCodeLine{00964\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00965\ \ \ \ \ \};}
\DoxyCodeLine{00966\ \}\ \textcolor{comment}{//\ namespace\ qr}}
\DoxyCodeLine{00967\ }
\DoxyCodeLine{00968\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_ne_o_s_1_1_qr}{NeOS::Qr}}}
\DoxyCodeLine{00969\ \{}
\DoxyCodeLine{00970\ \ \ \ \ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespaceqr}{qr}};}
\DoxyCodeLine{00971\ \}\ \textcolor{comment}{//\ namespace\ NeOS::Qr}}
\DoxyCodeLine{00972\ }
\DoxyCodeLine{00973\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ QR\_H}}

\end{DoxyCode}
